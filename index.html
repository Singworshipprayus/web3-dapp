<!DOCTYPE html><html lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Web3 Wallet Connect</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="module" crossorigin src="https://cdn.jsdelivr.net/npm/ethers@6.8.1/dist/ethers.min.js"></script>
  <style>
    body {
      transition: background 0.3s ease, color 0.3s ease;
    }
    .loading-spinner {
      width: 1.5rem;
      height: 1.5rem;
      border: 0.2em solid rgba(0, 0, 0, 0.1);
      border-top: 0.2em solid #0A5CFE;
      border-radius: 50%;
      animation: spin 0.6s linear infinite;
      display: inline-block;
    }
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
    .wallet-banner {
      font-size: 0.9rem;
      background: #0A5CFE;
      color: white;
      padding: 0.5rem 1rem;
    }
  </style>
</head>
<body class="d-flex flex-column min-vh-100 bg-light text-dark">
  <header class="py-3 px-4 d-flex justify-content-between align-items-center border-bottom">
    <h4 class="m-0">Web3 Connect</h4>
    <div>
      <button class="btn btn-sm btn-outline-primary me-2" id="themeToggle">Toggle Theme</button>
      <button class="btn btn-primary" id="connectBtn">
        Connect Wallet <span id="connectSpinner" class="ms-2 d-none loading-spinner"></span>
      </button>
      <button class="btn btn-danger d-none" id="disconnectBtn">Disconnect</button>
    </div>
  </header>  <div id="walletBanner" class="wallet-banner d-none text-center"></div>  <main class="flex-grow-1 d-flex align-items-center justify-content-center">
    <div class="text-center">
      <h2>Welcome to the Web3 Wallet Connection Demo</h2>
      <p class="lead">Connect your wallet to get started.</p>
    </div>
  </main>  <script type="module">
    import EthereumProvider from "https://cdn.jsdelivr.net/npm/@walletconnect/ethereum-provider@2.11.4/dist/index.es.js";

    const connectBtn = document.getElementById("connectBtn");
    const disconnectBtn = document.getElementById("disconnectBtn");
    const themeToggle = document.getElementById("themeToggle");
    const banner = document.getElementById("walletBanner");
    const spinner = document.getElementById("connectSpinner");

    let provider;

    const chains = [
      1,      // Ethereum
      56,     // BNB Chain
      137,    // Polygon
      43114,  // Avalanche
      10,     // Optimism
      42161   // Arbitrum
    ];

    async function initProvider() {
      provider = await EthereumProvider.init({
        projectId: "d1f15b88ba7f587e4ec35b6e72c83607", // Example WalletConnect project ID
        chains,
        showQrModal: true,
      });
      return provider;
    }

    function showBanner(address) {
      banner.textContent = `Connected: ${address}`;
      banner.classList.remove("d-none");
    }

    async function connectWallet() {
      spinner.classList.remove("d-none");
      connectBtn.disabled = true;
      try {
        if (!provider) provider = await initProvider();
        await provider.enable();
        const ethersProvider = new ethers.BrowserProvider(provider);
        const signer = await ethersProvider.getSigner();
        const address = await signer.getAddress();
        localStorage.setItem("connectedWallet", address);
        showBanner(address);
        connectBtn.classList.add("d-none");
        disconnectBtn.classList.remove("d-none");
      } catch (err) {
        alert("Wallet connection failed.");
      } finally {
        spinner.classList.add("d-none");
        connectBtn.disabled = false;
      }
    }

    function disconnectWallet() {
      localStorage.removeItem("connectedWallet");
      if (provider?.disconnect) provider.disconnect();
      banner.classList.add("d-none");
      connectBtn.classList.remove("d-none");
      disconnectBtn.classList.add("d-none");
    }

    function restoreConnection() {
      const stored = localStorage.getItem("connectedWallet");
      if (stored) {
        showBanner(stored);
        connectBtn.classList.add("d-none");
        disconnectBtn.classList.remove("d-none");
      }
    }

    function toggleTheme() {
      const html = document.documentElement;
      const newTheme = html.getAttribute("data-bs-theme") === "dark" ? "light" : "dark";
      html.setAttribute("data-bs-theme", newTheme);
    }

    connectBtn.addEventListener("click", connectWallet);
    disconnectBtn.addEventListener("click", disconnectWallet);
    themeToggle.addEventListener("click", toggleTheme);

    restoreConnection();
  </script>  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script></body>
</html>
