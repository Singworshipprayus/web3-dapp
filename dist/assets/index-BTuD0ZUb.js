var ZO=Object.defineProperty;var db=r=>{throw TypeError(r)};var XO=(r,e,t)=>e in r?ZO(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var Q=(r,e,t)=>XO(r,typeof e!="symbol"?e+"":e,t),hg=(r,e,t)=>e.has(r)||db("Cannot "+t);var P=(r,e,t)=>(hg(r,e,"read from private field"),t?t.call(r):e.get(r)),J=(r,e,t)=>e.has(r)?db("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),F=(r,e,t,n)=>(hg(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),de=(r,e,t)=>(hg(r,e,"access private method"),t);var Ou=(r,e,t,n)=>({set _(i){F(r,e,i,t)},get _(){return P(r,e,n)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const eC="6.14.4";function tC(r,e,t){const n=e.split("|").map(o=>o.trim());for(let o=0;o<n.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}const i=new Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${t}`,i.value=r,i}async function Cr(r){const e=Object.keys(r);return(await Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,i,o)=>(n[e[o]]=i,n),{})}function Ce(r,e,t){for(let n in e){let i=e[n];const o=t?t[n]:null;o&&tC(i,o,n),Object.defineProperty(r,n,{enumerable:!0,value:i,writable:!1})}}function Ja(r,e){if(r==null)return"null";if(e==null&&(e=new Set),typeof r=="object"){if(e.has(r))return"[Circular]";e.add(r)}if(Array.isArray(r))return"[ "+r.map(t=>Ja(t,e)).join(", ")+" ]";if(r instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let i=0;i<r.length;i++)n+=t[r[i]>>4],n+=t[r[i]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return Ja(r.toJSON(),e);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{const t=Object.keys(r);return t.sort(),"{ "+t.map(n=>`${Ja(n,e)}: ${Ja(r[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function pr(r,e){return r&&r.code===e}function yy(r){return pr(r,"CALL_EXCEPTION")}function St(r,e,t){let n=r;{const o=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${Ja(t)}`);for(const c in t){if(c==="shortMessage")continue;const u=t[c];o.push(c+"="+Ja(u))}}o.push(`code=${e}`),o.push(`version=${eC}`),o.length&&(r+=" ("+o.join(", ")+")")}let i;switch(e){case"INVALID_ARGUMENT":i=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=new RangeError(r);break;default:i=new Error(r)}return Ce(i,{code:e}),t&&Object.assign(i,t),i.shortMessage==null&&Ce(i,{shortMessage:n}),i}function le(r,e,t,n){if(!r)throw St(e,t,n)}function j(r,e,t,n){le(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function YE(r,e,t){t==null&&(t=""),t&&(t=": "+t),le(r>=e,"missing argument"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),le(r<=e,"too many arguments"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");r.push(e)}catch{}return r},[]);function ld(r,e,t){if(t==null&&(t=""),r!==e){let n=t,i="new";t&&(n+=".",i+=" "+t),le(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:i})}}function ZE(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const n=new Uint8Array((r.length-2)/2);let i=2;for(let o=0;o<n.length;o++)n[o]=parseInt(r.substring(i,i+2),16),i+=2;return n}j(!1,"invalid BytesLike value",e||"value",r)}function Ge(r,e){return ZE(r,e,!1)}function Nr(r,e){return ZE(r,e,!0)}function vt(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}function my(r){return vt(r,!0)||r instanceof Uint8Array}const pb="0123456789abcdef";function ye(r){const e=Ge(r);let t="0x";for(let n=0;n<e.length;n++){const i=e[n];t+=pb[(i&240)>>4]+pb[i&15]}return t}function Mt(r){return"0x"+r.map(e=>ye(e).substring(2)).join("")}function tc(r){return vt(r,!0)?(r.length-2)/2:Ge(r).length}function Ft(r,e,t){const n=Ge(r);return t!=null&&t>n.length&&le(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),ye(n.slice(e??0,t??n.length))}function XE(r,e,t){const n=Ge(r);le(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});const i=new Uint8Array(e);return i.fill(0),t?i.set(n,e-n.length):i.set(n,0),ye(i)}function ls(r,e){return XE(r,e,!0)}function rC(r,e){return XE(r,e,!1)}const hd=BigInt(0),Xn=BigInt(1),Ya=9007199254740991;function nC(r,e){const t=fd(r,"value"),n=BigInt(Ve(e,"width"));if(le(t>>n===hd,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-Xn){const i=(Xn<<n)-Xn;return-((~t&i)+Xn)}return t}function eA(r,e){let t=Ee(r,"value");const n=BigInt(Ve(e,"width")),i=Xn<<n-Xn;if(t<hd){t=-t,le(t<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});const o=(Xn<<n)-Xn;return(~t&o)+Xn}else le(t<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function Qu(r,e){const t=fd(r,"value"),n=BigInt(Ve(e,"bits"));return t&(Xn<<n)-Xn}function Ee(r,e){switch(typeof r){case"bigint":return r;case"number":return j(Number.isInteger(r),"underflow",e||"value",r),j(r>=-Ya&&r<=Ya,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){j(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}j(!1,"invalid BigNumberish value",e||"value",r)}function fd(r,e){const t=Ee(r,e);return le(t>=hd,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}const gb="0123456789abcdef";function wy(r){if(r instanceof Uint8Array){let e="0x0";for(const t of r)e+=gb[t>>4],e+=gb[t&15];return BigInt(e)}return Ee(r)}function Ve(r,e){switch(typeof r){case"bigint":return j(r>=-Ya&&r<=Ya,"overflow",e||"value",r),Number(r);case"number":return j(Number.isInteger(r),"underflow",e||"value",r),j(r>=-Ya&&r<=Ya,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return Ve(BigInt(r),e)}catch(t){j(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}j(!1,"invalid numeric value",e||"value",r)}function iC(r){return Ve(wy(r))}function Zs(r,e){let n=fd(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{const i=Ve(e,"width");for(le(i*2>=n.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<i*2;)n="0"+n}return"0x"+n}function tr(r){const e=fd(r,"value");if(e===hd)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const n=new Uint8Array(t.length/2);for(let i=0;i<n.length;i++){const o=i*2;n[i]=parseInt(t.substring(o,o+2),16)}return n}function Zn(r){let e=ye(my(r)?r:tr(r)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const yb="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const mb=BigInt(58);function sC(r){const e=Ge(r);let t=wy(e),n="";for(;t;)n=yb[Number(t%mb)]+n,t/=mb;for(let i=0;i<e.length&&!e[i];i++)n=yb[0]+n;return n}function oC(r){r=atob(r);const e=new Uint8Array(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return Ge(e)}function aC(r){const e=Ge(r);let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}var oc;class tA{constructor(e,t,n){Q(this,"filter");Q(this,"emitter");J(this,oc);F(this,oc,t),Ce(this,{emitter:e,filter:n})}async removeListener(){P(this,oc)!=null&&await this.emitter.off(this.filter,P(this,oc))}}oc=new WeakMap;function cC(r,e,t,n,i){j(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function rA(r,e,t,n,i){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let o=0;for(let c=e+1;c<t.length&&t[c]>>6===2;c++)o++;return o}return r==="OVERRUN"?t.length-e-1:0}function uC(r,e,t,n,i){return r==="OVERLONG"?(j(typeof i=="number","invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),rA(r,e,t))}const lC=Object.freeze({error:cC,ignore:rA,replace:uC});function hC(r,e){e==null&&(e=lC.error);const t=Ge(r,"bytes"),n=[];let i=0;for(;i<t.length;){const o=t[i++];if(o>>7===0){n.push(o);continue}let c=null,u=null;if((o&224)===192)c=1,u=127;else if((o&240)===224)c=2,u=2047;else if((o&248)===240)c=3,u=65535;else{(o&192)===128?i+=e("UNEXPECTED_CONTINUE",i-1,t,n):i+=e("BAD_PREFIX",i-1,t,n);continue}if(i-1+c>=t.length){i+=e("OVERRUN",i-1,t,n);continue}let l=o&(1<<8-c-1)-1;for(let f=0;f<c;f++){let d=t[i];if((d&192)!=128){i+=e("MISSING_CONTINUE",i,t,n),l=null;break}l=l<<6|d&63,i++}if(l!==null){if(l>1114111){i+=e("OUT_OF_RANGE",i-1-c,t,n,l);continue}if(l>=55296&&l<=57343){i+=e("UTF16_SURROGATE",i-1-c,t,n,l);continue}if(l<=u){i+=e("OVERLONG",i-1-c,t,n,l);continue}n.push(l)}}return n}function cs(r,e){j(typeof r=="string","invalid string value","str",r);let t=[];for(let n=0;n<r.length;n++){const i=r.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192),t.push(i&63|128);else if((i&64512)==55296){n++;const o=r.charCodeAt(n);j(n<r.length&&(o&64512)===56320,"invalid surrogate pair","str",r);const c=65536+((i&1023)<<10)+(o&1023);t.push(c>>18|240),t.push(c>>12&63|128),t.push(c>>6&63|128),t.push(c&63|128)}else t.push(i>>12|224),t.push(i>>6&63|128),t.push(i&63|128)}return new Uint8Array(t)}function fC(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Mf(r,e){return fC(hC(r,e))}function nA(r){async function e(t,n){le(n==null||!n.cancelled,"request cancelled before sending","CANCELLED");const i=t.url.split(":")[0].toLowerCase();le(i==="http"||i==="https",`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),le(i==="https"||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let o=null;const c=new AbortController,u=setTimeout(()=>{o=St("request timeout","TIMEOUT"),c.abort()},t.timeout);n&&n.addListener(()=>{o=St("request cancelled","CANCELLED"),c.abort()});const l=Object.assign({},r,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:c.signal});let f;try{f=await fetch(t.url,l)}catch(b){throw clearTimeout(u),o||b}clearTimeout(u);const d={};f.headers.forEach((b,I)=>{d[I.toLowerCase()]=b});const g=await f.arrayBuffer(),m=g==null?null:new Uint8Array(g);return{statusCode:f.status,statusMessage:f.statusText,headers:d,body:m}}return e}const dC=12,pC=250;let wb=nA();const gC=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),yC=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let fg=!1;async function iA(r,e){try{const t=r.match(gC);if(!t)throw new Error("invalid data");return new Ys(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?oC(t[3]):wC(t[3]))}catch{return new Ys(599,"BAD REQUEST (invalid data: URI)",{},null,new Xs(r))}}function sA(r){async function e(t,n){try{const i=t.match(yC);if(!i)throw new Error("invalid link");return new Xs(`${r}${i[2]}`)}catch{return new Ys(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Xs(t))}}return e}const Xh={data:iA,ipfs:sA("https://gateway.ipfs.io/ipfs/")},oA=new WeakMap;var Lo,Ts;class mC{constructor(e){J(this,Lo);J(this,Ts);F(this,Lo,[]),F(this,Ts,!1),oA.set(e,()=>{if(!P(this,Ts)){F(this,Ts,!0);for(const t of P(this,Lo))setTimeout(()=>{t()},0);F(this,Lo,[])}})}addListener(e){le(!P(this,Ts),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),P(this,Lo).push(e)}get cancelled(){return P(this,Ts)}checkSignal(){le(!this.cancelled,"cancelled","CANCELLED",{})}}Lo=new WeakMap,Ts=new WeakMap;function ef(r){if(r==null)throw new Error("missing signal; should not happen");return r.checkSignal(),r}var ac,cc,Vn,Wi,uc,lc,or,un,Ji,Mo,ko,$o,pi,Kn,Bs,jo,Wu;const nd=class nd{constructor(e){J(this,jo);J(this,ac);J(this,cc);J(this,Vn);J(this,Wi);J(this,uc);J(this,lc);J(this,or);J(this,un);J(this,Ji);J(this,Mo);J(this,ko);J(this,$o);J(this,pi);J(this,Kn);J(this,Bs);F(this,lc,String(e)),F(this,ac,!1),F(this,cc,!0),F(this,Vn,{}),F(this,Wi,""),F(this,uc,3e5),F(this,Kn,{slotInterval:pC,maxAttempts:dC}),F(this,Bs,null)}get url(){return P(this,lc)}set url(e){F(this,lc,String(e))}get body(){return P(this,or)==null?null:new Uint8Array(P(this,or))}set body(e){if(e==null)F(this,or,void 0),F(this,un,void 0);else if(typeof e=="string")F(this,or,cs(e)),F(this,un,"text/plain");else if(e instanceof Uint8Array)F(this,or,e),F(this,un,"application/octet-stream");else if(typeof e=="object")F(this,or,cs(JSON.stringify(e))),F(this,un,"application/json");else throw new Error("invalid body")}hasBody(){return P(this,or)!=null}get method(){return P(this,Wi)?P(this,Wi):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),F(this,Wi,String(e).toUpperCase())}get headers(){const e=Object.assign({},P(this,Vn));return P(this,Ji)&&(e.authorization=`Basic ${aC(cs(P(this,Ji)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&P(this,un)&&(e["content-type"]=P(this,un)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){P(this,Vn)[String(e).toLowerCase()]=String(t)}clearHeaders(){F(this,Vn,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return P(this,Ji)||null}setCredentials(e,t){j(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),F(this,Ji,`${e}:${t}`)}get allowGzip(){return P(this,cc)}set allowGzip(e){F(this,cc,!!e)}get allowInsecureAuthentication(){return!!P(this,ac)}set allowInsecureAuthentication(e){F(this,ac,!!e)}get timeout(){return P(this,uc)}set timeout(e){j(e>=0,"timeout must be non-zero","timeout",e),F(this,uc,e)}get preflightFunc(){return P(this,Mo)||null}set preflightFunc(e){F(this,Mo,e)}get processFunc(){return P(this,ko)||null}set processFunc(e){F(this,ko,e)}get retryFunc(){return P(this,$o)||null}set retryFunc(e){F(this,$o,e)}get getUrlFunc(){return P(this,Bs)||wb}set getUrlFunc(e){F(this,Bs,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${P(this,or)?ye(P(this,or)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(P(this,Kn).slotInterval=e.slotInterval),e.maxAttempts!=null&&(P(this,Kn).maxAttempts=e.maxAttempts)}send(){return le(P(this,pi)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),F(this,pi,new mC(this)),de(this,jo,Wu).call(this,0,bb()+this.timeout,0,this,new Ys(0,"",{},null,this))}cancel(){le(P(this,pi)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=oA.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();le(this.method==="GET"&&(t!=="https"||n!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const i=new nd(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,F(i,Vn,Object.assign({},P(this,Vn))),P(this,or)&&F(i,or,new Uint8Array(P(this,or))),F(i,un,P(this,un)),i}clone(){const e=new nd(this.url);return F(e,Wi,P(this,Wi)),P(this,or)&&F(e,or,P(this,or)),F(e,un,P(this,un)),F(e,Vn,Object.assign({},P(this,Vn))),F(e,Ji,P(this,Ji)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),F(e,Mo,P(this,Mo)),F(e,ko,P(this,ko)),F(e,$o,P(this,$o)),F(e,Kn,Object.assign({},P(this,Kn))),F(e,Bs,P(this,Bs)),e}static lockConfig(){fg=!0}static getGateway(e){return Xh[e.toLowerCase()]||null}static registerGateway(e,t){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(fg)throw new Error("gateways locked");Xh[e]=t}static registerGetUrl(e){if(fg)throw new Error("gateways locked");wb=e}static createGetUrlFunc(e){return nA(e)}static createDataGateway(){return iA}static createIpfsGatewayFunc(e){return sA(e)}};ac=new WeakMap,cc=new WeakMap,Vn=new WeakMap,Wi=new WeakMap,uc=new WeakMap,lc=new WeakMap,or=new WeakMap,un=new WeakMap,Ji=new WeakMap,Mo=new WeakMap,ko=new WeakMap,$o=new WeakMap,pi=new WeakMap,Kn=new WeakMap,Bs=new WeakMap,jo=new WeakSet,Wu=async function(e,t,n,i,o){var d,g,m;if(e>=P(this,Kn).maxAttempts)return o.makeServerError("exceeded maximum retry limit");le(bb()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),n>0&&await bC(n);let c=this.clone();const u=(c.url.split(":")[0]||"").toLowerCase();if(u in Xh){const b=await Xh[u](c.url,ef(P(i,pi)));if(b instanceof Ys){let I=b;if(this.processFunc){ef(P(i,pi));try{I=await this.processFunc(c,I)}catch(x){(x.throttle==null||typeof x.stall!="number")&&I.makeServerError("error in post-processing function",x).assertOk()}}return I}c=b}this.preflightFunc&&(c=await this.preflightFunc(c));const l=await this.getUrlFunc(c,ef(P(i,pi)));let f=new Ys(l.statusCode,l.statusMessage,l.headers,l.body,i);if(f.statusCode===301||f.statusCode===302){try{const b=f.headers.location||"";return de(d=c.redirect(b),jo,Wu).call(d,e+1,t,0,i,f)}catch{}return f}else if(f.statusCode===429&&(this.retryFunc==null||await this.retryFunc(c,f,e))){const b=f.headers["retry-after"];let I=P(this,Kn).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof b=="string"&&b.match(/^[1-9][0-9]*$/)&&(I=parseInt(b)),de(g=c.clone(),jo,Wu).call(g,e+1,t,I,i,f)}if(this.processFunc){ef(P(i,pi));try{f=await this.processFunc(c,f)}catch(b){(b.throttle==null||typeof b.stall!="number")&&f.makeServerError("error in post-processing function",b).assertOk();let I=P(this,Kn).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return b.stall>=0&&(I=b.stall),de(m=c.clone(),jo,Wu).call(m,e+1,t,I,i,f)}}return f};let Xs=nd;var wl,bl,vl,ln,hc,Ho;const hm=class hm{constructor(e,t,n,i,o){J(this,wl);J(this,bl);J(this,vl);J(this,ln);J(this,hc);J(this,Ho);F(this,wl,e),F(this,bl,t),F(this,vl,Object.keys(n).reduce((c,u)=>(c[u.toLowerCase()]=String(n[u]),c),{})),F(this,ln,i==null?null:new Uint8Array(i)),F(this,hc,o||null),F(this,Ho,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${P(this,ln)?ye(P(this,ln)):"null"}>`}get statusCode(){return P(this,wl)}get statusMessage(){return P(this,bl)}get headers(){return Object.assign({},P(this,vl))}get body(){return P(this,ln)==null?null:new Uint8Array(P(this,ln))}get bodyText(){try{return P(this,ln)==null?"":Mf(P(this,ln))}catch{le(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{le(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const i=t[n++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,t){let n;e?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${e})`);const i=new hm(599,n,this.headers,this.body,P(this,hc)||void 0);return F(i,Ho,{message:e,error:t}),i}throwThrottleError(e,t){t==null?t=-1:j(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw Ce(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return P(this,ln)!=null}get request(){return P(this,hc)}ok(){return P(this,Ho).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=P(this,Ho);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let n=null;this.request&&(n=this.request.url);let i=null;try{P(this,ln)&&(i=Mf(P(this,ln)))}catch{}le(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};wl=new WeakMap,bl=new WeakMap,vl=new WeakMap,ln=new WeakMap,hc=new WeakMap,Ho=new WeakMap;let Ys=hm;function bb(){return new Date().getTime()}function wC(r){return cs(r.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function bC(r){return new Promise(e=>setTimeout(e,r))}function vC(r){let e=r.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function vb(r,e,t){let n=0;for(let i=0;i<t;i++)n=n*256+r[e+i];return n}function Eb(r,e,t,n){const i=[];for(;t<e+1+n;){const o=aA(r,t);i.push(o.result),t+=o.consumed,le(t<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:r,length:n,offset:e})}return{consumed:1+n,result:i}}function aA(r,e){le(r.length!==0,"data too short","BUFFER_OVERRUN",{buffer:r,length:0,offset:1});const t=n=>{le(n<=r.length,"data short segment too short","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n})};if(r[e]>=248){const n=r[e]-247;t(e+1+n);const i=vb(r,e+1,n);return t(e+1+n+i),Eb(r,e,e+1+n,n+i)}else if(r[e]>=192){const n=r[e]-192;return t(e+1+n),Eb(r,e,e+1,n)}else if(r[e]>=184){const n=r[e]-183;t(e+1+n);const i=vb(r,e+1,n);t(e+1+n+i);const o=ye(r.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:o}}else if(r[e]>=128){const n=r[e]-128;t(e+1+n);const i=ye(r.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:vC(r[e])}}function Cl(r){const e=Ge(r,"data"),t=aA(e,0);return j(t.consumed===e.length,"unexpected junk after rlp payload","data",r),t.result}function Ab(r){const e=[];for(;r;)e.unshift(r&255),r>>=8;return e}function cA(r){if(Array.isArray(r)){let n=[];if(r.forEach(function(o){n=n.concat(cA(o))}),n.length<=55)return n.unshift(192+n.length),n;const i=Ab(n.length);return i.unshift(247+i.length),i.concat(n)}const e=Array.prototype.slice.call(Ge(r,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=Ab(e.length);return t.unshift(183+t.length),t.concat(e)}const _b="0123456789abcdef";function eo(r){let e="0x";for(const t of cA(r))e+=_b[t>>4],e+=_b[t&15];return e}const Tr=32,w0=new Uint8Array(Tr),EC=["then"],tf={},uA=new WeakMap;function Po(r){return uA.get(r)}function Ib(r,e){uA.set(r,e)}function Cu(r,e){const t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}function b0(r,e,t){return r.indexOf(null)>=0?e.map((n,i)=>n instanceof Kc?b0(Po(n),n,t):n):r.reduce((n,i,o)=>{let c=e.getValue(i);return i in n||(t&&c instanceof Kc&&(c=b0(Po(c),c,t)),n[i]=c),n},{})}var fc;const Za=class Za extends Array{constructor(...t){const n=t[0];let i=t[1],o=(t[2]||[]).slice(),c=!0;n!==tf&&(i=t,o=[],c=!1);super(i.length);J(this,fc);i.forEach((f,d)=>{this[d]=f});const u=o.reduce((f,d)=>(typeof d=="string"&&f.set(d,(f.get(d)||0)+1),f),new Map);if(Ib(this,Object.freeze(i.map((f,d)=>{const g=o[d];return g!=null&&u.get(g)===1?g:null}))),F(this,fc,[]),P(this,fc)==null&&P(this,fc),!c)return;Object.freeze(this);const l=new Proxy(this,{get:(f,d,g)=>{if(typeof d=="string"){if(d.match(/^[0-9]+$/)){const b=Ve(d,"%index");if(b<0||b>=this.length)throw new RangeError("out of result range");const I=f[b];return I instanceof Error&&Cu(`index ${b}`,I),I}if(EC.indexOf(d)>=0)return Reflect.get(f,d,g);const m=f[d];if(m instanceof Function)return function(...b){return m.apply(this===g?f:this,b)};if(!(d in f))return f.getValue.apply(this===g?f:this,[d])}return Reflect.get(f,d,g)}});return Ib(l,Po(this)),l}toArray(t){const n=[];return this.forEach((i,o)=>{i instanceof Error&&Cu(`index ${o}`,i),t&&i instanceof Za&&(i=i.toArray(t)),n.push(i)}),n}toObject(t){const n=Po(this);return n.reduce((i,o,c)=>(le(o!=null,`value at index ${c} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),b0(n,this,t)),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);const i=Po(this),o=[],c=[];for(let u=t;u<n;u++)o.push(this[u]),c.push(i[u]);return new Za(tf,o,c)}filter(t,n){const i=Po(this),o=[],c=[];for(let u=0;u<this.length;u++){const l=this[u];l instanceof Error&&Cu(`index ${u}`,l),t.call(n,l,u,this)&&(o.push(l),c.push(i[u]))}return new Za(tf,o,c)}map(t,n){const i=[];for(let o=0;o<this.length;o++){const c=this[o];c instanceof Error&&Cu(`index ${o}`,c),i.push(t.call(n,c,o,this))}return i}getValue(t){const n=Po(this).indexOf(t);if(n===-1)return;const i=this[n];return i instanceof Error&&Cu(`property ${JSON.stringify(t)}`,i.error),i}static fromItems(t,n){return new Za(tf,t,n)}};fc=new WeakMap;let Kc=Za;function xb(r){let e=tr(r);return le(e.length<=Tr,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Tr,offset:e.length}),e.length!==Tr&&(e=Nr(Mt([w0.slice(e.length%Tr),e]))),e}class fs{constructor(e,t,n,i){Q(this,"name");Q(this,"type");Q(this,"localName");Q(this,"dynamic");Ce(this,{name:e,type:t,localName:n,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){j(!1,e,this.localName,t)}}var Yi,zo,dc,Af;class v0{constructor(){J(this,dc);J(this,Yi);J(this,zo);F(this,Yi,[]),F(this,zo,0)}get data(){return Mt(P(this,Yi))}get length(){return P(this,zo)}appendWriter(e){return de(this,dc,Af).call(this,Nr(e.data))}writeBytes(e){let t=Nr(e);const n=t.length%Tr;return n&&(t=Nr(Mt([t,w0.slice(n)]))),de(this,dc,Af).call(this,t)}writeValue(e){return de(this,dc,Af).call(this,xb(e))}writeUpdatableValue(){const e=P(this,Yi).length;return P(this,Yi).push(w0),F(this,zo,P(this,zo)+Tr),t=>{P(this,Yi)[e]=xb(t)}}}Yi=new WeakMap,zo=new WeakMap,dc=new WeakSet,Af=function(e){return P(this,Yi).push(e),F(this,zo,P(this,zo)+e.length),e.length};var Vr,hn,Go,qo,Us,la,A0,lA;const fm=class fm{constructor(e,t,n){J(this,la);Q(this,"allowLoose");J(this,Vr);J(this,hn);J(this,Go);J(this,qo);J(this,Us);Ce(this,{allowLoose:!!t}),F(this,Vr,Nr(e)),F(this,Go,0),F(this,qo,null),F(this,Us,n??1024),F(this,hn,0)}get data(){return ye(P(this,Vr))}get dataLength(){return P(this,Vr).length}get consumed(){return P(this,hn)}get bytes(){return new Uint8Array(P(this,Vr))}subReader(e){const t=new fm(P(this,Vr).slice(P(this,hn)+e),this.allowLoose,P(this,Us));return F(t,qo,this),t}readBytes(e,t){let n=de(this,la,lA).call(this,0,e,!!t);return de(this,la,A0).call(this,e),F(this,hn,P(this,hn)+n.length),n.slice(0,e)}readValue(){return wy(this.readBytes(Tr))}readIndex(){return iC(this.readBytes(Tr))}};Vr=new WeakMap,hn=new WeakMap,Go=new WeakMap,qo=new WeakMap,Us=new WeakMap,la=new WeakSet,A0=function(e){var t;if(P(this,qo))return de(t=P(this,qo),la,A0).call(t,e);F(this,Go,P(this,Go)+e),le(P(this,Us)<1||P(this,Go)<=P(this,Us)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${P(this,Us)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Nr(P(this,Vr)),offset:P(this,hn),length:e,info:{bytesRead:P(this,Go),dataLength:this.dataLength}})},lA=function(e,t,n){let i=Math.ceil(t/Tr)*Tr;return P(this,hn)+i>P(this,Vr).length&&(this.allowLoose&&n&&P(this,hn)+t<=P(this,Vr).length?i=t:le(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Nr(P(this,Vr)),length:P(this,Vr).length,offset:P(this,hn)+i})),P(this,Vr).slice(P(this,hn),P(this,hn)+i)};let E0=fm;function kf(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function by(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function AC(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");kf(r.outputLen),kf(r.blockLen)}function Qc(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function hA(r,e){by(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const dg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fA=r=>r instanceof Uint8Array,_C=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),pg=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),ui=(r,e)=>r<<32-e|r>>>e,IC=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!IC)throw new Error("Non little-endian hardware is not supported");function xC(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function dd(r){if(typeof r=="string"&&(r=xC(r)),!fA(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function SC(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!fA(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}class vy{clone(){return this._cloneInto()}}function Ey(r){const e=n=>r().update(dd(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function PC(r=32){if(dg&&typeof dg.getRandomValues=="function")return dg.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}class dA extends vy{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,AC(e);const n=dd(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let c=0;c<o.length;c++)o[c]^=54;this.iHash.update(o),this.oHash=e.create();for(let c=0;c<o.length;c++)o[c]^=106;this.oHash.update(o),o.fill(0)}update(e){return Qc(this),this.iHash.update(e),this}digestInto(e){Qc(this),by(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:i,destroyed:o,blockLen:c,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=c,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const pA=(r,e,t)=>new dA(r,e).update(t).digest();pA.create=(r,e)=>new dA(r,e);function DC(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),o=BigInt(4294967295),c=Number(t>>i&o),u=Number(t&o),l=n?4:0,f=n?0:4;r.setUint32(e+l,c,n),r.setUint32(e+f,u,n)}class gA extends vy{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=pg(this.buffer)}update(e){Qc(this);const{view:t,buffer:n,blockLen:i}=this;e=dd(e);const o=e.length;for(let c=0;c<o;){const u=Math.min(i-this.pos,o-c);if(u===i){const l=pg(e);for(;i<=o-c;c+=i)this.process(l,c);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qc(this),hA(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:o}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(n,0),c=0);for(let g=c;g<i;g++)t[g]=0;DC(n,i-8,BigInt(this.length*8),o),this.process(n,0);const u=pg(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)u.setUint32(4*g,d[g],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:o,destroyed:c,pos:u}=this;return e.length=i,e.pos=u,e.finished=o,e.destroyed=c,i%t&&e.buffer.set(n),e}}const OC=(r,e,t)=>r&e^~r&t,CC=(r,e,t)=>r&e^r&t^e&t,NC=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),xs=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ss=new Uint32Array(64);class RC extends gA{constructor(){super(64,32,8,!1),this.A=xs[0]|0,this.B=xs[1]|0,this.C=xs[2]|0,this.D=xs[3]|0,this.E=xs[4]|0,this.F=xs[5]|0,this.G=xs[6]|0,this.H=xs[7]|0}get(){const{A:e,B:t,C:n,D:i,E:o,F:c,G:u,H:l}=this;return[e,t,n,i,o,c,u,l]}set(e,t,n,i,o,c,u,l){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=c|0,this.G=u|0,this.H=l|0}process(e,t){for(let g=0;g<16;g++,t+=4)Ss[g]=e.getUint32(t,!1);for(let g=16;g<64;g++){const m=Ss[g-15],b=Ss[g-2],I=ui(m,7)^ui(m,18)^m>>>3,x=ui(b,17)^ui(b,19)^b>>>10;Ss[g]=x+Ss[g-7]+I+Ss[g-16]|0}let{A:n,B:i,C:o,D:c,E:u,F:l,G:f,H:d}=this;for(let g=0;g<64;g++){const m=ui(u,6)^ui(u,11)^ui(u,25),b=d+m+OC(u,l,f)+NC[g]+Ss[g]|0,x=(ui(n,2)^ui(n,13)^ui(n,22))+CC(n,i,o)|0;d=f,f=l,l=u,u=c+b|0,c=o,o=i,i=n,n=b+x|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,c=c+this.D|0,u=u+this.E|0,l=l+this.F|0,f=f+this.G|0,d=d+this.H|0,this.set(n,i,o,c,u,l,f,d)}roundClean(){Ss.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const yA=Ey(()=>new RC),rf=BigInt(2**32-1),_0=BigInt(32);function mA(r,e=!1){return e?{h:Number(r&rf),l:Number(r>>_0&rf)}:{h:Number(r>>_0&rf)|0,l:Number(r&rf)|0}}function wA(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:o,l:c}=mA(r[i],e);[t[i],n[i]]=[o,c]}return[t,n]}const TC=(r,e)=>BigInt(r>>>0)<<_0|BigInt(e>>>0),BC=(r,e,t)=>r>>>t,UC=(r,e,t)=>r<<32-t|e>>>t,FC=(r,e,t)=>r>>>t|e<<32-t,LC=(r,e,t)=>r<<32-t|e>>>t,MC=(r,e,t)=>r<<64-t|e>>>t-32,kC=(r,e,t)=>r>>>t-32|e<<64-t,$C=(r,e)=>e,jC=(r,e)=>r,bA=(r,e,t)=>r<<t|e>>>32-t,vA=(r,e,t)=>e<<t|r>>>32-t,EA=(r,e,t)=>e<<t-32|r>>>64-t,AA=(r,e,t)=>r<<t-32|e>>>64-t;function HC(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const zC=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),GC=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,qC=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),VC=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,KC=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),QC=(r,e,t,n,i,o)=>e+t+n+i+o+(r/2**32|0)|0,$e={fromBig:mA,split:wA,toBig:TC,shrSH:BC,shrSL:UC,rotrSH:FC,rotrSL:LC,rotrBH:MC,rotrBL:kC,rotr32H:$C,rotr32L:jC,rotlSH:bA,rotlSL:vA,rotlBH:EA,rotlBL:AA,add:HC,add3L:zC,add3H:GC,add4L:qC,add4H:VC,add5H:QC,add5L:KC},[WC,JC]=$e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Ps=new Uint32Array(80),Ds=new Uint32Array(80);class YC extends gA{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:o,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:g,Fl:m,Gh:b,Gl:I,Hh:x,Hl:B}=this;return[e,t,n,i,o,c,u,l,f,d,g,m,b,I,x,B]}set(e,t,n,i,o,c,u,l,f,d,g,m,b,I,x,B){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=c|0,this.Dh=u|0,this.Dl=l|0,this.Eh=f|0,this.El=d|0,this.Fh=g|0,this.Fl=m|0,this.Gh=b|0,this.Gl=I|0,this.Hh=x|0,this.Hl=B|0}process(e,t){for(let C=0;C<16;C++,t+=4)Ps[C]=e.getUint32(t),Ds[C]=e.getUint32(t+=4);for(let C=16;C<80;C++){const S=Ps[C-15]|0,D=Ds[C-15]|0,E=$e.rotrSH(S,D,1)^$e.rotrSH(S,D,8)^$e.shrSH(S,D,7),p=$e.rotrSL(S,D,1)^$e.rotrSL(S,D,8)^$e.shrSL(S,D,7),_=Ps[C-2]|0,$=Ds[C-2]|0,q=$e.rotrSH(_,$,19)^$e.rotrBH(_,$,61)^$e.shrSH(_,$,6),Z=$e.rotrSL(_,$,19)^$e.rotrBL(_,$,61)^$e.shrSL(_,$,6),oe=$e.add4L(p,Z,Ds[C-7],Ds[C-16]),fe=$e.add4H(oe,E,q,Ps[C-7],Ps[C-16]);Ps[C]=fe|0,Ds[C]=oe|0}let{Ah:n,Al:i,Bh:o,Bl:c,Ch:u,Cl:l,Dh:f,Dl:d,Eh:g,El:m,Fh:b,Fl:I,Gh:x,Gl:B,Hh:M,Hl:R}=this;for(let C=0;C<80;C++){const S=$e.rotrSH(g,m,14)^$e.rotrSH(g,m,18)^$e.rotrBH(g,m,41),D=$e.rotrSL(g,m,14)^$e.rotrSL(g,m,18)^$e.rotrBL(g,m,41),E=g&b^~g&x,p=m&I^~m&B,_=$e.add5L(R,D,p,JC[C],Ds[C]),$=$e.add5H(_,M,S,E,WC[C],Ps[C]),q=_|0,Z=$e.rotrSH(n,i,28)^$e.rotrBH(n,i,34)^$e.rotrBH(n,i,39),oe=$e.rotrSL(n,i,28)^$e.rotrBL(n,i,34)^$e.rotrBL(n,i,39),fe=n&o^n&u^o&u,re=i&c^i&l^c&l;M=x|0,R=B|0,x=b|0,B=I|0,b=g|0,I=m|0,{h:g,l:m}=$e.add(f|0,d|0,$|0,q|0),f=u|0,d=l|0,u=o|0,l=c|0,o=n|0,c=i|0;const v=$e.add3L(q,oe,re);n=$e.add3H(v,$,Z,fe),i=v|0}({h:n,l:i}=$e.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:c}=$e.add(this.Bh|0,this.Bl|0,o|0,c|0),{h:u,l}=$e.add(this.Ch|0,this.Cl|0,u|0,l|0),{h:f,l:d}=$e.add(this.Dh|0,this.Dl|0,f|0,d|0),{h:g,l:m}=$e.add(this.Eh|0,this.El|0,g|0,m|0),{h:b,l:I}=$e.add(this.Fh|0,this.Fl|0,b|0,I|0),{h:x,l:B}=$e.add(this.Gh|0,this.Gl|0,x|0,B|0),{h:M,l:R}=$e.add(this.Hh|0,this.Hl|0,M|0,R|0),this.set(n,i,o,c,u,l,f,d,g,m,b,I,x,B,M,R)}roundClean(){Ps.fill(0),Ds.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const ZC=Ey(()=>new YC);function XC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Sb=XC();Sb.crypto||Sb.msCrypto;function eN(r){switch(r){case"sha256":return yA.create();case"sha512":return ZC.create()}j(!1,"invalid hashing algorithm name","algorithm",r)}const[_A,IA,xA]=[[],[],[]],tN=BigInt(0),Nu=BigInt(1),rN=BigInt(2),nN=BigInt(7),iN=BigInt(256),sN=BigInt(113);for(let r=0,e=Nu,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],_A.push(2*(5*n+t)),IA.push((r+1)*(r+2)/2%64);let i=tN;for(let o=0;o<7;o++)e=(e<<Nu^(e>>nN)*sN)%iN,e&rN&&(i^=Nu<<(Nu<<BigInt(o))-Nu);xA.push(i)}const[oN,aN]=wA(xA,!0),Pb=(r,e,t)=>t>32?EA(r,e,t):bA(r,e,t),Db=(r,e,t)=>t>32?AA(r,e,t):vA(r,e,t);function cN(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let c=0;c<10;c++)t[c]=r[c]^r[c+10]^r[c+20]^r[c+30]^r[c+40];for(let c=0;c<10;c+=2){const u=(c+8)%10,l=(c+2)%10,f=t[l],d=t[l+1],g=Pb(f,d,1)^t[u],m=Db(f,d,1)^t[u+1];for(let b=0;b<50;b+=10)r[c+b]^=g,r[c+b+1]^=m}let i=r[2],o=r[3];for(let c=0;c<24;c++){const u=IA[c],l=Pb(i,o,u),f=Db(i,o,u),d=_A[c];i=r[d],o=r[d+1],r[d]=l,r[d+1]=f}for(let c=0;c<50;c+=10){for(let u=0;u<10;u++)t[u]=r[c+u];for(let u=0;u<10;u++)r[c+u]^=~t[(u+2)%10]&t[(u+4)%10]}r[0]^=oN[n],r[1]^=aN[n]}t.fill(0)}class Ay extends vy{constructor(e,t,n,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,kf(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=_C(this.state)}keccak(){cN(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Qc(this);const{blockLen:t,state:n}=this;e=dd(e);const i=e.length;for(let o=0;o<i;){const c=Math.min(t-this.pos,i-o);for(let u=0;u<c;u++)n[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Qc(this,!1),by(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,o=e.length;i<o;){this.posOut>=n&&this.keccak();const c=Math.min(n-this.posOut,o-i);e.set(t.subarray(this.posOut,this.posOut+c),i),this.posOut+=c,i+=c}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return kf(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(hA(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:o,enableXOF:c}=this;return e||(e=new Ay(t,n,i,c,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=i,e.enableXOF=c,e.destroyed=this.destroyed,e}}const uN=(r,e,t)=>Ey(()=>new Ay(e,r,t)),lN=uN(1,136,256/8);let SA=!1;const PA=function(r){return lN(r)};let DA=PA;function Jt(r){const e=Ge(r,"data");return ye(DA(e))}Jt._=PA;Jt.lock=function(){SA=!0};Jt.register=function(r){if(SA)throw new TypeError("keccak256 is locked");DA=r};Object.freeze(Jt);const OA=function(r){return eN("sha256").update(r).digest()};let CA=OA,NA=!1;function tu(r){const e=Ge(r,"data");return ye(CA(e))}tu._=OA;tu.lock=function(){NA=!0};tu.register=function(r){if(NA)throw new Error("sha256 is locked");CA=r};Object.freeze(tu);Object.freeze(tu);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const RA=BigInt(0),pd=BigInt(1),hN=BigInt(2),gd=r=>r instanceof Uint8Array,fN=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Wc(r){if(!gd(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=fN[r[t]];return e}function TA(r){const e=r.toString(16);return e.length&1?`0${e}`:e}function _y(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Jc(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){const i=n*2,o=r.slice(i,i+2),c=Number.parseInt(o,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");t[n]=c}return t}function na(r){return _y(Wc(r))}function Iy(r){if(!gd(r))throw new Error("Uint8Array expected");return _y(Wc(Uint8Array.from(r).reverse()))}function Yc(r,e){return Jc(r.toString(16).padStart(e*2,"0"))}function xy(r,e){return Yc(r,e).reverse()}function dN(r){return Jc(TA(r))}function qn(r,e,t){let n;if(typeof e=="string")try{n=Jc(e)}catch(o){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${o}`)}else if(gd(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(`${r} expected ${t} bytes, got ${i}`);return n}function ol(...r){const e=new Uint8Array(r.reduce((n,i)=>n+i.length,0));let t=0;return r.forEach(n=>{if(!gd(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function pN(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function gN(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function yN(r){let e;for(e=0;r>RA;r>>=pd,e+=1);return e}function mN(r,e){return r>>BigInt(e)&pd}const wN=(r,e,t)=>r|(t?pd:RA)<<BigInt(e),Sy=r=>(hN<<BigInt(r-1))-pd,gg=r=>new Uint8Array(r),Ob=r=>Uint8Array.from(r);function BA(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=gg(r),i=gg(r),o=0;const c=()=>{n.fill(1),i.fill(0),o=0},u=(...g)=>t(i,n,...g),l=(g=gg())=>{i=u(Ob([0]),g),n=u(),g.length!==0&&(i=u(Ob([1]),g),n=u())},f=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const m=[];for(;g<e;){n=u();const b=n.slice();m.push(b),g+=n.length}return ol(...m)};return(g,m)=>{c(),l(g);let b;for(;!(b=m(f()));)l();return c(),b}}const bN={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Nl(r,e,t={}){const n=(i,o,c)=>{const u=bN[o];if(typeof u!="function")throw new Error(`Invalid validator "${o}", expected function`);const l=r[i];if(!(c&&l===void 0)&&!u(l,r))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${o}`)};for(const[i,o]of Object.entries(e))n(i,o,!1);for(const[i,o]of Object.entries(t))n(i,o,!0);return r}const vN=Object.freeze(Object.defineProperty({__proto__:null,bitGet:mN,bitLen:yN,bitMask:Sy,bitSet:wN,bytesToHex:Wc,bytesToNumberBE:na,bytesToNumberLE:Iy,concatBytes:ol,createHmacDrbg:BA,ensureBytes:qn,equalBytes:pN,hexToBytes:Jc,hexToNumber:_y,numberToBytesBE:Yc,numberToBytesLE:xy,numberToHexUnpadded:TA,numberToVarBytesBE:dN,utf8ToBytes:gN,validateObject:Nl},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ur=BigInt(0),Gt=BigInt(1),Do=BigInt(2),EN=BigInt(3),I0=BigInt(4),Cb=BigInt(5),Nb=BigInt(8);BigInt(9);BigInt(16);function Qr(r,e){const t=r%e;return t>=ur?t:e+t}function AN(r,e,t){if(t<=ur||e<ur)throw new Error("Expected power/modulo > 0");if(t===Gt)return ur;let n=Gt;for(;e>ur;)e&Gt&&(n=n*r%t),r=r*r%t,e>>=Gt;return n}function In(r,e,t){let n=r;for(;e-- >ur;)n*=n,n%=t;return n}function x0(r,e){if(r===ur||e<=ur)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Qr(r,e),n=e,i=ur,o=Gt;for(;t!==ur;){const u=n/t,l=n%t,f=i-o*u;n=t,t=l,i=o,o=f}if(n!==Gt)throw new Error("invert: does not exist");return Qr(i,e)}function _N(r){const e=(r-Gt)/Do;let t,n,i;for(t=r-Gt,n=0;t%Do===ur;t/=Do,n++);for(i=Do;i<r&&AN(i,e,r)!==r-Gt;i++);if(n===1){const c=(r+Gt)/I0;return function(l,f){const d=l.pow(f,c);if(!l.eql(l.sqr(d),f))throw new Error("Cannot find square root");return d}}const o=(t+Gt)/Do;return function(u,l){if(u.pow(l,e)===u.neg(u.ONE))throw new Error("Cannot find square root");let f=n,d=u.pow(u.mul(u.ONE,i),t),g=u.pow(l,o),m=u.pow(l,t);for(;!u.eql(m,u.ONE);){if(u.eql(m,u.ZERO))return u.ZERO;let b=1;for(let x=u.sqr(m);b<f&&!u.eql(x,u.ONE);b++)x=u.sqr(x);const I=u.pow(d,Gt<<BigInt(f-b-1));d=u.sqr(I),g=u.mul(g,I),m=u.mul(m,d),f=b}return g}}function IN(r){if(r%I0===EN){const e=(r+Gt)/I0;return function(n,i){const o=n.pow(i,e);if(!n.eql(n.sqr(o),i))throw new Error("Cannot find square root");return o}}if(r%Nb===Cb){const e=(r-Cb)/Nb;return function(n,i){const o=n.mul(i,Do),c=n.pow(o,e),u=n.mul(i,c),l=n.mul(n.mul(u,Do),c),f=n.mul(u,n.sub(l,n.ONE));if(!n.eql(n.sqr(f),i))throw new Error("Cannot find square root");return f}}return _N(r)}const xN=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SN(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=xN.reduce((n,i)=>(n[i]="function",n),e);return Nl(r,t)}function PN(r,e,t){if(t<ur)throw new Error("Expected power > 0");if(t===ur)return r.ONE;if(t===Gt)return e;let n=r.ONE,i=e;for(;t>ur;)t&Gt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=Gt;return n}function DN(r,e){const t=new Array(e.length),n=e.reduce((o,c,u)=>r.is0(c)?o:(t[u]=o,r.mul(o,c)),r.ONE),i=r.inv(n);return e.reduceRight((o,c,u)=>r.is0(c)?o:(t[u]=r.mul(o,t[u]),r.mul(o,c)),i),t}function UA(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function ON(r,e,t=!1,n={}){if(r<=ur)throw new Error(`Expected Field ORDER > 0, got ${r}`);const{nBitLength:i,nByteLength:o}=UA(r,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const c=IN(r),u=Object.freeze({ORDER:r,BITS:i,BYTES:o,MASK:Sy(i),ZERO:ur,ONE:Gt,create:l=>Qr(l,r),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return ur<=l&&l<r},is0:l=>l===ur,isOdd:l=>(l&Gt)===Gt,neg:l=>Qr(-l,r),eql:(l,f)=>l===f,sqr:l=>Qr(l*l,r),add:(l,f)=>Qr(l+f,r),sub:(l,f)=>Qr(l-f,r),mul:(l,f)=>Qr(l*f,r),pow:(l,f)=>PN(u,l,f),div:(l,f)=>Qr(l*x0(f,r),r),sqrN:l=>l*l,addN:(l,f)=>l+f,subN:(l,f)=>l-f,mulN:(l,f)=>l*f,inv:l=>x0(l,r),sqrt:n.sqrt||(l=>c(u,l)),invertBatch:l=>DN(u,l),cmov:(l,f,d)=>d?f:l,toBytes:l=>t?xy(l,o):Yc(l,o),fromBytes:l=>{if(l.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${l.length}`);return t?Iy(l):na(l)}});return Object.freeze(u)}function FA(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const e=r.toString(2).length;return Math.ceil(e/8)}function LA(r){const e=FA(r);return e+Math.ceil(e/2)}function CN(r,e,t=!1){const n=r.length,i=FA(e),o=LA(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const c=t?na(r):Iy(r),u=Qr(c,e-Gt)+Gt;return t?xy(u,i):Yc(u,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const NN=BigInt(0),yg=BigInt(1);function RN(r,e){const t=(i,o)=>{const c=o.negate();return i?c:o},n=i=>{const o=Math.ceil(e/i)+1,c=2**(i-1);return{windows:o,windowSize:c}};return{constTimeNegate:t,unsafeLadder(i,o){let c=r.ZERO,u=i;for(;o>NN;)o&yg&&(c=c.add(u)),u=u.double(),o>>=yg;return c},precomputeWindow(i,o){const{windows:c,windowSize:u}=n(o),l=[];let f=i,d=f;for(let g=0;g<c;g++){d=f,l.push(d);for(let m=1;m<u;m++)d=d.add(f),l.push(d);f=d.double()}return l},wNAF(i,o,c){const{windows:u,windowSize:l}=n(i);let f=r.ZERO,d=r.BASE;const g=BigInt(2**i-1),m=2**i,b=BigInt(i);for(let I=0;I<u;I++){const x=I*l;let B=Number(c&g);c>>=b,B>l&&(B-=m,c+=yg);const M=x,R=x+Math.abs(B)-1,C=I%2!==0,S=B<0;B===0?d=d.add(t(C,o[M])):f=f.add(t(S,o[R]))}return{p:f,f:d}},wNAFCached(i,o,c,u){const l=i._WINDOW_SIZE||1;let f=o.get(i);return f||(f=this.precomputeWindow(i,l),l!==1&&o.set(i,u(f))),this.wNAF(l,f,c)}}}function MA(r){return SN(r.Fp),Nl(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...UA(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TN(r){const e=MA(r);Nl(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:i}=e;if(t){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:BN,hexToBytes:UN}=vN,To={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){const{Err:e}=To;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");const t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:BN(n),l:r.subarray(t+2)}},toSig(r){const{Err:e}=To,t=typeof r=="string"?UN(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");const{d:i,l:o}=To._parseInt(t.subarray(2)),{d:c,l:u}=To._parseInt(o);if(u.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:c}},hexFromSig(r){const e=f=>Number.parseInt(f[0],16)&8?"00"+f:f,t=f=>{const d=f.toString(16);return d.length&1?`0${d}`:d},n=e(t(r.s)),i=e(t(r.r)),o=n.length/2,c=i.length/2,u=t(o),l=t(c);return`30${t(c+o+4)}02${l}${i}02${u}${n}`}},os=BigInt(0),Tn=BigInt(1);BigInt(2);const Rb=BigInt(3);BigInt(4);function FN(r){const e=TN(r),{Fp:t}=e,n=e.toBytes||((I,x,B)=>{const M=x.toAffine();return ol(Uint8Array.from([4]),t.toBytes(M.x),t.toBytes(M.y))}),i=e.fromBytes||(I=>{const x=I.subarray(1),B=t.fromBytes(x.subarray(0,t.BYTES)),M=t.fromBytes(x.subarray(t.BYTES,2*t.BYTES));return{x:B,y:M}});function o(I){const{a:x,b:B}=e,M=t.sqr(I),R=t.mul(M,I);return t.add(t.add(R,t.mul(I,x)),B)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function c(I){return typeof I=="bigint"&&os<I&&I<e.n}function u(I){if(!c(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(I){const{allowedPrivateKeyLengths:x,nByteLength:B,wrapPrivateKey:M,n:R}=e;if(x&&typeof I!="bigint"){if(I instanceof Uint8Array&&(I=Wc(I)),typeof I!="string"||!x.includes(I.length))throw new Error("Invalid key");I=I.padStart(B*2,"0")}let C;try{C=typeof I=="bigint"?I:na(qn("private key",I,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof I}`)}return M&&(C=Qr(C,R)),u(C),C}const f=new Map;function d(I){if(!(I instanceof g))throw new Error("ProjectivePoint expected")}class g{constructor(x,B,M){if(this.px=x,this.py=B,this.pz=M,x==null||!t.isValid(x))throw new Error("x required");if(B==null||!t.isValid(B))throw new Error("y required");if(M==null||!t.isValid(M))throw new Error("z required")}static fromAffine(x){const{x:B,y:M}=x||{};if(!x||!t.isValid(B)||!t.isValid(M))throw new Error("invalid affine point");if(x instanceof g)throw new Error("projective point not allowed");const R=C=>t.eql(C,t.ZERO);return R(B)&&R(M)?g.ZERO:new g(B,M,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(x){const B=t.invertBatch(x.map(M=>M.pz));return x.map((M,R)=>M.toAffine(B[R])).map(g.fromAffine)}static fromHex(x){const B=g.fromAffine(i(qn("pointHex",x)));return B.assertValidity(),B}static fromPrivateKey(x){return g.BASE.multiply(l(x))}_setWindowSize(x){this._WINDOW_SIZE=x,f.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x,y:B}=this.toAffine();if(!t.isValid(x)||!t.isValid(B))throw new Error("bad point: x or y not FE");const M=t.sqr(B),R=o(x);if(!t.eql(M,R))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:x}=this.toAffine();if(t.isOdd)return!t.isOdd(x);throw new Error("Field doesn't support isOdd")}equals(x){d(x);const{px:B,py:M,pz:R}=this,{px:C,py:S,pz:D}=x,E=t.eql(t.mul(B,D),t.mul(C,R)),p=t.eql(t.mul(M,D),t.mul(S,R));return E&&p}negate(){return new g(this.px,t.neg(this.py),this.pz)}double(){const{a:x,b:B}=e,M=t.mul(B,Rb),{px:R,py:C,pz:S}=this;let D=t.ZERO,E=t.ZERO,p=t.ZERO,_=t.mul(R,R),$=t.mul(C,C),q=t.mul(S,S),Z=t.mul(R,C);return Z=t.add(Z,Z),p=t.mul(R,S),p=t.add(p,p),D=t.mul(x,p),E=t.mul(M,q),E=t.add(D,E),D=t.sub($,E),E=t.add($,E),E=t.mul(D,E),D=t.mul(Z,D),p=t.mul(M,p),q=t.mul(x,q),Z=t.sub(_,q),Z=t.mul(x,Z),Z=t.add(Z,p),p=t.add(_,_),_=t.add(p,_),_=t.add(_,q),_=t.mul(_,Z),E=t.add(E,_),q=t.mul(C,S),q=t.add(q,q),_=t.mul(q,Z),D=t.sub(D,_),p=t.mul(q,$),p=t.add(p,p),p=t.add(p,p),new g(D,E,p)}add(x){d(x);const{px:B,py:M,pz:R}=this,{px:C,py:S,pz:D}=x;let E=t.ZERO,p=t.ZERO,_=t.ZERO;const $=e.a,q=t.mul(e.b,Rb);let Z=t.mul(B,C),oe=t.mul(M,S),fe=t.mul(R,D),re=t.add(B,M),v=t.add(C,S);re=t.mul(re,v),v=t.add(Z,oe),re=t.sub(re,v),v=t.add(B,R);let w=t.add(C,D);return v=t.mul(v,w),w=t.add(Z,fe),v=t.sub(v,w),w=t.add(M,R),E=t.add(S,D),w=t.mul(w,E),E=t.add(oe,fe),w=t.sub(w,E),_=t.mul($,v),E=t.mul(q,fe),_=t.add(E,_),E=t.sub(oe,_),_=t.add(oe,_),p=t.mul(E,_),oe=t.add(Z,Z),oe=t.add(oe,Z),fe=t.mul($,fe),v=t.mul(q,v),oe=t.add(oe,fe),fe=t.sub(Z,fe),fe=t.mul($,fe),v=t.add(v,fe),Z=t.mul(oe,v),p=t.add(p,Z),Z=t.mul(w,v),E=t.mul(re,E),E=t.sub(E,Z),Z=t.mul(re,oe),_=t.mul(w,_),_=t.add(_,Z),new g(E,p,_)}subtract(x){return this.add(x.negate())}is0(){return this.equals(g.ZERO)}wNAF(x){return b.wNAFCached(this,f,x,B=>{const M=t.invertBatch(B.map(R=>R.pz));return B.map((R,C)=>R.toAffine(M[C])).map(g.fromAffine)})}multiplyUnsafe(x){const B=g.ZERO;if(x===os)return B;if(u(x),x===Tn)return this;const{endo:M}=e;if(!M)return b.unsafeLadder(this,x);let{k1neg:R,k1:C,k2neg:S,k2:D}=M.splitScalar(x),E=B,p=B,_=this;for(;C>os||D>os;)C&Tn&&(E=E.add(_)),D&Tn&&(p=p.add(_)),_=_.double(),C>>=Tn,D>>=Tn;return R&&(E=E.negate()),S&&(p=p.negate()),p=new g(t.mul(p.px,M.beta),p.py,p.pz),E.add(p)}multiply(x){u(x);let B=x,M,R;const{endo:C}=e;if(C){const{k1neg:S,k1:D,k2neg:E,k2:p}=C.splitScalar(B);let{p:_,f:$}=this.wNAF(D),{p:q,f:Z}=this.wNAF(p);_=b.constTimeNegate(S,_),q=b.constTimeNegate(E,q),q=new g(t.mul(q.px,C.beta),q.py,q.pz),M=_.add(q),R=$.add(Z)}else{const{p:S,f:D}=this.wNAF(B);M=S,R=D}return g.normalizeZ([M,R])[0]}multiplyAndAddUnsafe(x,B,M){const R=g.BASE,C=(D,E)=>E===os||E===Tn||!D.equals(R)?D.multiplyUnsafe(E):D.multiply(E),S=C(this,B).add(C(x,M));return S.is0()?void 0:S}toAffine(x){const{px:B,py:M,pz:R}=this,C=this.is0();x==null&&(x=C?t.ONE:t.inv(R));const S=t.mul(B,x),D=t.mul(M,x),E=t.mul(R,x);if(C)return{x:t.ZERO,y:t.ZERO};if(!t.eql(E,t.ONE))throw new Error("invZ was invalid");return{x:S,y:D}}isTorsionFree(){const{h:x,isTorsionFree:B}=e;if(x===Tn)return!0;if(B)return B(g,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:x,clearCofactor:B}=e;return x===Tn?this:B?B(g,this):this.multiplyUnsafe(e.h)}toRawBytes(x=!0){return this.assertValidity(),n(g,this,x)}toHex(x=!0){return Wc(this.toRawBytes(x))}}g.BASE=new g(e.Gx,e.Gy,t.ONE),g.ZERO=new g(t.ZERO,t.ONE,t.ZERO);const m=e.nBitLength,b=RN(g,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:g,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:c}}function LN(r){const e=MA(r);return Nl(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function MN(r){const e=LN(r),{Fp:t,n}=e,i=t.BYTES+1,o=2*t.BYTES+1;function c(v){return os<v&&v<t.ORDER}function u(v){return Qr(v,n)}function l(v){return x0(v,n)}const{ProjectivePoint:f,normPrivateKeyToScalar:d,weierstrassEquation:g,isWithinCurveOrder:m}=FN({...e,toBytes(v,w,T){const H=w.toAffine(),Y=t.toBytes(H.x),K=ol;return T?K(Uint8Array.from([w.hasEvenY()?2:3]),Y):K(Uint8Array.from([4]),Y,t.toBytes(H.y))},fromBytes(v){const w=v.length,T=v[0],H=v.subarray(1);if(w===i&&(T===2||T===3)){const Y=na(H);if(!c(Y))throw new Error("Point is not on curve");const K=g(Y);let ue=t.sqrt(K);const he=(ue&Tn)===Tn;return(T&1)===1!==he&&(ue=t.neg(ue)),{x:Y,y:ue}}else if(w===o&&T===4){const Y=t.fromBytes(H.subarray(0,t.BYTES)),K=t.fromBytes(H.subarray(t.BYTES,2*t.BYTES));return{x:Y,y:K}}else throw new Error(`Point of length ${w} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}}),b=v=>Wc(Yc(v,e.nByteLength));function I(v){const w=n>>Tn;return v>w}function x(v){return I(v)?u(-v):v}const B=(v,w,T)=>na(v.slice(w,T));class M{constructor(w,T,H){this.r=w,this.s=T,this.recovery=H,this.assertValidity()}static fromCompact(w){const T=e.nByteLength;return w=qn("compactSignature",w,T*2),new M(B(w,0,T),B(w,T,2*T))}static fromDER(w){const{r:T,s:H}=To.toSig(qn("DER",w));return new M(T,H)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new M(this.r,this.s,w)}recoverPublicKey(w){const{r:T,s:H,recovery:Y}=this,K=p(qn("msgHash",w));if(Y==null||![0,1,2,3].includes(Y))throw new Error("recovery id invalid");const ue=Y===2||Y===3?T+e.n:T;if(ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const he=(Y&1)===0?"02":"03",X=f.fromHex(he+b(ue)),ne=l(ue),ee=u(-K*ne),me=u(H*ne),Se=f.BASE.multiplyAndAddUnsafe(X,ee,me);if(!Se)throw new Error("point at infinify");return Se.assertValidity(),Se}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new M(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Jc(this.toDERHex())}toDERHex(){return To.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Jc(this.toCompactHex())}toCompactHex(){return b(this.r)+b(this.s)}}const R={isValidPrivateKey(v){try{return d(v),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const v=LA(e.n);return CN(e.randomBytes(v),e.n)},precompute(v=8,w=f.BASE){return w._setWindowSize(v),w.multiply(BigInt(3)),w}};function C(v,w=!0){return f.fromPrivateKey(v).toRawBytes(w)}function S(v){const w=v instanceof Uint8Array,T=typeof v=="string",H=(w||T)&&v.length;return w?H===i||H===o:T?H===2*i||H===2*o:v instanceof f}function D(v,w,T=!0){if(S(v))throw new Error("first arg must be private key");if(!S(w))throw new Error("second arg must be public key");return f.fromHex(w).multiply(d(v)).toRawBytes(T)}const E=e.bits2int||function(v){const w=na(v),T=v.length*8-e.nBitLength;return T>0?w>>BigInt(T):w},p=e.bits2int_modN||function(v){return u(E(v))},_=Sy(e.nBitLength);function $(v){if(typeof v!="bigint")throw new Error("bigint expected");if(!(os<=v&&v<_))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Yc(v,e.nByteLength)}function q(v,w,T=Z){if(["recovered","canonical"].some(Ie=>Ie in T))throw new Error("sign() legacy options not supported");const{hash:H,randomBytes:Y}=e;let{lowS:K,prehash:ue,extraEntropy:he}=T;K==null&&(K=!0),v=qn("msgHash",v),ue&&(v=qn("prehashed msgHash",H(v)));const X=p(v),ne=d(w),ee=[$(ne),$(X)];if(he!=null){const Ie=he===!0?Y(t.BYTES):he;ee.push(qn("extraEntropy",Ie))}const me=ol(...ee),Se=X;function _e(Ie){const Ne=E(Ie);if(!m(Ne))return;const Te=l(Ne),Re=f.BASE.multiply(Ne).toAffine(),Be=u(Re.x);if(Be===os)return;const tt=u(Te*u(Se+Be*ne));if(tt===os)return;let Yt=(Re.x===Be?0:2)|Number(Re.y&Tn),Lr=tt;return K&&I(tt)&&(Lr=x(tt),Yt^=1),new M(Be,Lr,Yt)}return{seed:me,k2sig:_e}}const Z={lowS:e.lowS,prehash:!1},oe={lowS:e.lowS,prehash:!1};function fe(v,w,T=Z){const{seed:H,k2sig:Y}=q(v,w,T),K=e;return BA(K.hash.outputLen,K.nByteLength,K.hmac)(H,Y)}f.BASE._setWindowSize(8);function re(v,w,T,H=oe){var Re;const Y=v;if(w=qn("msgHash",w),T=qn("publicKey",T),"strict"in H)throw new Error("options.strict was renamed to lowS");const{lowS:K,prehash:ue}=H;let he,X;try{if(typeof Y=="string"||Y instanceof Uint8Array)try{he=M.fromDER(Y)}catch(Be){if(!(Be instanceof To.Err))throw Be;he=M.fromCompact(Y)}else if(typeof Y=="object"&&typeof Y.r=="bigint"&&typeof Y.s=="bigint"){const{r:Be,s:tt}=Y;he=new M(Be,tt)}else throw new Error("PARSE");X=f.fromHex(T)}catch(Be){if(Be.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(K&&he.hasHighS())return!1;ue&&(w=e.hash(w));const{r:ne,s:ee}=he,me=p(w),Se=l(ee),_e=u(me*Se),Ie=u(ne*Se),Ne=(Re=f.BASE.multiplyAndAddUnsafe(X,_e,Ie))==null?void 0:Re.toAffine();return Ne?u(Ne.x)===ne:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:D,sign:fe,verify:re,ProjectivePoint:f,Signature:M,utils:R}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function kN(r){return{hash:r,hmac:(e,...t)=>pA(r,e,SC(...t)),randomBytes:PC}}function $N(r,e){const t=n=>MN({...r,...kN(n)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kA=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Tb=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jN=BigInt(1),S0=BigInt(2),Bb=(r,e)=>(r+e/S0)/e;function HN(r){const e=kA,t=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),c=BigInt(23),u=BigInt(44),l=BigInt(88),f=r*r*r%e,d=f*f*r%e,g=In(d,t,e)*d%e,m=In(g,t,e)*d%e,b=In(m,S0,e)*f%e,I=In(b,i,e)*b%e,x=In(I,o,e)*I%e,B=In(x,u,e)*x%e,M=In(B,l,e)*B%e,R=In(M,u,e)*x%e,C=In(R,t,e)*d%e,S=In(C,c,e)*I%e,D=In(S,n,e)*f%e,E=In(D,S0,e);if(!P0.eql(P0.sqr(E),r))throw new Error("Cannot find square root");return E}const P0=ON(kA,void 0,void 0,{sqrt:HN}),Ns=$N({a:BigInt(0),b:BigInt(7),Fp:P0,n:Tb,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{const e=Tb,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-jN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,c=BigInt("0x100000000000000000000000000000000"),u=Bb(o*r,e),l=Bb(-n*r,e);let f=Qr(r-u*t-l*i,e),d=Qr(-u*n-l*o,e);const g=f>c,m=d>c;if(g&&(f=e-f),m&&(d=e-d),f>c||d>c)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:g,k1:f,k2neg:m,k2:d}}}},yA);BigInt(0);Ns.ProjectivePoint;const al="0x0000000000000000000000000000000000000000",Ub="0x0000000000000000000000000000000000000000000000000000000000000000",Fb=BigInt(0),Lb=BigInt(1),Mb=BigInt(2),kb=BigInt(27),$b=BigInt(28),nf=BigInt(35),ja={};function jb(r){return ls(tr(r),32)}var pc,gc,yc,Vo;const Gn=class Gn{constructor(e,t,n,i){J(this,pc);J(this,gc);J(this,yc);J(this,Vo);ld(e,ja,"Signature"),F(this,pc,t),F(this,gc,n),F(this,yc,i),F(this,Vo,null)}get r(){return P(this,pc)}set r(e){j(tc(e)===32,"invalid r","value",e),F(this,pc,ye(e))}get s(){return P(this,gc)}set s(e){j(tc(e)===32,"invalid s","value",e);const t=ye(e);j(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),F(this,gc,t)}get v(){return P(this,yc)}set v(e){const t=Ve(e,"value");j(t===27||t===28,"invalid v","v",e),F(this,yc,t)}get networkV(){return P(this,Vo)}get legacyChainId(){const e=this.networkV;return e==null?null:Gn.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Ge(this.s);return this.yParity&&(e[0]|=128),ye(e)}get compactSerialized(){return Mt([this.r,this.yParityAndS])}get serialized(){return Mt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new Gn(ja,this.r,this.s,this.v);return this.networkV&&F(e,Vo,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){const t=Ee(e,"v");return t==kb||t==$b?Fb:(j(t>=nf,"invalid EIP-155 v","v",e),(t-nf)/Mb)}static getChainIdV(e,t){return Ee(e)*Mb+BigInt(35+t-27)}static getNormalizedV(e){const t=Ee(e);return t===Fb||t===kb?27:t===Lb||t===$b?28:(j(t>=nf,"invalid v","v",e),t&Lb?27:28)}static from(e){function t(f,d){j(f,d,"signature",e)}if(e==null)return new Gn(ja,Ub,Ub,27);if(typeof e=="string"){const f=Ge(e,"signature");if(f.length===64){const d=ye(f.slice(0,32)),g=f.slice(32,64),m=g[0]&128?28:27;return g[0]&=127,new Gn(ja,d,ye(g),m)}if(f.length===65){const d=ye(f.slice(0,32)),g=f.slice(32,64);t((g[0]&128)===0,"non-canonical s");const m=Gn.getNormalizedV(f[64]);return new Gn(ja,d,ye(g),m)}t(!1,"invalid raw signature length")}if(e instanceof Gn)return e.clone();const n=e.r;t(n!=null,"missing r");const i=jb(n),o=function(f,d){if(f!=null)return jb(f);if(d!=null){t(vt(d,32),"invalid yParityAndS");const g=Ge(d);return g[0]&=127,ye(g)}t(!1,"missing s")}(e.s,e.yParityAndS);t((Ge(o)[0]&128)==0,"non-canonical s");const{networkV:c,v:u}=function(f,d,g){if(f!=null){const m=Ee(f);return{networkV:m>=nf?m:void 0,v:Gn.getNormalizedV(m)}}if(d!=null)return t(vt(d,32),"invalid yParityAndS"),{v:Ge(d)[0]&128?28:27};if(g!=null){switch(Ve(g,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),l=new Gn(ja,i,o,u);return c&&F(l,Vo,c),t(e.yParity==null||Ve(e.yParity,"sig.yParity")===l.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===l.yParityAndS,"yParityAndS mismatch"),l}};pc=new WeakMap,gc=new WeakMap,yc=new WeakMap,Vo=new WeakMap;let Yr=Gn;var Zi;const Co=class Co{constructor(e){J(this,Zi);j(tc(e)===32,"invalid private key","privateKey","[REDACTED]"),F(this,Zi,ye(e))}get privateKey(){return P(this,Zi)}get publicKey(){return Co.computePublicKey(P(this,Zi))}get compressedPublicKey(){return Co.computePublicKey(P(this,Zi),!0)}sign(e){j(tc(e)===32,"invalid digest length","digest",e);const t=Ns.sign(Nr(e),Nr(P(this,Zi)),{lowS:!0});return Yr.from({r:Zs(t.r,32),s:Zs(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Co.computePublicKey(e);return ye(Ns.getSharedSecret(Nr(P(this,Zi)),Ge(t),!1))}static computePublicKey(e,t){let n=Ge(e,"key");if(n.length===32){const o=Ns.getPublicKey(n,!!t);return ye(o)}if(n.length===64){const o=new Uint8Array(65);o[0]=4,o.set(n,1),n=o}const i=Ns.ProjectivePoint.fromHex(n);return ye(i.toRawBytes(t))}static recoverPublicKey(e,t){j(tc(e)===32,"invalid digest length","digest",e);const n=Yr.from(t);let i=Ns.Signature.fromCompact(Nr(Mt([n.r,n.s])));i=i.addRecoveryBit(n.yParity);const o=i.recoverPublicKey(Nr(e));return j(o!=null,"invalid signature for digest","signature",t),"0x"+o.toHex(!1)}static addPoints(e,t,n){const i=Ns.ProjectivePoint.fromHex(Co.computePublicKey(e).substring(2)),o=Ns.ProjectivePoint.fromHex(Co.computePublicKey(t).substring(2));return"0x"+i.add(o).toHex(!!n)}};Zi=new WeakMap;let cl=Co;const zN=BigInt(0),GN=BigInt(36);function Hb(r){r=r.toLowerCase();const e=r.substring(2).split(""),t=new Uint8Array(40);for(let i=0;i<40;i++)t[i]=e[i].charCodeAt(0);const n=Ge(Jt(t));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Py={};for(let r=0;r<10;r++)Py[String(r)]=String(r);for(let r=0;r<26;r++)Py[String.fromCharCode(65+r)]=String(10+r);const zb=15;function qN(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>Py[n]).join("");for(;e.length>=zb;){let n=e.substring(0,zb);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const VN=function(){const r={};for(let e=0;e<36;e++){const t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function KN(r){r=r.toLowerCase();let e=zN;for(let t=0;t<r.length;t++)e=e*GN+VN[r[t]];return e}function st(r){if(j(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);const e=Hb(r);return j(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){j(r.substring(2,4)===qN(r),"bad icap checksum","address",r);let e=KN(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Hb("0x"+e)}j(!1,"invalid address","address",r)}function QN(r){const e=st(r.from);let n=Ee(r.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,st(Ft(Jt(eo([e,n])),12))}function $A(r){return r&&typeof r.getAddress=="function"}async function mg(r,e){const t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(le(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),j(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),st(t)}function Br(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?st(r):(le(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),mg(r,e.resolveName(r)));if($A(r))return mg(r,r.getAddress());if(r&&typeof r.then=="function")return mg(r,r);j(!1,"unsupported addressable value","target",r)}const qi={};function ve(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new Ir(qi,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function rt(r,e){return new Ir(qi,`bytes${e||""}`,r,{size:e})}const Gb=Symbol.for("_ethers_typed");var Ko;const Ki=class Ki{constructor(e,t,n,i){Q(this,"type");Q(this,"value");J(this,Ko);Q(this,"_typedSymbol");i==null&&(i=null),ld(qi,e,"Typed"),Ce(this,{_typedSymbol:Gb,type:t,value:n}),F(this,Ko,i),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return P(this,Ko)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return P(this,Ko)===!0?-1:P(this,Ko)===!1?this.value.length:null}static from(e,t){return new Ki(qi,e,t)}static uint8(e){return ve(e,8)}static uint16(e){return ve(e,16)}static uint24(e){return ve(e,24)}static uint32(e){return ve(e,32)}static uint40(e){return ve(e,40)}static uint48(e){return ve(e,48)}static uint56(e){return ve(e,56)}static uint64(e){return ve(e,64)}static uint72(e){return ve(e,72)}static uint80(e){return ve(e,80)}static uint88(e){return ve(e,88)}static uint96(e){return ve(e,96)}static uint104(e){return ve(e,104)}static uint112(e){return ve(e,112)}static uint120(e){return ve(e,120)}static uint128(e){return ve(e,128)}static uint136(e){return ve(e,136)}static uint144(e){return ve(e,144)}static uint152(e){return ve(e,152)}static uint160(e){return ve(e,160)}static uint168(e){return ve(e,168)}static uint176(e){return ve(e,176)}static uint184(e){return ve(e,184)}static uint192(e){return ve(e,192)}static uint200(e){return ve(e,200)}static uint208(e){return ve(e,208)}static uint216(e){return ve(e,216)}static uint224(e){return ve(e,224)}static uint232(e){return ve(e,232)}static uint240(e){return ve(e,240)}static uint248(e){return ve(e,248)}static uint256(e){return ve(e,256)}static uint(e){return ve(e,256)}static int8(e){return ve(e,-8)}static int16(e){return ve(e,-16)}static int24(e){return ve(e,-24)}static int32(e){return ve(e,-32)}static int40(e){return ve(e,-40)}static int48(e){return ve(e,-48)}static int56(e){return ve(e,-56)}static int64(e){return ve(e,-64)}static int72(e){return ve(e,-72)}static int80(e){return ve(e,-80)}static int88(e){return ve(e,-88)}static int96(e){return ve(e,-96)}static int104(e){return ve(e,-104)}static int112(e){return ve(e,-112)}static int120(e){return ve(e,-120)}static int128(e){return ve(e,-128)}static int136(e){return ve(e,-136)}static int144(e){return ve(e,-144)}static int152(e){return ve(e,-152)}static int160(e){return ve(e,-160)}static int168(e){return ve(e,-168)}static int176(e){return ve(e,-176)}static int184(e){return ve(e,-184)}static int192(e){return ve(e,-192)}static int200(e){return ve(e,-200)}static int208(e){return ve(e,-208)}static int216(e){return ve(e,-216)}static int224(e){return ve(e,-224)}static int232(e){return ve(e,-232)}static int240(e){return ve(e,-240)}static int248(e){return ve(e,-248)}static int256(e){return ve(e,-256)}static int(e){return ve(e,-256)}static bytes1(e){return rt(e,1)}static bytes2(e){return rt(e,2)}static bytes3(e){return rt(e,3)}static bytes4(e){return rt(e,4)}static bytes5(e){return rt(e,5)}static bytes6(e){return rt(e,6)}static bytes7(e){return rt(e,7)}static bytes8(e){return rt(e,8)}static bytes9(e){return rt(e,9)}static bytes10(e){return rt(e,10)}static bytes11(e){return rt(e,11)}static bytes12(e){return rt(e,12)}static bytes13(e){return rt(e,13)}static bytes14(e){return rt(e,14)}static bytes15(e){return rt(e,15)}static bytes16(e){return rt(e,16)}static bytes17(e){return rt(e,17)}static bytes18(e){return rt(e,18)}static bytes19(e){return rt(e,19)}static bytes20(e){return rt(e,20)}static bytes21(e){return rt(e,21)}static bytes22(e){return rt(e,22)}static bytes23(e){return rt(e,23)}static bytes24(e){return rt(e,24)}static bytes25(e){return rt(e,25)}static bytes26(e){return rt(e,26)}static bytes27(e){return rt(e,27)}static bytes28(e){return rt(e,28)}static bytes29(e){return rt(e,29)}static bytes30(e){return rt(e,30)}static bytes31(e){return rt(e,31)}static bytes32(e){return rt(e,32)}static address(e){return new Ki(qi,"address",e)}static bool(e){return new Ki(qi,"bool",!!e)}static bytes(e){return new Ki(qi,"bytes",e)}static string(e){return new Ki(qi,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Ki(qi,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===Gb}static dereference(e,t){if(Ki.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Ko=new WeakMap;let Ir=Ki;class WN extends fs{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=Ir.dereference(t,"string");try{n=st(n)}catch(i){return this._throwError(i.message,t)}return e.writeValue(n)}decode(e){return st(Zs(e.readValue(),20))}}class JN extends fs{constructor(t){super(t.name,t.type,"_",t.dynamic);Q(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}}function jA(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let l={};n=e.map(f=>{const d=f.localName;return le(d,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:t}),le(!l[d],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:f},value:t}),l[d]=!0,t[d]})}else j(!1,"invalid tuple value","tuple",t);j(e.length===n.length,"types/value length mismatch","tuple",t);let i=new v0,o=new v0,c=[];e.forEach((l,f)=>{let d=n[f];if(l.dynamic){let g=o.length;l.encode(o,d);let m=i.writeUpdatableValue();c.push(b=>{m(b+g)})}else l.encode(i,d)}),c.forEach(l=>{l(i.length)});let u=r.appendWriter(i);return u+=r.appendWriter(o),u}function HA(r,e){let t=[],n=[],i=r.subReader(0);return e.forEach(o=>{let c=null;if(o.dynamic){let u=r.readIndex(),l=i.subReader(u);try{c=o.decode(l)}catch(f){if(pr(f,"BUFFER_OVERRUN"))throw f;c=f,c.baseType=o.name,c.name=o.localName,c.type=o.type}}else try{c=o.decode(r)}catch(u){if(pr(u,"BUFFER_OVERRUN"))throw u;c=u,c.baseType=o.name,c.name=o.localName,c.type=o.type}if(c==null)throw new Error("investigate");t.push(c),n.push(o.localName||null)}),Kc.fromItems(t,n)}class YN extends fs{constructor(t,n,i){const o=t.type+"["+(n>=0?n:"")+"]",c=n===-1||t.dynamic;super("array",o,i,c);Q(this,"coder");Q(this,"length");Ce(this,{coder:t,length:n})}defaultValue(){const t=this.coder.defaultValue(),n=[];for(let i=0;i<this.length;i++)n.push(t);return n}encode(t,n){const i=Ir.dereference(n,"array");Array.isArray(i)||this._throwError("expected array value",i);let o=this.length;o===-1&&(o=i.length,t.writeValue(i.length)),YE(i.length,o,"coder array"+(this.localName?" "+this.localName:""));let c=[];for(let u=0;u<i.length;u++)c.push(this.coder);return jA(t,c,i)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),le(n*Tr<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*Tr,length:t.dataLength}));let i=[];for(let o=0;o<n;o++)i.push(new JN(this.coder));return HA(t,i)}}class ZN extends fs{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=Ir.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class zA extends fs{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=Nr(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class XN extends zA{constructor(e){super("bytes",e)}decode(e){return ye(super.decode(e))}}class eR extends fs{constructor(t,n){let i="bytes"+String(t);super(i,i,n,!1);Q(this,"size");Ce(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let i=Nr(Ir.dereference(n,this.type));return i.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(i)}decode(t){return ye(t.readBytes(this.size))}}const tR=new Uint8Array([]);class rR extends fs{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(tR)}decode(e){return e.readBytes(0),null}}const nR=BigInt(0),iR=BigInt(1),sR=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class oR extends fs{constructor(t,n,i){const o=(n?"int":"uint")+t*8;super(o,o,i,!1);Q(this,"size");Q(this,"signed");Ce(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let i=Ee(Ir.dereference(n,this.type)),o=Qu(sR,Tr*8);if(this.signed){let c=Qu(o,this.size*8-1);(i>c||i<-(c+iR))&&this._throwError("value out-of-bounds",n),i=eA(i,8*Tr)}else(i<nR||i>Qu(o,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(i)}decode(t){let n=Qu(t.readValue(),this.size*8);return this.signed&&(n=nC(n,this.size*8)),n}}class aR extends zA{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,cs(Ir.dereference(t,"string")))}decode(e){return Mf(super.decode(e))}}class sf extends fs{constructor(t,n){let i=!1;const o=[];t.forEach(u=>{u.dynamic&&(i=!0),o.push(u.type)});const c="tuple("+o.join(",")+")";super("tuple",c,n,i);Q(this,"coders");Ce(this,{coders:Object.freeze(t.slice())})}defaultValue(){const t=[];this.coders.forEach(i=>{t.push(i.defaultValue())});const n=this.coders.reduce((i,o)=>{const c=o.localName;return c&&(i[c]||(i[c]=0),i[c]++),i},{});return this.coders.forEach((i,o)=>{let c=i.localName;!c||n[c]!==1||(c==="length"&&(c="_length"),t[c]==null&&(t[c]=t[o]))}),Object.freeze(t)}encode(t,n){const i=Ir.dereference(n,"tuple");return jA(t,this.coders,i)}decode(t){return HA(t,this.coders)}}function wg(r,e){return{address:st(r),storageKeys:e.map((t,n)=>(j(vt(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function ha(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(j(t.length===2,"invalid slot set",`value[${n}]`,t),wg(t[0],t[1])):(j(t!=null&&typeof t=="object","invalid address-slot set","value",r),wg(t.address,t.storageKeys)));j(r!=null&&typeof r=="object","invalid access list","value",r);const e=Object.keys(r).map(t=>{const n=r[t].reduce((i,o)=>(i[o]=!0,i),{});return wg(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function GA(r){return{address:st(r.address),nonce:Ee(r.nonce!=null?r.nonce:0),chainId:Ee(r.chainId!=null?r.chainId:0),signature:Yr.from(r.signature)}}function cR(r){let e;return typeof r=="string"?e=cl.computePublicKey(r,!1):e=r.publicKey,st(Jt("0x"+e.substring(4)).substring(26))}function uR(r,e){return cR(cl.recoverPublicKey(r,e))}const ar=BigInt(0),lR=BigInt(2),hR=BigInt(27),fR=BigInt(28),dR=BigInt(35),pR=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),bg=4096*32;function gR(r){return{blobToKzgCommitment:n=>{if("computeBlobProof"in r){if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return Ge(r.blobToKzgCommitment(ye(n)))}else if("blobToKzgCommitment"in r&&typeof r.blobToKzgCommitment=="function")return Ge(r.blobToKzgCommitment(n));if("blobToKZGCommitment"in r&&typeof r.blobToKZGCommitment=="function")return Ge(r.blobToKZGCommitment(ye(n)));j(!1,"unsupported KZG library","kzg",r)},computeBlobKzgProof:(n,i)=>{if("computeBlobProof"in r&&typeof r.computeBlobProof=="function")return Ge(r.computeBlobProof(ye(n),ye(i)));if("computeBlobKzgProof"in r&&typeof r.computeBlobKzgProof=="function")return r.computeBlobKzgProof(n,i);if("computeBlobKZGProof"in r&&typeof r.computeBlobKZGProof=="function")return Ge(r.computeBlobKZGProof(ye(n),ye(i)));j(!1,"unsupported KZG library","kzg",r)}}}function qb(r,e){let t=r.toString(16);for(;t.length<2;)t="0"+t;return t+=tu(e).substring(4),"0x"+t}function ru(r){return r==="0x"?null:st(r)}function yd(r,e){try{return ha(r)}catch(t){j(!1,t.message,e,r)}}function yR(r,e){try{if(!Array.isArray(r))throw new Error("authorizationList: invalid array");const t=[];for(let n=0;n<r.length;n++){const i=r[n];if(!Array.isArray(i))throw new Error(`authorization[${n}]: invalid array`);if(i.length!==6)throw new Error(`authorization[${n}]: wrong length`);if(!i[1])throw new Error(`authorization[${n}]: null address`);t.push({address:ru(i[1]),nonce:lt(i[2],"nonce"),chainId:lt(i[0],"chainId"),signature:Yr.from({yParity:fa(i[3],"yParity"),r:ls(i[4],32),s:ls(i[5],32)})})}return t}catch(t){j(!1,t.message,e,r)}}function fa(r,e){return r==="0x"?0:Ve(r,e)}function lt(r,e){if(r==="0x")return ar;const t=Ee(r,e);return j(t<=pR,"value exceeds uint size",e,t),t}function Ze(r,e){const t=Ee(r,"value"),n=tr(t);return j(n.length<=32,"value too large",`tx.${e}`,t),n}function md(r){return ha(r).map(e=>[e.address,e.storageKeys])}function mR(r){return r.map(e=>[Ze(e.chainId,"chainId"),e.address,Ze(e.nonce,"nonce"),Ze(e.signature.yParity,"yParity"),tr(e.signature.r),tr(e.signature.s)])}function wR(r,e){j(Array.isArray(r),`invalid ${e}`,"value",r);for(let t=0;t<r.length;t++)j(vt(r[t],32),"invalid ${ param } hash",`value[${t}]`,r[t]);return r}function bR(r){const e=Cl(r);j(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",r);const t={type:0,nonce:fa(e[0],"nonce"),gasPrice:lt(e[1],"gasPrice"),gasLimit:lt(e[2],"gasLimit"),to:ru(e[3]),value:lt(e[4],"value"),data:ye(e[5]),chainId:ar};if(e.length===6)return t;const n=lt(e[6],"v"),i=lt(e[7],"r"),o=lt(e[8],"s");if(i===ar&&o===ar)t.chainId=n;else{let c=(n-dR)/lR;c<ar&&(c=ar),t.chainId=c,j(c!==ar||n===hR||n===fR,"non-canonical legacy v","v",e[6]),t.signature=Yr.from({r:ls(e[7],32),s:ls(e[8],32),v:n})}return t}function vR(r,e){const t=[Ze(r.nonce,"nonce"),Ze(r.gasPrice||0,"gasPrice"),Ze(r.gasLimit,"gasLimit"),r.to||"0x",Ze(r.value,"value"),r.data];let n=ar;if(r.chainId!=ar)n=Ee(r.chainId,"tx.chainId"),j(!e||e.networkV==null||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(r.signature){const o=r.signature.legacyChainId;o!=null&&(n=o)}if(!e)return n!==ar&&(t.push(tr(n)),t.push("0x"),t.push("0x")),eo(t);let i=BigInt(27+e.yParity);return n!==ar?i=Yr.getChainIdV(n,e.v):BigInt(e.v)!==i&&j(!1,"tx.chainId/sig.v mismatch","sig",e),t.push(tr(i)),t.push(tr(e.r)),t.push(tr(e.s)),eo(t)}function wd(r,e){let t;try{if(t=fa(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{j(!1,"invalid yParity","yParity",e[0])}const n=ls(e[1],32),i=ls(e[2],32),o=Yr.from({r:n,s:i,yParity:t});r.signature=o}function ER(r){const e=Cl(Ge(r).slice(1));j(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",ye(r));const t={type:2,chainId:lt(e[0],"chainId"),nonce:fa(e[1],"nonce"),maxPriorityFeePerGas:lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:lt(e[4],"gasLimit"),to:ru(e[5]),value:lt(e[6],"value"),data:ye(e[7]),accessList:yd(e[8],"accessList")};return e.length===9||wd(t,e.slice(9)),t}function AR(r,e){const t=[Ze(r.chainId,"chainId"),Ze(r.nonce,"nonce"),Ze(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ze(r.maxFeePerGas||0,"maxFeePerGas"),Ze(r.gasLimit,"gasLimit"),r.to||"0x",Ze(r.value,"value"),r.data,md(r.accessList||[])];return e&&(t.push(Ze(e.yParity,"yParity")),t.push(tr(e.r)),t.push(tr(e.s))),Mt(["0x02",eo(t)])}function _R(r){const e=Cl(Ge(r).slice(1));j(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",ye(r));const t={type:1,chainId:lt(e[0],"chainId"),nonce:fa(e[1],"nonce"),gasPrice:lt(e[2],"gasPrice"),gasLimit:lt(e[3],"gasLimit"),to:ru(e[4]),value:lt(e[5],"value"),data:ye(e[6]),accessList:yd(e[7],"accessList")};return e.length===8||wd(t,e.slice(8)),t}function IR(r,e){const t=[Ze(r.chainId,"chainId"),Ze(r.nonce,"nonce"),Ze(r.gasPrice||0,"gasPrice"),Ze(r.gasLimit,"gasLimit"),r.to||"0x",Ze(r.value,"value"),r.data,md(r.accessList||[])];return e&&(t.push(Ze(e.yParity,"recoveryParam")),t.push(tr(e.r)),t.push(tr(e.s))),Mt(["0x01",eo(t)])}function xR(r){let e=Cl(Ge(r).slice(1)),t="3",n=null;if(e.length===4&&Array.isArray(e[0])){t="3 (network format)";const o=e[1],c=e[2],u=e[3];j(Array.isArray(o),"invalid network format: blobs not an array","fields[1]",o),j(Array.isArray(c),"invalid network format: commitments not an array","fields[2]",c),j(Array.isArray(u),"invalid network format: proofs not an array","fields[3]",u),j(o.length===c.length,"invalid network format: blobs/commitments length mismatch","fields",e),j(o.length===u.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let l=0;l<e[1].length;l++)n.push({data:o[l],commitment:c[l],proof:u[l]});e=e[0]}j(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${t}`,"data",ye(r));const i={type:3,chainId:lt(e[0],"chainId"),nonce:fa(e[1],"nonce"),maxPriorityFeePerGas:lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:lt(e[4],"gasLimit"),to:ru(e[5]),value:lt(e[6],"value"),data:ye(e[7]),accessList:yd(e[8],"accessList"),maxFeePerBlobGas:lt(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),j(i.to!=null,`invalid address for transaction type: ${t}`,"data",r),j(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",r);for(let o=0;o<i.blobVersionedHashes.length;o++)j(vt(i.blobVersionedHashes[o],32),`invalid blobVersionedHash at index ${o}: must be length 32`,"data",r);return e.length===11||wd(i,e.slice(11)),i}function SR(r,e,t){const n=[Ze(r.chainId,"chainId"),Ze(r.nonce,"nonce"),Ze(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ze(r.maxFeePerGas||0,"maxFeePerGas"),Ze(r.gasLimit,"gasLimit"),r.to||al,Ze(r.value,"value"),r.data,md(r.accessList||[]),Ze(r.maxFeePerBlobGas||0,"maxFeePerBlobGas"),wR(r.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(Ze(e.yParity,"yParity")),n.push(tr(e.r)),n.push(tr(e.s)),t)?Mt(["0x03",eo([n,t.map(i=>i.data),t.map(i=>i.commitment),t.map(i=>i.proof)])]):Mt(["0x03",eo(n)])}function PR(r){const e=Cl(Ge(r).slice(1));j(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",ye(r));const t={type:4,chainId:lt(e[0],"chainId"),nonce:fa(e[1],"nonce"),maxPriorityFeePerGas:lt(e[2],"maxPriorityFeePerGas"),maxFeePerGas:lt(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:lt(e[4],"gasLimit"),to:ru(e[5]),value:lt(e[6],"value"),data:ye(e[7]),accessList:yd(e[8],"accessList"),authorizationList:yR(e[9],"authorizationList")};return e.length===10||wd(t,e.slice(10)),t}function DR(r,e){const t=[Ze(r.chainId,"chainId"),Ze(r.nonce,"nonce"),Ze(r.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Ze(r.maxFeePerGas||0,"maxFeePerGas"),Ze(r.gasLimit,"gasLimit"),r.to||"0x",Ze(r.value,"value"),r.data,md(r.accessList||[]),mR(r.authorizationList||[])];return e&&(t.push(Ze(e.yParity,"yParity")),t.push(tr(e.r)),t.push(tr(e.s))),Mt(["0x04",eo(t)])}var Qn,mc,wc,bc,vc,Ec,Ac,_c,Ic,xc,Sc,Pc,Qo,Fs,gi,Ls,Dc,Oc,_f;const di=class di{constructor(){J(this,Oc);J(this,Qn);J(this,mc);J(this,wc);J(this,bc);J(this,vc);J(this,Ec);J(this,Ac);J(this,_c);J(this,Ic);J(this,xc);J(this,Sc);J(this,Pc);J(this,Qo);J(this,Fs);J(this,gi);J(this,Ls);J(this,Dc);F(this,Qn,null),F(this,mc,null),F(this,bc,0),F(this,vc,ar),F(this,Ec,null),F(this,Ac,null),F(this,_c,null),F(this,wc,"0x"),F(this,Ic,ar),F(this,xc,ar),F(this,Sc,null),F(this,Pc,null),F(this,Qo,null),F(this,Fs,null),F(this,gi,null),F(this,Ls,null),F(this,Dc,null)}get type(){return P(this,Qn)}set type(e){switch(e){case null:F(this,Qn,null);break;case 0:case"legacy":F(this,Qn,0);break;case 1:case"berlin":case"eip-2930":F(this,Qn,1);break;case 2:case"london":case"eip-1559":F(this,Qn,2);break;case 3:case"cancun":case"eip-4844":F(this,Qn,3);break;case 4:case"pectra":case"eip-7702":F(this,Qn,4);break;default:j(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=P(this,mc);return e==null&&this.type===3?al:e}set to(e){F(this,mc,e==null?null:st(e))}get nonce(){return P(this,bc)}set nonce(e){F(this,bc,Ve(e,"value"))}get gasLimit(){return P(this,vc)}set gasLimit(e){F(this,vc,Ee(e))}get gasPrice(){const e=P(this,Ec);return e==null&&(this.type===0||this.type===1)?ar:e}set gasPrice(e){F(this,Ec,e==null?null:Ee(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=P(this,Ac);return e??(this.type===2||this.type===3?ar:null)}set maxPriorityFeePerGas(e){F(this,Ac,e==null?null:Ee(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=P(this,_c);return e??(this.type===2||this.type===3?ar:null)}set maxFeePerGas(e){F(this,_c,e==null?null:Ee(e,"maxFeePerGas"))}get data(){return P(this,wc)}set data(e){F(this,wc,ye(e))}get value(){return P(this,Ic)}set value(e){F(this,Ic,Ee(e,"value"))}get chainId(){return P(this,xc)}set chainId(e){F(this,xc,Ee(e))}get signature(){return P(this,Sc)||null}set signature(e){F(this,Sc,e==null?null:Yr.from(e))}get accessList(){const e=P(this,Pc)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){F(this,Pc,e==null?null:ha(e))}get authorizationList(){const e=P(this,Dc)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){F(this,Dc,e==null?null:e.map(t=>GA(t)))}get maxFeePerBlobGas(){const e=P(this,Qo);return e==null&&this.type===3?ar:e}set maxFeePerBlobGas(e){F(this,Qo,e==null?null:Ee(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=P(this,Fs);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){j(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)j(vt(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}F(this,Fs,e)}get blobs(){return P(this,Ls)==null?null:P(this,Ls).map(e=>Object.assign({},e))}set blobs(e){if(e==null){F(this,Ls,null);return}const t=[],n=[];for(let i=0;i<e.length;i++){const o=e[i];if(my(o)){le(P(this,gi),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let c=Ge(o);if(j(c.length<=bg,"blob is too large",`blobs[${i}]`,o),c.length!==bg){const f=new Uint8Array(bg);f.set(c),c=f}const u=P(this,gi).blobToKzgCommitment(c),l=ye(P(this,gi).computeBlobKzgProof(c,u));t.push({data:ye(c),commitment:ye(u),proof:l}),n.push(qb(1,u))}else{const c=ye(o.commitment);t.push({data:ye(o.data),commitment:c,proof:ye(o.proof)}),n.push(qb(1,c))}}F(this,Ls,t),F(this,Fs,n)}get kzg(){return P(this,gi)}set kzg(e){e==null?F(this,gi,null):F(this,gi,gR(e))}get hash(){return this.signature==null?null:Jt(de(this,Oc,_f).call(this,!0,!1))}get unsignedHash(){return Jt(this.unsignedSerialized)}get from(){return this.signature==null?null:uR(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:cl.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return de(this,Oc,_f).call(this,!0,!0)}get unsignedSerialized(){return de(this,Oc,_f).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null,i=P(this,Qo)!=null||P(this,Fs);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&le(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),le(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),le(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const o=[];return this.type!=null?o.push(this.type):this.authorizationList&&this.authorizationList.length?o.push(4):t?o.push(2):e?(o.push(1),n||o.push(0)):n?(o.push(1),o.push(2)):(i&&this.to||(o.push(0),o.push(1),o.push(2)),o.push(3)),o.sort(),o}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return di.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new di;if(typeof e=="string"){const n=Ge(e);if(n[0]>=127)return di.from(bR(n));switch(n[0]){case 1:return di.from(_R(n));case 2:return di.from(ER(n));case 3:return di.from(xR(n));case 4:return di.from(PR(n))}le(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new di;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=Yr.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(j(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),j(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(j(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),j(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}};Qn=new WeakMap,mc=new WeakMap,wc=new WeakMap,bc=new WeakMap,vc=new WeakMap,Ec=new WeakMap,Ac=new WeakMap,_c=new WeakMap,Ic=new WeakMap,xc=new WeakMap,Sc=new WeakMap,Pc=new WeakMap,Qo=new WeakMap,Fs=new WeakMap,gi=new WeakMap,Ls=new WeakMap,Dc=new WeakMap,Oc=new WeakSet,_f=function(e,t){le(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return vR(this,n);case 1:return IR(this,n);case 2:return AR(this,n);case 3:return SR(this,n,t?this.blobs:null);case 4:return DR(this,n)}le(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let $f=di;function sa(r){return Jt(cs(r))}var OR="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";const Vb=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),Kb=4;function CR(r){let e=0;function t(){return r[e++]<<8|r[e++]}let n=t(),i=1,o=[0,1];for(let D=1;D<n;D++)o.push(i+=t());let c=t(),u=e;e+=c;let l=0,f=0;function d(){return l==0&&(f=f<<8|r[e++],l=8),f>>--l&1}const g=31,m=2**g,b=m>>>1,I=b>>1,x=m-1;let B=0;for(let D=0;D<g;D++)B=B<<1|d();let M=[],R=0,C=m;for(;;){let D=Math.floor(((B-R+1)*i-1)/C),E=0,p=n;for(;p-E>1;){let q=E+p>>>1;D<o[q]?p=q:E=q}if(E==0)break;M.push(E);let _=R+Math.floor(C*o[E]/i),$=R+Math.floor(C*o[E+1]/i)-1;for(;((_^$)&b)==0;)B=B<<1&x|d(),_=_<<1&x,$=$<<1&x|1;for(;_&~$&I;)B=B&b|B<<1&x>>>1|d(),_=_<<1^b,$=($^b)<<1|b|1;R=_,C=1+$-_}let S=n-4;return M.map(D=>{switch(D-S){case 3:return S+65792+(r[u++]<<16|r[u++]<<8|r[u++]);case 2:return S+256+(r[u++]<<8|r[u++]);case 1:return S+r[u++];default:return D-1}})}function NR(r){let e=0;return()=>r[e++]}function qA(r){return NR(CR(RR(r)))}function RR(r){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,o)=>e[i.charCodeAt(0)]=o);let t=r.length,n=new Uint8Array(6*t>>3);for(let i=0,o=0,c=0,u=0;i<t;i++)u=u<<6|e[r.charCodeAt(i)],c+=6,c>=8&&(n[o++]=u>>(c-=8));return n}function TR(r){return r&1?~r>>1:r>>1}function BR(r,e){let t=Array(r);for(let n=0,i=0;n<r;n++)t[n]=i+=TR(e());return t}function ul(r,e=0){let t=[];for(;;){let n=r(),i=r();if(!i)break;e+=n;for(let o=0;o<i;o++)t.push(e+o);e+=i+1}return t}function VA(r){return ll(()=>{let e=ul(r);if(e.length)return e})}function KA(r){let e=[];for(;;){let t=r();if(t==0)break;e.push(UR(t,r))}for(;;){let t=r()-1;if(t<0)break;e.push(FR(t,r))}return e.flat()}function ll(r){let e=[];for(;;){let t=r(e.length);if(!t)break;e.push(t)}return e}function QA(r,e,t){let n=Array(r).fill().map(()=>[]);for(let i=0;i<e;i++)BR(r,t).forEach((o,c)=>n[c].push(o));return n}function UR(r,e){let t=1+e(),n=e(),i=ll(e);return QA(i.length,1+r,e).flatMap((c,u)=>{let[l,...f]=c;return Array(i[u]).fill().map((d,g)=>{let m=g*n;return[l+g*t,f.map(b=>b+m)]})})}function FR(r,e){let t=1+e();return QA(t,1+r,e).map(i=>[i[0],i.slice(1)])}function LR(r){let e=[],t=ul(r);return i(n([]),[]),e;function n(o){let c=r(),u=ll(()=>{let l=ul(r).map(f=>t[f]);if(l.length)return n(l)});return{S:c,B:u,Q:o}}function i({S:o,B:c},u,l){if(!(o&4&&l===u[u.length-1])){o&2&&(l=u[u.length-1]),o&1&&e.push(u);for(let f of c)for(let d of f.Q)i(f,[...u,d],l)}}}function MR(r){return r.toString(16).toUpperCase().padStart(2,"0")}function WA(r){return`{${MR(r)}}`}function kR(r){let e=[];for(let t=0,n=r.length;t<n;){let i=r.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function Zc(r){let t=r.length;if(t<4096)return String.fromCodePoint(...r);let n=[];for(let i=0;i<t;)n.push(String.fromCodePoint(...r.slice(i,i+=4096)));return n.join("")}function $R(r,e){let t=r.length,n=t-e.length;for(let i=0;n==0&&i<t;i++)n=r[i]-e[i];return n}var jR="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";const hl=44032,jf=4352,Hf=4449,zf=4519,JA=19,YA=21,Xc=28,Gf=YA*Xc,HR=JA*Gf,zR=hl+HR,GR=jf+JA,qR=Hf+YA,VR=zf+Xc;function Ju(r){return r>>24&255}function ZA(r){return r&16777215}let D0,Qb,O0,If;function KR(){let r=qA(jR);D0=new Map(VA(r).flatMap((e,t)=>e.map(n=>[n,t+1<<24]))),Qb=new Set(ul(r)),O0=new Map,If=new Map;for(let[e,t]of KA(r)){if(!Qb.has(e)&&t.length==2){let[n,i]=t,o=If.get(n);o||(o=new Map,If.set(n,o)),o.set(i,e)}O0.set(e,t.reverse())}}function XA(r){return r>=hl&&r<zR}function QR(r,e){if(r>=jf&&r<GR&&e>=Hf&&e<qR)return hl+(r-jf)*Gf+(e-Hf)*Xc;if(XA(r)&&e>zf&&e<VR&&(r-hl)%Xc==0)return r+(e-zf);{let t=If.get(r);return t&&(t=t.get(e),t)?t:-1}}function e_(r){D0||KR();let e=[],t=[],n=!1;function i(o){let c=D0.get(o);c&&(n=!0,o|=c),e.push(o)}for(let o of r)for(;;){if(o<128)e.push(o);else if(XA(o)){let c=o-hl,u=c/Gf|0,l=c%Gf/Xc|0,f=c%Xc;i(jf+u),i(Hf+l),f>0&&i(zf+f)}else{let c=O0.get(o);c?t.push(...c):i(o)}if(!t.length)break;o=t.pop()}if(n&&e.length>1){let o=Ju(e[0]);for(let c=1;c<e.length;c++){let u=Ju(e[c]);if(u==0||o<=u){o=u;continue}let l=c-1;for(;;){let f=e[l+1];if(e[l+1]=e[l],e[l]=f,!l||(o=Ju(e[--l]),o<=u))break}o=Ju(e[c])}}return e}function WR(r){let e=[],t=[],n=-1,i=0;for(let o of r){let c=Ju(o),u=ZA(o);if(n==-1)c==0?n=u:e.push(u);else if(i>0&&i>=c)c==0?(e.push(n,...t),t.length=0,n=u):t.push(u),i=c;else{let l=QR(n,u);l>=0?n=l:i==0&&c==0?(e.push(n),n=u):(t.push(u),i=c)}}return n>=0&&e.push(n,...t),e}function t_(r){return e_(r).map(ZA)}function JR(r){return WR(e_(r))}const Wb=45,r_=".",n_=65039,i_=1,qf=r=>Array.from(r);function fl(r,e){return r.P.has(e)||r.Q.has(e)}class YR extends Array{get is_emoji(){return!0}}let C0,s_,Bo,N0,o_,rc,vg,Va,So,Jb,R0;function Dy(){if(C0)return;let r=qA(OR);const e=()=>ul(r),t=()=>new Set(e()),n=(d,g)=>g.forEach(m=>d.add(m));C0=new Map(KA(r)),s_=t(),Bo=e(),N0=new Set(e().map(d=>Bo[d])),Bo=new Set(Bo),o_=t(),t();let i=VA(r),o=r();const c=()=>{let d=new Set;return e().forEach(g=>n(d,i[g])),n(d,e()),d};rc=ll(d=>{let g=ll(r).map(m=>m+96);if(g.length){let m=d>=o;g[0]-=32,g=Zc(g),m&&(g=`Restricted[${g}]`);let b=c(),I=c(),x=!r();return{N:g,P:b,Q:I,M:x,R:m}}}),vg=t(),Va=new Map;let u=e().concat(qf(vg)).sort((d,g)=>d-g);u.forEach((d,g)=>{let m=r(),b=u[g]=m?u[g-m]:{V:[],M:new Map};b.V.push(d),vg.has(d)||Va.set(d,b)});for(let{V:d,M:g}of new Set(Va.values())){let m=[];for(let I of d){let x=rc.filter(M=>fl(M,I)),B=m.find(({G:M})=>x.some(R=>M.has(R)));B||(B={G:new Set,V:[]},m.push(B)),B.V.push(I),n(B.G,x)}let b=m.flatMap(I=>qf(I.G));for(let{G:I,V:x}of m){let B=new Set(b.filter(M=>!I.has(M)));for(let M of x)g.set(M,B)}}So=new Set;let l=new Set;const f=d=>So.has(d)?l.add(d):So.add(d);for(let d of rc){for(let g of d.P)f(g);for(let g of d.Q)f(g)}for(let d of So)!Va.has(d)&&!l.has(d)&&Va.set(d,i_);n(So,t_(So)),Jb=LR(r).map(d=>YR.from(d)).sort($R),R0=new Map;for(let d of Jb){let g=[R0];for(let m of d){let b=g.map(I=>{let x=I.get(m);return x||(x=new Map,I.set(m,x)),x});m===n_?g.push(...b):g=b}for(let m of g)m.V=d}}function Oy(r){return(a_(r)?"":`${Cy(bd([r]))} `)+WA(r)}function Cy(r){return`"${r}"‎`}function ZR(r){if(r.length>=4&&r[2]==Wb&&r[3]==Wb)throw new Error(`invalid label extension: "${Zc(r.slice(0,4))}"`)}function XR(r){for(let t=r.lastIndexOf(95);t>0;)if(r[--t]!==95)throw new Error("underscore allowed only at start")}function e8(r){let e=r[0],t=Vb.get(e);if(t)throw rl(`leading ${t}`);let n=r.length,i=-1;for(let o=1;o<n;o++){e=r[o];let c=Vb.get(e);if(c){if(i==o)throw rl(`${t} + ${c}`);i=o+1,t=c}}if(i==n)throw rl(`trailing ${t}`)}function bd(r,e=1/0,t=WA){let n=[];t8(r[0])&&n.push("◌"),r.length>e&&(e>>=1,r=[...r.slice(0,e),8230,...r.slice(-e)]);let i=0,o=r.length;for(let c=0;c<o;c++){let u=r[c];a_(u)&&(n.push(Zc(r.slice(i,c))),n.push(t(u)),i=c+1)}return n.push(Zc(r.slice(i,o))),n.join("")}function t8(r){return Dy(),Bo.has(r)}function a_(r){return Dy(),o_.has(r)}function r8(r){return o8(n8(r,JR,u8))}function n8(r,e,t){if(!r)return[];Dy();let n=0;return r.split(r_).map(i=>{let o=kR(i),c={input:o,offset:n};n+=o.length+1;try{let u=c.tokens=c8(o,e,t),l=u.length,f;if(!l)throw new Error("empty label");let d=c.output=u.flat();if(XR(d),!(c.emoji=l>1||u[0].is_emoji)&&d.every(m=>m<128))ZR(d),f="ASCII";else{let m=u.flatMap(b=>b.is_emoji?[]:b);if(!m.length)f="Emoji";else{if(Bo.has(d[0]))throw rl("leading combining mark");for(let x=1;x<l;x++){let B=u[x];if(!B.is_emoji&&Bo.has(B[0]))throw rl(`emoji + combining mark: "${Zc(u[x-1])} + ${bd([B[0]])}"`)}e8(d);let b=qf(new Set(m)),[I]=s8(b);a8(I,m),i8(I,b),f=I.N}}c.type=f}catch(u){c.error=u}return c})}function i8(r,e){let t,n=[];for(let i of e){let o=Va.get(i);if(o===i_)return;if(o){let c=o.M.get(i);if(t=t?t.filter(u=>c.has(u)):qf(c),!t.length)return}else n.push(i)}if(t){for(let i of t)if(n.every(o=>fl(i,o)))throw new Error(`whole-script confusable: ${r.N}/${i.N}`)}}function s8(r){let e=rc;for(let t of r){let n=e.filter(i=>fl(i,t));if(!n.length)throw rc.some(i=>fl(i,t))?u_(e[0],t):c_(t);if(e=n,n.length==1)break}return e}function o8(r){return r.map(({input:e,error:t,output:n})=>{if(t){let i=t.message;throw new Error(r.length==1?i:`Invalid label ${Cy(bd(e,63))}: ${i}`)}return Zc(n)}).join(r_)}function c_(r){return new Error(`disallowed character: ${Oy(r)}`)}function u_(r,e){let t=Oy(e),n=rc.find(i=>i.P.has(e));return n&&(t=`${n.N} ${t}`),new Error(`illegal mixture: ${r.N} + ${t}`)}function rl(r){return new Error(`illegal placement: ${r}`)}function a8(r,e){for(let t of e)if(!fl(r,t))throw u_(r,t);if(r.M){let t=t_(e);for(let n=1,i=t.length;n<i;n++)if(N0.has(t[n])){let o=n+1;for(let c;o<i&&N0.has(c=t[o]);o++)for(let u=n;u<o;u++)if(t[u]==c)throw new Error(`duplicate non-spacing marks: ${Oy(c)}`);if(o-n>Kb)throw new Error(`excessive non-spacing marks: ${Cy(bd(t.slice(n-1,o)))} (${o-n}/${Kb})`);n=o}}}function c8(r,e,t){let n=[],i=[];for(r=r.slice().reverse();r.length;){let o=l8(r);if(o)i.length&&(n.push(e(i)),i=[]),n.push(t(o));else{let c=r.pop();if(So.has(c))i.push(c);else{let u=C0.get(c);if(u)i.push(...u);else if(!s_.has(c))throw c_(c)}}}return i.length&&n.push(e(i)),n}function u8(r){return r.filter(e=>e!=n_)}function l8(r,e){let t=R0,n,i=r.length;for(;i&&(t=t.get(r[--i]),!!t);){let{V:o}=t;o&&(n=o,r.length=i)}return n}const l_=new Uint8Array(32);l_.fill(0);function Yb(r){return j(r.length!==0,"invalid ENS name; empty component","comp",r),r}function h_(r){const e=cs(h8(r)),t=[];if(r.length===0)return t;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(t.push(Yb(e.slice(n,i))),n=i+1);return j(n<e.length,"invalid ENS name; empty component","name",r),t.push(Yb(e.slice(n))),t}function h8(r){try{if(r.length===0)throw new Error("empty label");return r8(r)}catch(e){j(!1,`invalid ENS name (${e.message})`,"name",r)}}function T0(r){j(typeof r=="string","invalid ENS name; not a string","name",r),j(r.length,"invalid ENS name (empty label)","name",r);let e=l_;const t=h_(r);for(;t.length;)e=Jt(Mt([e,Jt(t.pop())]));return ye(e)}function f8(r,e){const t=e;return j(t<=255,"DNS encoded label cannot exceed 255","length",t),ye(Mt(h_(r).map(n=>{j(n.length<=t,`label ${JSON.stringify(r)} exceeds ${t} bytes`,"name",r);const i=new Uint8Array(n.length+1);return i.set(n,1),i[0]=i.length-1,i})))+"00"}const f_=new Uint8Array(32);f_.fill(0);const d8=BigInt(-1),d_=BigInt(0),p_=BigInt(1),p8=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function g8(r){const e=Ge(r),t=e.length%32;return t?Mt([e,f_.slice(t)]):ye(e)}const y8=Zs(p_,32),m8=Zs(d_,32),Zb={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Eg=["name","version","chainId","verifyingContract","salt"];function Xb(r){return function(e){return j(typeof e=="string",`invalid domain value for ${JSON.stringify(r)}`,`domain.${r}`,e),e}}const w8={name:Xb("name"),version:Xb("version"),chainId:function(r){const e=Ee(r,"domain.chainId");return j(e>=0,"invalid chain ID","domain.chainId",r),Number.isSafeInteger(e)?Number(e):Zn(e)},verifyingContract:function(r){try{return st(r).toLowerCase()}catch{}j(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",r)},salt:function(r){const e=Ge(r,"domain.salt");return j(e.length===32,'invalid domain value "salt"',"domain.salt",r),ye(e)}};function Ag(r){{const e=r.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",n=parseInt(e[2]);j(n%8===0&&n!==0&&n<=256&&e[2]===String(n),"invalid numeric width","type",r);const i=Qu(p8,t?n-1:n),o=t?(i+p_)*d8:d_;return function(c){const u=Ee(c,"value");return j(u>=o&&u<=i,`value out-of-bounds for ${r}`,"value",u),Zs(t?eA(u,256):u,32)}}}{const e=r.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return j(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",r),function(n){const i=Ge(n);return j(i.length===t,`invalid length for ${r}`,"value",n),g8(n)}}}switch(r){case"address":return function(e){return ls(st(e),32)};case"bool":return function(e){return e?y8:m8};case"bytes":return function(e){return Jt(e)};case"string":return function(e){return sa(e)}}return null}function ev(r,e){return`${r}(${e.map(({name:t,type:n})=>n+" "+t).join(",")})`}function of(r){const e=r.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:r}}var El,Xi,Cc,id,g_;const Pn=class Pn{constructor(e){J(this,id);Q(this,"primaryType");J(this,El);J(this,Xi);J(this,Cc);F(this,Xi,new Map),F(this,Cc,new Map);const t=new Map,n=new Map,i=new Map,o={};Object.keys(e).forEach(l=>{o[l]=e[l].map(({name:f,type:d})=>{let{base:g,index:m}=of(d);return g==="int"&&!e.int&&(g="int256"),g==="uint"&&!e.uint&&(g="uint256"),{name:f,type:g+(m||"")}}),t.set(l,new Set),n.set(l,[]),i.set(l,new Set)}),F(this,El,JSON.stringify(o));for(const l in o){const f=new Set;for(const d of o[l]){j(!f.has(d.name),`duplicate variable name ${JSON.stringify(d.name)} in ${JSON.stringify(l)}`,"types",e),f.add(d.name);const g=of(d.type).base;j(g!==l,`circular type reference to ${JSON.stringify(g)}`,"types",e),!Ag(g)&&(j(n.has(g),`unknown type ${JSON.stringify(g)}`,"types",e),n.get(g).push(l),t.get(l).add(g))}}const c=Array.from(n.keys()).filter(l=>n.get(l).length===0);j(c.length!==0,"missing primary type","types",e),j(c.length===1,`ambiguous primary types or unused types: ${c.map(l=>JSON.stringify(l)).join(", ")}`,"types",e),Ce(this,{primaryType:c[0]});function u(l,f){j(!f.has(l),`circular type reference to ${JSON.stringify(l)}`,"types",e),f.add(l);for(const d of t.get(l))if(n.has(d)){u(d,f);for(const g of f)i.get(g).add(d)}f.delete(l)}u(this.primaryType,new Set);for(const[l,f]of i){const d=Array.from(f);d.sort(),P(this,Xi).set(l,ev(l,o[l])+d.map(g=>ev(g,o[g])).join(""))}}get types(){return JSON.parse(P(this,El))}getEncoder(e){let t=P(this,Cc).get(e);return t||(t=de(this,id,g_).call(this,e),P(this,Cc).set(e,t)),t}encodeType(e){const t=P(this,Xi).get(e);return j(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Jt(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Ag(e))return n(e,t);const i=of(e).array;if(i)return j(i.count===-1||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(c=>this._visit(i.prefix,c,n));const o=this.types[e];if(o)return o.reduce((c,{name:u,type:l})=>(c[u]=this._visit(l,t[u],n),c),{});j(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Pn(e)}static getPrimaryType(e){return Pn.from(e).primaryType}static hashStruct(e,t,n){return Pn.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(e[n]==null)continue;const i=Zb[n];j(i,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),t.push({name:n,type:i})}return t.sort((n,i)=>Eg.indexOf(n.name)-Eg.indexOf(i.name)),Pn.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return Mt(["0x1901",Pn.hashDomain(e),Pn.from(t).hash(n)])}static hash(e,t,n){return Jt(Pn.encode(e,t,n))}static async resolveNames(e,t,n,i){e=Object.assign({},e);for(const u in e)e[u]==null&&delete e[u];const o={};e.verifyingContract&&!vt(e.verifyingContract,20)&&(o[e.verifyingContract]="0x");const c=Pn.from(t);c.visit(n,(u,l)=>(u==="address"&&!vt(l,20)&&(o[l]="0x"),l));for(const u in o)o[u]=await i(u);return e.verifyingContract&&o[e.verifyingContract]&&(e.verifyingContract=o[e.verifyingContract]),n=c.visit(n,(u,l)=>u==="address"&&o[l]?o[l]:l),{domain:e,value:n}}static getPayload(e,t,n){Pn.hashDomain(e);const i={},o=[];Eg.forEach(l=>{const f=e[l];f!=null&&(i[l]=w8[l](f),o.push({name:l,type:Zb[l]}))});const c=Pn.from(t);t=c.types;const u=Object.assign({},t);return j(u.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),u.EIP712Domain=o,c.encode(n),{types:u,domain:i,primaryType:c.primaryType,message:c.visit(n,(l,f)=>{if(l.match(/^bytes(\d*)/))return ye(Ge(f));if(l.match(/^u?int/))return Ee(f).toString();switch(l){case"address":return f.toLowerCase();case"bool":return!!f;case"string":return j(typeof f=="string","invalid string","value",f),f}j(!1,"unsupported type","type",l)})}}};El=new WeakMap,Xi=new WeakMap,Cc=new WeakMap,id=new WeakSet,g_=function(e){{const i=Ag(e);if(i)return i}const t=of(e).array;if(t){const i=t.prefix,o=this.getEncoder(i);return c=>{j(t.count===-1||t.count===c.length,`array length mismatch; expected length ${t.count}`,"value",c);let u=c.map(o);return P(this,Xi).has(i)&&(u=u.map(Jt)),Jt(Mt(u))}}const n=this.types[e];if(n){const i=sa(P(this,Xi).get(e));return o=>{const c=n.map(({name:u,type:l})=>{const f=this.getEncoder(l)(o[u]);return P(this,Xi).has(l)?Jt(f):f});return c.unshift(i),Mt(c)}}j(!1,`unknown type: ${e}`,"type",e)};let Vf=Pn;function Ur(r){const e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}const b8="external public payable override",v8=Ur(b8.split(" ")),y_="constant external internal payable private public pure view override",E8=Ur(y_.split(" ")),m_="constructor error event fallback function receive struct",w_=Ur(m_.split(" ")),b_="calldata memory storage payable indexed",A8=Ur(b_.split(" ")),_8="tuple returns",I8=[m_,b_,_8,y_].join(" "),x8=Ur(I8.split(" ")),S8={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},P8=new RegExp("^(\\s*)"),D8=new RegExp("^([0-9]+)"),O8=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),v_=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),E_=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var fr,Wn,Al,B0;const sd=class sd{constructor(e){J(this,Al);J(this,fr);J(this,Wn);F(this,fr,0),F(this,Wn,e.slice())}get offset(){return P(this,fr)}get length(){return P(this,Wn).length-P(this,fr)}clone(){return new sd(P(this,Wn))}reset(){F(this,fr,0)}popKeyword(e){const t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=de(this,Al,B0).call(this,P(this,fr)+1,e.match+1);return F(this,fr,e.match+1),t}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const t=[];for(;P(this,fr)<e.match-1;){const n=this.peek().linkNext;t.push(de(this,Al,B0).call(this,P(this,fr)+1,n)),F(this,fr,n)}return F(this,fr,e.match+1),t}peek(){if(P(this,fr)>=P(this,Wn).length)throw new Error("out-of-bounds");return P(this,Wn)[P(this,fr)]}peekKeyword(e){const t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;const t=this.peek();return t.type===e?t.text:null}pop(){const e=this.peek();return Ou(this,fr)._++,e}toString(){const e=[];for(let t=P(this,fr);t<P(this,Wn).length;t++){const n=P(this,Wn)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};fr=new WeakMap,Wn=new WeakMap,Al=new WeakSet,B0=function(e=0,t=0){return new sd(P(this,Wn).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};let ti=sd;function no(r){const e=[],t=c=>{const u=o<r.length?JSON.stringify(r[o]):"$EOI";throw new Error(`invalid token ${u} at ${o}: ${c}`)};let n=[],i=[],o=0;for(;o<r.length;){let c=r.substring(o),u=c.match(P8);u&&(o+=u[1].length,c=r.substring(o));const l={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:o,value:-1};e.push(l);let f=S8[c[0]]||"";if(f){if(l.type=f,l.text=c[0],o++,f==="OPEN_PAREN")n.push(e.length-1),i.push(e.length-1);else if(f=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),l.match=n.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if(f==="COMMA")l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if(f==="OPEN_BRACKET")l.type="BRACKET";else if(f==="CLOSE_BRACKET"){let d=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const g=e.pop().text;d=g+d,e[e.length-1].value=Ve(g)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=d}continue}if(u=c.match(O8),u){if(l.text=u[1],o+=l.text.length,x8.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(E_)){l.type="TYPE";continue}l.type="ID";continue}if(u=c.match(D8),u){l.text=u[1],l.type="NUMBER",o+=l.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(c[0])} at position ${o}`)}return new ti(e.map(c=>Object.freeze(c)))}function tv(r,e){let t=[];for(const n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function vd(r,e){if(e.peekKeyword(w_)){const t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function hs(r,e){const t=new Set;for(;;){const n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function A_(r){let e=hs(r,E8);return tv(e,Ur("constant payable nonpayable".split(" "))),tv(e,Ur("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function us(r,e){return r.popParams().map(t=>gr.from(t,e))}function __(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return Ee(r.pop().text);throw new Error("invalid gas")}return null}function oa(r){if(r.length)throw new Error(`unexpected tokens at offset ${r.offset}: ${r.toString()}`)}const C8=new RegExp(/^(.*)\[([0-9]*)\]$/);function rv(r){const e=r.match(E_);if(j(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){const t=parseInt(e[2]);j(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){const t=parseInt(e[3]);j(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}const Tt={},Zr=Symbol.for("_ethers_internal"),nv="_ParamTypeInternal",iv="_ErrorInternal",sv="_EventInternal",ov="_ConstructorInternal",av="_FallbackInternal",cv="_FunctionInternal",uv="_StructInternal";var Nc,xf;const Dn=class Dn{constructor(e,t,n,i,o,c,u,l){J(this,Nc);Q(this,"name");Q(this,"type");Q(this,"baseType");Q(this,"indexed");Q(this,"components");Q(this,"arrayLength");Q(this,"arrayChildren");if(ld(e,Tt,"ParamType"),Object.defineProperty(this,Zr,{value:nv}),c&&(c=Object.freeze(c.slice())),i==="array"){if(u==null||l==null)throw new Error("")}else if(u!=null||l!=null)throw new Error("");if(i==="tuple"){if(c==null)throw new Error("")}else if(c!=null)throw new Error("");Ce(this,{name:t,type:n,baseType:i,indexed:o,components:c,arrayLength:u,arrayChildren:l})}format(e){if(e==null&&(e="sighash"),e==="json"){const n=this.name||"";if(this.isArray()){const o=JSON.parse(this.arrayChildren.format("json"));return o.name=n,o.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(o)}const i={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(i.indexed=this.indexed),this.isTuple()&&(i.components=this.components.map(o=>JSON.parse(o.format(e)))),JSON.stringify(i)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")":t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(i=>n.arrayChildren.walk(i,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((i,o)=>n.components[o].walk(i,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],i=[e];return de(this,Nc,xf).call(this,n,e,t,o=>{i[0]=o}),n.length&&await Promise.all(n),i[0]}static from(e,t){if(Dn.isParamType(e))return e;if(typeof e=="string")try{return Dn.from(no(e),t)}catch{j(!1,"invalid param type","obj",e)}else if(e instanceof ti){let u="",l="",f=null;hs(e,Ur(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(l="tuple",f=e.popParams().map(x=>Dn.from(x)),u=`tuple(${f.map(x=>x.format()).join(",")})`):(u=rv(e.popType("TYPE")),l=u);let d=null,g=null;for(;e.length&&e.peekType("BRACKET");){const x=e.pop();d=new Dn(Tt,"",u,l,null,f,g,d),g=x.value,u+=x.text,l="array",f=null}let m=null;if(hs(e,A8).has("indexed")){if(!t)throw new Error("");m=!0}const I=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Dn(Tt,I,u,l,m,f,g,d)}const n=e.name;j(!n||typeof n=="string"&&n.match(v_),"invalid name","obj.name",n);let i=e.indexed;i!=null&&(j(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let o=e.type,c=o.match(C8);if(c){const u=parseInt(c[2]||"-1"),l=Dn.from({type:c[1],components:e.components});return new Dn(Tt,n||"",o,"array",i,null,u,l)}if(o==="tuple"||o.startsWith("tuple(")||o.startsWith("(")){const u=e.components!=null?e.components.map(f=>Dn.from(f)):null;return new Dn(Tt,n||"",o,"tuple",i,u,null,null)}return o=rv(e.type),new Dn(Tt,n||"",o,o,i,null,null,null)}static isParamType(e){return e&&e[Zr]===nv}};Nc=new WeakSet,xf=function(e,t,n,i){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");const c=this.arrayChildren,u=t.slice();u.forEach((l,f)=>{var d;de(d=c,Nc,xf).call(d,e,l,n,g=>{u[f]=g})}),i(u);return}if(this.isTuple()){const c=this.components;let u;if(Array.isArray(t))u=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");u=c.map(l=>{if(!l.name)throw new Error("cannot use object value with unnamed components");if(!(l.name in t))throw new Error(`missing value for component ${l.name}`);return t[l.name]})}if(u.length!==this.components.length)throw new Error("array is wrong length");u.forEach((l,f)=>{var d;de(d=c[f],Nc,xf).call(d,e,l,n,g=>{u[f]=g})}),i(u);return}const o=n(this.type,t);o.then?e.push(async function(){i(await o)}()):i(o)};let gr=Dn;class aa{constructor(e,t,n){Q(this,"type");Q(this,"inputs");ld(e,Tt,"Fragment"),n=Object.freeze(n.slice()),Ce(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{aa.from(JSON.parse(e))}catch{}return aa.from(no(e))}if(e instanceof ti)switch(e.peekKeyword(w_)){case"constructor":return as.from(e);case"error":return Wr.from(e);case"event":return Ai.from(e);case"fallback":case"receive":return Qi.from(e);case"function":return _i.from(e);case"struct":return ia.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return as.from(e);case"error":return Wr.from(e);case"event":return Ai.from(e);case"fallback":case"receive":return Qi.from(e);case"function":return _i.from(e);case"struct":return ia.from(e)}le(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}j(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return as.isFragment(e)}static isError(e){return Wr.isFragment(e)}static isEvent(e){return Ai.isFragment(e)}static isFunction(e){return _i.isFragment(e)}static isStruct(e){return ia.isFragment(e)}}class Ed extends aa{constructor(t,n,i,o){super(t,n,o);Q(this,"name");j(typeof i=="string"&&i.match(v_),"invalid identifier","name",i),o=Object.freeze(o.slice()),Ce(this,{name:i})}}function dl(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}class Wr extends Ed{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,Zr,{value:iv})}get selector(){return sa(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});const t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+dl(e,this.inputs)),t.join(" ")}static from(e){if(Wr.isFragment(e))return e;if(typeof e=="string")return Wr.from(no(e));if(e instanceof ti){const t=vd("error",e),n=us(e);return oa(e),new Wr(Tt,t,n)}return new Wr(Tt,e.name,e.inputs?e.inputs.map(gr.from):[])}static isFragment(e){return e&&e[Zr]===iv}}class Ai extends Ed{constructor(t,n,i,o){super(t,"event",n,i);Q(this,"anonymous");Object.defineProperty(this,Zr,{value:sv}),Ce(this,{anonymous:o})}get topicHash(){return sa(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+dl(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(o=>gr.from(o)),new Ai(Tt,t,n,!1).topicHash}static from(t){if(Ai.isFragment(t))return t;if(typeof t=="string")try{return Ai.from(no(t))}catch{j(!1,"invalid event fragment","obj",t)}else if(t instanceof ti){const n=vd("event",t),i=us(t,!0),o=!!hs(t,Ur(["anonymous"])).has("anonymous");return oa(t),new Ai(Tt,n,i,o)}return new Ai(Tt,t.name,t.inputs?t.inputs.map(n=>gr.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[Zr]===sv}}class as extends aa{constructor(t,n,i,o,c){super(t,n,i);Q(this,"payable");Q(this,"gas");Object.defineProperty(this,Zr,{value:ov}),Ce(this,{payable:o,gas:c})}format(t){if(le(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t)))});const n=[`constructor${dl(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(as.isFragment(t))return t;if(typeof t=="string")try{return as.from(no(t))}catch{j(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof ti){hs(t,Ur(["constructor"]));const n=us(t),i=!!hs(t,v8).has("payable"),o=__(t);return oa(t),new as(Tt,"constructor",n,i,o)}return new as(Tt,"constructor",t.inputs?t.inputs.map(gr.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Zr]===ov}}class Qi extends aa{constructor(t,n,i){super(t,"fallback",n);Q(this,"payable");Object.defineProperty(this,Zr,{value:av}),Ce(this,{payable:i})}format(t){const n=this.inputs.length===0?"receive":"fallback";if(t==="json"){const i=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:i})}return`${n}()${this.payable?" payable":""}`}static from(t){if(Qi.isFragment(t))return t;if(typeof t=="string")try{return Qi.from(no(t))}catch{j(!1,"invalid fallback fragment","obj",t)}else if(t instanceof ti){const n=t.toString(),i=t.peekKeyword(Ur(["fallback","receive"]));if(j(i,"type must be fallback or receive","obj",n),t.popKeyword(Ur(["fallback","receive"]))==="receive"){const l=us(t);return j(l.length===0,"receive cannot have arguments","obj.inputs",l),hs(t,Ur(["payable"])),oa(t),new Qi(Tt,[],!0)}let c=us(t);c.length?j(c.length===1&&c[0].type==="bytes","invalid fallback inputs","obj.inputs",c.map(l=>l.format("minimal")).join(", ")):c=[gr.from("bytes")];const u=A_(t);if(j(u==="nonpayable"||u==="payable","fallback cannot be constants","obj.stateMutability",u),hs(t,Ur(["returns"])).has("returns")){const l=us(t);j(l.length===1&&l[0].type==="bytes","invalid fallback outputs","obj.outputs",l.map(f=>f.format("minimal")).join(", "))}return oa(t),new Qi(Tt,c,u==="payable")}if(t.type==="receive")return new Qi(Tt,[],!0);if(t.type==="fallback"){const n=[gr.from("bytes")],i=t.stateMutability==="payable";return new Qi(Tt,n,i)}j(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[Zr]===av}}class _i extends Ed{constructor(t,n,i,o,c,u){super(t,"function",n,o);Q(this,"constant");Q(this,"outputs");Q(this,"stateMutability");Q(this,"payable");Q(this,"gas");Object.defineProperty(this,Zr,{value:cv}),c=Object.freeze(c.slice()),Ce(this,{constant:i==="view"||i==="pure",gas:u,outputs:c,payable:i==="payable",stateMutability:i})}get selector(){return sa(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(i=>JSON.parse(i.format(t))),outputs:this.outputs.map(i=>JSON.parse(i.format(t)))});const n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+dl(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(dl(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(o=>gr.from(o)),new _i(Tt,t,"view",n,[],null).selector}static from(t){if(_i.isFragment(t))return t;if(typeof t=="string")try{return _i.from(no(t))}catch{j(!1,"invalid function fragment","obj",t)}else if(t instanceof ti){const i=vd("function",t),o=us(t),c=A_(t);let u=[];hs(t,Ur(["returns"])).has("returns")&&(u=us(t));const l=__(t);return oa(t),new _i(Tt,i,c,o,u,l)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new _i(Tt,t.name,n,t.inputs?t.inputs.map(gr.from):[],t.outputs?t.outputs.map(gr.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[Zr]===cv}}class ia extends Ed{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,Zr,{value:uv})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return ia.from(no(e))}catch{j(!1,"invalid struct fragment","obj",e)}else if(e instanceof ti){const t=vd("struct",e),n=us(e);return oa(e),new ia(Tt,t,n)}return new ia(Tt,e.name,e.inputs?e.inputs.map(gr.from):[])}static isFragment(e){return e&&e[Zr]===uv}}const ri=new Map;ri.set(0,"GENERIC_PANIC");ri.set(1,"ASSERT_FALSE");ri.set(17,"OVERFLOW");ri.set(18,"DIVIDE_BY_ZERO");ri.set(33,"ENUM_RANGE_ERROR");ri.set(34,"BAD_STORAGE_DATA");ri.set(49,"STACK_UNDERFLOW");ri.set(50,"ARRAY_RANGE_ERROR");ri.set(65,"OUT_OF_MEMORY");ri.set(81,"UNINITIALIZED_FUNCTION_CALL");const N8=new RegExp(/^bytes([0-9]*)$/),R8=new RegExp(/^(u?int)([0-9]*)$/);let _g=null,lv=1024;function T8(r,e,t,n){let i="missing revert data",o=null;const c=null;let u=null;if(t){i="execution reverted";const f=Ge(t);if(t=ye(t),f.length===0)i+=" (no data present; likely require(false) occurred",o="require(false)";else if(f.length%32!==4)i+=" (could not decode reason; invalid data length)";else if(ye(f.slice(0,4))==="0x08c379a0")try{o=n.decode(["string"],f.slice(4))[0],u={signature:"Error(string)",name:"Error",args:[o]},i+=`: ${JSON.stringify(o)}`}catch{i+=" (could not decode reason; invalid string data)"}else if(ye(f.slice(0,4))==="0x4e487b71")try{const d=Number(n.decode(["uint256"],f.slice(4))[0]);u={signature:"Panic(uint256)",name:"Panic",args:[d]},o=`Panic due to ${ri.get(d)||"UNKNOWN"}(${d})`,i+=`: ${o}`}catch{i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const l={to:e.to?st(e.to):null,data:e.data||"0x"};return e.from&&(l.from=st(e.from)),St(i,"CALL_EXCEPTION",{action:r,data:t,reason:o,transaction:l,invocation:c,revert:u})}var Ms,Ka;const od=class od{constructor(){J(this,Ms)}getDefaultValue(e){const t=e.map(i=>de(this,Ms,Ka).call(this,gr.from(i)));return new sf(t,"_").defaultValue()}encode(e,t){YE(t.length,e.length,"types/values length mismatch");const n=e.map(c=>de(this,Ms,Ka).call(this,gr.from(c))),i=new sf(n,"_"),o=new v0;return i.encode(o,t),o.data}decode(e,t,n){const i=e.map(c=>de(this,Ms,Ka).call(this,gr.from(c)));return new sf(i,"_").decode(new E0(t,n,lv))}static _setDefaultMaxInflation(e){j(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),lv=e}static defaultAbiCoder(){return _g==null&&(_g=new od),_g}static getBuiltinCallException(e,t,n){return T8(e,t,n,od.defaultAbiCoder())}};Ms=new WeakSet,Ka=function(e){if(e.isArray())return new YN(de(this,Ms,Ka).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new sf(e.components.map(n=>de(this,Ms,Ka).call(this,n)),e.name);switch(e.baseType){case"address":return new WN(e.name);case"bool":return new ZN(e.name);case"string":return new aR(e.name);case"bytes":return new XN(e.name);case"":return new rR(e.name)}let t=e.type.match(R8);if(t){let n=parseInt(t[2]||"256");return j(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new oR(n/8,t[1]==="int",e.name)}if(t=e.type.match(N8),t){let n=parseInt(t[1]);return j(n!==0&&n<=32,"invalid bytes length","param",e),new eR(n,e.name)}j(!1,"invalid type","type",e.type)};let pl=od;class B8{constructor(e,t,n){Q(this,"fragment");Q(this,"name");Q(this,"signature");Q(this,"topic");Q(this,"args");const i=e.name,o=e.format();Ce(this,{fragment:e,name:i,signature:o,topic:t,args:n})}}class U8{constructor(e,t,n,i){Q(this,"fragment");Q(this,"name");Q(this,"args");Q(this,"signature");Q(this,"selector");Q(this,"value");const o=e.name,c=e.format();Ce(this,{fragment:e,name:o,args:n,signature:c,selector:t,value:i})}}class F8{constructor(e,t,n){Q(this,"fragment");Q(this,"name");Q(this,"args");Q(this,"signature");Q(this,"selector");const i=e.name,o=e.format();Ce(this,{fragment:e,name:i,args:n,signature:o,selector:t})}}class hv{constructor(e){Q(this,"hash");Q(this,"_isIndexed");Ce(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const fv={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},dv={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&fv[r.toString()]&&(e=fv[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}};var yi,mi,wi,Er,xi,Sf,Pf;const No=class No{constructor(e){J(this,xi);Q(this,"fragments");Q(this,"deploy");Q(this,"fallback");Q(this,"receive");J(this,yi);J(this,mi);J(this,wi);J(this,Er);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,F(this,wi,new Map),F(this,yi,new Map),F(this,mi,new Map);const n=[];for(const c of t)try{n.push(aa.from(c))}catch(u){console.log(`[Warning] Invalid Fragment ${JSON.stringify(c)}:`,u.message)}Ce(this,{fragments:Object.freeze(n)});let i=null,o=!1;F(this,Er,this.getAbiCoder()),this.fragments.forEach((c,u)=>{let l;switch(c.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Ce(this,{deploy:c});return;case"fallback":c.inputs.length===0?o=!0:(j(!i||c.payable!==i.payable,"conflicting fallback fragments",`fragments[${u}]`,c),i=c,o=i.payable);return;case"function":l=P(this,wi);break;case"event":l=P(this,mi);break;case"error":l=P(this,yi);break;default:return}const f=c.format();l.has(f)||l.set(f,c)}),this.deploy||Ce(this,{deploy:as.from("constructor()")}),Ce(this,{fallback:i,receive:o})}format(e){const t=e?"minimal":"full";return this.fragments.map(i=>i.format(t))}formatJson(){const e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return pl.defaultAbiCoder()}getFunctionName(e){const t=de(this,xi,Sf).call(this,e,null,!1);return j(t,"no matching function","key",e),t.name}hasFunction(e){return!!de(this,xi,Sf).call(this,e,null,!1)}getFunction(e,t){return de(this,xi,Sf).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(P(this,wi).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(P(this,wi).get(i),n)}}getEventName(e){const t=de(this,xi,Pf).call(this,e,null,!1);return j(t,"no matching event","key",e),t.name}hasEvent(e){return!!de(this,xi,Pf).call(this,e,null,!1)}getEvent(e,t){return de(this,xi,Pf).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(P(this,mi).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(P(this,mi).get(i),n)}}getError(e,t){if(vt(e)){const i=e.toLowerCase();if(dv[i])return Wr.from(dv[i].signature);for(const o of P(this,yi).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,c]of P(this,yi))o.split("(")[0]===e&&i.push(c);if(i.length===0)return e==="Error"?Wr.from("error Error(string)"):e==="Panic"?Wr.from("error Panic(uint256)"):null;if(i.length>1){const o=i.map(c=>JSON.stringify(c.format())).join(", ");j(!1,`ambiguous error description (i.e. ${o})`,"name",e)}return i[0]}if(e=Wr.from(e).format(),e==="Error(string)")return Wr.from("error Error(string)");if(e==="Panic(uint256)")return Wr.from("error Panic(uint256)");const n=P(this,yi).get(e);return n||null}forEachError(e){const t=Array.from(P(this,yi).keys());t.sort((n,i)=>n.localeCompare(i));for(let n=0;n<t.length;n++){const i=t[n];e(P(this,yi).get(i),n)}}_decodeParams(e,t){return P(this,Er).decode(e,t)}_encodeParams(e,t){return P(this,Er).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);j(n,"unknown error","fragment",e),e=n}return j(Ft(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ft(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){const n=this.getError(e);j(n,"unknown error","fragment",e),e=n}return Mt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);j(n,"unknown function","fragment",e),e=n}return j(Ft(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,Ft(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){const n=this.getFunction(e);j(n,"unknown function","fragment",e),e=n}return Mt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){const o=this.getFunction(e);j(o,"unknown function","fragment",e),e=o}let n="invalid length for result data";const i=Nr(t);if(i.length%32===0)try{return P(this,Er).decode(e.outputs,i)}catch{n="could not decode result data"}le(!1,n,"BAD_DATA",{value:ye(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=Ge(e,"data"),i=pl.getBuiltinCallException("call",t,n);if(i.message.startsWith("execution reverted (unknown custom error)")){const u=ye(n.slice(0,4)),l=this.getError(u);if(l)try{const f=P(this,Er).decode(l.inputs,n.slice(4));i.revert={name:l.name,signature:l.format(),args:f},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch{i.message="execution reverted (coult not decode custom error)"}}const c=this.parseTransaction(t);return c&&(i.invocation={method:c.name,signature:c.signature,args:c.args}),i}encodeFunctionResult(e,t){if(typeof e=="string"){const n=this.getFunction(e);j(n,"unknown function","fragment",e),e=n}return ye(P(this,Er).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){const o=this.getEvent(e);j(o,"unknown event","eventFragment",e),e=o}le(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const i=(o,c)=>o.type==="string"?sa(c):o.type==="bytes"?Jt(ye(c)):(o.type==="bool"&&typeof c=="boolean"?c=c?"0x01":"0x00":o.type.match(/^u?int/)?c=Zs(c):o.type.match(/^bytes/)?c=rC(c,32):o.type==="address"&&P(this,Er).encode(["address"],[c]),ls(ye(c),32));for(t.forEach((o,c)=>{const u=e.inputs[c];if(!u.indexed){j(o==null,"cannot filter non-indexed parameters; must be null","contract."+u.name,o);return}o==null?n.push(null):u.baseType==="array"||u.baseType==="tuple"?j(!1,"filtering with tuples or arrays not supported","contract."+u.name,o):Array.isArray(o)?n.push(o.map(l=>i(u,l))):n.push(i(u,o))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){const c=this.getEvent(e);j(c,"unknown event","eventFragment",e),e=c}const n=[],i=[],o=[];return e.anonymous||n.push(e.topicHash),j(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((c,u)=>{const l=t[u];if(c.indexed)if(c.type==="string")n.push(sa(l));else if(c.type==="bytes")n.push(Jt(l));else{if(c.baseType==="tuple"||c.baseType==="array")throw new Error("not implemented");n.push(P(this,Er).encode([c.type],[l]))}else i.push(c),o.push(l)}),{data:P(this,Er).encode(i,o),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){const b=this.getEvent(e);j(b,"unknown event","eventFragment",e),e=b}if(n!=null&&!e.anonymous){const b=e.topicHash;j(vt(n[0],32)&&n[0].toLowerCase()===b,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const i=[],o=[],c=[];e.inputs.forEach((b,I)=>{b.indexed?b.type==="string"||b.type==="bytes"||b.baseType==="tuple"||b.baseType==="array"?(i.push(gr.from({type:"bytes32",name:b.name})),c.push(!0)):(i.push(b),c.push(!1)):(o.push(b),c.push(!1))});const u=n!=null?P(this,Er).decode(i,Mt(n)):null,l=P(this,Er).decode(o,t,!0),f=[],d=[];let g=0,m=0;return e.inputs.forEach((b,I)=>{let x=null;if(b.indexed)if(u==null)x=new hv(null);else if(c[I])x=new hv(u[m++]);else try{x=u[m++]}catch(B){x=B}else try{x=l[g++]}catch(B){x=B}f.push(x),d.push(b.name||null)}),Kc.fromItems(f,d)}parseTransaction(e){const t=Ge(e.data,"tx.data"),n=Ee(e.value!=null?e.value:0,"tx.value"),i=this.getFunction(ye(t.slice(0,4)));if(!i)return null;const o=P(this,Er).decode(i.inputs,t.slice(4));return new U8(i,i.selector,o,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new B8(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=ye(e),n=this.getError(Ft(t,0,4));if(!n)return null;const i=P(this,Er).decode(n.inputs,Ft(t,4));return new F8(n,n.selector,i)}static from(e){return e instanceof No?e:typeof e=="string"?new No(JSON.parse(e)):typeof e.formatJson=="function"?new No(e.formatJson()):typeof e.format=="function"?new No(e.format("json")):new No(e)}};yi=new WeakMap,mi=new WeakMap,wi=new WeakMap,Er=new WeakMap,xi=new WeakSet,Sf=function(e,t,n){if(vt(e)){const o=e.toLowerCase();for(const c of P(this,wi).values())if(o===c.selector)return c;return null}if(e.indexOf("(")===-1){const o=[];for(const[c,u]of P(this,wi))c.split("(")[0]===e&&o.push(u);if(t){const c=t.length>0?t[t.length-1]:null;let u=t.length,l=!0;Ir.isTyped(c)&&c.type==="overrides"&&(l=!1,u--);for(let f=o.length-1;f>=0;f--){const d=o[f].inputs.length;d!==u&&(!l||d!==u-1)&&o.splice(f,1)}for(let f=o.length-1;f>=0;f--){const d=o[f].inputs;for(let g=0;g<t.length;g++)if(Ir.isTyped(t[g])){if(g>=d.length){if(t[g].type==="overrides")continue;o.splice(f,1);break}if(t[g].type!==d[g].baseType){o.splice(f,1);break}}}}if(o.length===1&&t&&t.length!==o[0].inputs.length){const c=t[t.length-1];(c==null||Array.isArray(c)||typeof c!="object")&&o.splice(0,1)}if(o.length===0)return null;if(o.length>1&&n){const c=o.map(u=>JSON.stringify(u.format())).join(", ");j(!1,`ambiguous function description (i.e. matches ${c})`,"key",e)}return o[0]}const i=P(this,wi).get(_i.from(e).format());return i||null},Pf=function(e,t,n){if(vt(e)){const o=e.toLowerCase();for(const c of P(this,mi).values())if(o===c.topicHash)return c;return null}if(e.indexOf("(")===-1){const o=[];for(const[c,u]of P(this,mi))c.split("(")[0]===e&&o.push(u);if(t){for(let c=o.length-1;c>=0;c--)o[c].inputs.length<t.length&&o.splice(c,1);for(let c=o.length-1;c>=0;c--){const u=o[c].inputs;for(let l=0;l<t.length;l++)if(Ir.isTyped(t[l])&&t[l].type!==u[l].baseType){o.splice(c,1);break}}}if(o.length===0)return null;if(o.length>1&&n){const c=o.map(u=>JSON.stringify(u.format())).join(", ");j(!1,`ambiguous event description (i.e. matches ${c})`,"key",e)}return o[0]}const i=P(this,mi).get(Ai.from(e).format());return i||null};let U0=No;const I_=BigInt(0);function nc(r){return r??null}function Ht(r){return r==null?null:r.toString()}class pv{constructor(e,t,n){Q(this,"gasPrice");Q(this,"maxFeePerGas");Q(this,"maxPriorityFeePerGas");Ce(this,{gasPrice:nc(e),maxFeePerGas:nc(t),maxPriorityFeePerGas:nc(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:Ht(e),maxFeePerGas:Ht(t),maxPriorityFeePerGas:Ht(n)}}}function Kf(r){const e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=ye(r.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of t)!(i in r)||r[i]==null||(e[i]=Ee(r[i],`request.${i}`));const n="type,nonce".split(/,/);for(const i of n)!(i in r)||r[i]==null||(e[i]=Ve(r[i],`request.${i}`));return r.accessList&&(e.accessList=ha(r.accessList)),r.authorizationList&&(e.authorizationList=r.authorizationList.slice()),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),"blobVersionedHashes"in r&&r.blobVersionedHashes&&(e.blobVersionedHashes=r.blobVersionedHashes.slice()),"kzg"in r&&(e.kzg=r.kzg),"blobs"in r&&r.blobs&&(e.blobs=r.blobs.map(i=>my(i)?ye(i):Object.assign({},i))),e}var es;class L8{constructor(e,t){Q(this,"provider");Q(this,"number");Q(this,"hash");Q(this,"timestamp");Q(this,"parentHash");Q(this,"parentBeaconBlockRoot");Q(this,"nonce");Q(this,"difficulty");Q(this,"gasLimit");Q(this,"gasUsed");Q(this,"stateRoot");Q(this,"receiptsRoot");Q(this,"blobGasUsed");Q(this,"excessBlobGas");Q(this,"miner");Q(this,"prevRandao");Q(this,"extraData");Q(this,"baseFeePerGas");J(this,es);F(this,es,e.transactions.map(n=>typeof n!="string"?new gl(n,t):n)),Ce(this,{provider:t,hash:nc(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:nc(e.prevRandao),extraData:e.extraData,baseFeePerGas:nc(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return P(this,es).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=P(this,es).slice();return e.length===0?[]:(le(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:i,gasUsed:o,hash:c,miner:u,prevRandao:l,nonce:f,number:d,parentHash:g,parentBeaconBlockRoot:m,stateRoot:b,receiptsRoot:I,timestamp:x,transactions:B}=this;return{_type:"Block",baseFeePerGas:Ht(e),difficulty:Ht(t),extraData:n,gasLimit:Ht(i),gasUsed:Ht(o),blobGasUsed:Ht(this.blobGasUsed),excessBlobGas:Ht(this.excessBlobGas),hash:c,miner:u,prevRandao:l,nonce:f,number:d,parentHash:g,timestamp:x,parentBeaconBlockRoot:m,stateRoot:b,receiptsRoot:I,transactions:B}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return P(this,es).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=P(this,es)[e];else{const n=e.toLowerCase();for(const i of P(this,es))if(typeof i=="string"){if(i!==n)continue;t=i;break}else{if(i.hash!==n)continue;t=i;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;j(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return M8(this)}}es=new WeakMap;class Rl{constructor(e,t){Q(this,"provider");Q(this,"transactionHash");Q(this,"blockHash");Q(this,"blockNumber");Q(this,"removed");Q(this,"address");Q(this,"data");Q(this,"topics");Q(this,"index");Q(this,"transactionIndex");this.provider=t;const n=Object.freeze(e.topics.slice());Ce(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:i,index:o,removed:c,topics:u,transactionHash:l,transactionIndex:f}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:i,index:o,removed:c,topics:u,transactionHash:l,transactionIndex:f}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return le(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return le(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return le(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return k8(this)}}var _l;class x_{constructor(e,t){Q(this,"provider");Q(this,"to");Q(this,"from");Q(this,"contractAddress");Q(this,"hash");Q(this,"index");Q(this,"blockHash");Q(this,"blockNumber");Q(this,"logsBloom");Q(this,"gasUsed");Q(this,"blobGasUsed");Q(this,"cumulativeGasUsed");Q(this,"gasPrice");Q(this,"blobGasPrice");Q(this,"type");Q(this,"status");Q(this,"root");J(this,_l);F(this,_l,Object.freeze(e.logs.map(i=>new Rl(i,t))));let n=I_;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),Ce(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return P(this,_l)}toJSON(){const{to:e,from:t,contractAddress:n,hash:i,index:o,blockHash:c,blockNumber:u,logsBloom:l,logs:f,status:d,root:g}=this;return{_type:"TransactionReceipt",blockHash:c,blockNumber:u,contractAddress:n,cumulativeGasUsed:Ht(this.cumulativeGasUsed),from:t,gasPrice:Ht(this.gasPrice),blobGasUsed:Ht(this.blobGasUsed),blobGasPrice:Ht(this.blobGasPrice),gasUsed:Ht(this.gasUsed),hash:i,index:o,logs:f,logsBloom:l,root:g,status:d,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return P_(this)}reorderedEvent(e){return le(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),S_(this,e)}}_l=new WeakMap;var ks;const dm=class dm{constructor(e,t){Q(this,"provider");Q(this,"blockNumber");Q(this,"blockHash");Q(this,"index");Q(this,"hash");Q(this,"type");Q(this,"to");Q(this,"from");Q(this,"nonce");Q(this,"gasLimit");Q(this,"gasPrice");Q(this,"maxPriorityFeePerGas");Q(this,"maxFeePerGas");Q(this,"maxFeePerBlobGas");Q(this,"data");Q(this,"value");Q(this,"chainId");Q(this,"signature");Q(this,"accessList");Q(this,"blobVersionedHashes");Q(this,"authorizationList");J(this,ks);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,F(this,ks,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:i,type:o,to:c,from:u,nonce:l,data:f,signature:d,accessList:g,blobVersionedHashes:m}=this;return{_type:"TransactionResponse",accessList:g,blockNumber:e,blockHash:t,blobVersionedHashes:m,chainId:Ht(this.chainId),data:f,from:u,gasLimit:Ht(this.gasLimit),gasPrice:Ht(this.gasPrice),hash:i,maxFeePerGas:Ht(this.maxFeePerGas),maxPriorityFeePerGas:Ht(this.maxPriorityFeePerGas),maxFeePerBlobGas:Ht(this.maxFeePerBlobGas),nonce:l,signature:d,to:c,index:n,type:o,value:Ht(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;const t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:t,blockNumber:n}=await Cr({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=e??1,i=t??0;let o=P(this,ks),c=-1,u=o===-1;const l=async()=>{if(u)return null;const{blockNumber:m,nonce:b}=await Cr({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(b<this.nonce){o=m;return}if(u)return null;const I=await this.getTransaction();if(!(I&&I.blockNumber!=null))for(c===-1&&(c=o-3,c<P(this,ks)&&(c=P(this,ks)));c<=m;){if(u)return null;const x=await this.provider.getBlock(c,!0);if(x==null)return;for(const B of x)if(B===this.hash)return;for(let B=0;B<x.length;B++){const M=await x.getTransaction(B);if(M.from===this.from&&M.nonce===this.nonce){if(u)return null;const R=await this.provider.getTransactionReceipt(M.hash);if(R==null||m-R.blockNumber+1<n)return;let C="replaced";M.data===this.data&&M.to===this.to&&M.value===this.value?C="repriced":M.data==="0x"&&M.from===M.to&&M.value===I_&&(C="cancelled"),le(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:C==="replaced"||C==="cancelled",reason:C,replacement:M.replaceableTransaction(o),hash:M.hash,receipt:R})}}c++}},f=m=>{if(m==null||m.status!==0)return m;le(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},d=await this.provider.getTransactionReceipt(this.hash);if(n===0)return f(d);if(d){if(n===1||await d.confirmations()>=n)return f(d)}else if(await l(),n===0)return null;return await new Promise((m,b)=>{const I=[],x=()=>{I.forEach(M=>M())};if(I.push(()=>{u=!0}),i>0){const M=setTimeout(()=>{x(),b(St("wait for transaction timeout","TIMEOUT"))},i);I.push(()=>{clearTimeout(M)})}const B=async M=>{if(await M.confirmations()>=n){x();try{m(f(M))}catch(R){b(R)}}};if(I.push(()=>{this.provider.off(this.hash,B)}),this.provider.on(this.hash,B),o>=0){const M=async()=>{try{await l()}catch(R){if(pr(R,"TRANSACTION_REPLACED")){x(),b(R);return}}u||this.provider.once("block",M)};I.push(()=>{this.provider.off("block",M)}),this.provider.once("block",M)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return le(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),P_(this)}reorderedEvent(e){return le(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),le(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),S_(this,e)}replaceableTransaction(e){j(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new dm(this,this.provider);return F(t,ks,e),t}};ks=new WeakMap;let gl=dm;function M8(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function S_(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function P_(r){return{orphan:"drop-transaction",tx:r}}function k8(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}class Ny extends Rl{constructor(t,n,i){super(t,t.provider);Q(this,"interface");Q(this,"fragment");Q(this,"args");const o=n.decodeEventLog(i,t.data,t.topics);Ce(this,{args:o,fragment:i,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class D_ extends Rl{constructor(t,n){super(t,t.provider);Q(this,"error");Ce(this,{error:n})}}var Rc;class $8 extends x_{constructor(t,n,i){super(i,n);J(this,Rc);F(this,Rc,t)}get logs(){return super.logs.map(t=>{const n=t.topics.length?P(this,Rc).getEvent(t.topics[0]):null;if(n)try{return new Ny(t,P(this,Rc),n)}catch(i){return new D_(t,i)}return t})}}Rc=new WeakMap;var Il;class Ry extends gl{constructor(t,n,i){super(i,n);J(this,Il);F(this,Il,t)}async wait(t,n){const i=await super.wait(t,n);return i==null?null:new $8(P(this,Il),this.provider,i)}}Il=new WeakMap;class O_ extends tA{constructor(t,n,i,o){super(t,n,i);Q(this,"log");Ce(this,{log:o})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class j8 extends O_{constructor(e,t,n,i,o){super(e,t,n,new Ny(o,e.interface,i));const c=e.interface.decodeEventLog(i,this.log.data,this.log.topics);Ce(this,{args:c,fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const gv=BigInt(0);function C_(r){return r&&typeof r.call=="function"}function N_(r){return r&&typeof r.estimateGas=="function"}function Ad(r){return r&&typeof r.resolveName=="function"}function R_(r){return r&&typeof r.sendTransaction=="function"}function T_(r){if(r!=null){if(Ad(r))return r;if(r.provider)return r.provider}}var xl;class H8{constructor(e,t,n){J(this,xl);Q(this,"fragment");if(Ce(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const i=ca(e.runner,"resolveName"),o=Ad(i)?i:null;F(this,xl,async function(){const c=await Promise.all(t.inputs.map((u,l)=>n[l]==null?null:u.walkAsync(n[l],(d,g)=>d==="address"?Array.isArray(g)?Promise.all(g.map(m=>Br(m,o))):Br(g,o):g)));return e.interface.encodeFilterTopics(t,c)}())}getTopicFilter(){return P(this,xl)}}xl=new WeakMap;function ca(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function Uo(r){return r==null?null:r.provider||null}async function B_(r,e){const t=Ir.dereference(r,"overrides");j(typeof t=="object","invalid overrides parameter","overrides",r);const n=Kf(t);return j(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),j(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function z8(r,e,t){const n=ca(r,"resolveName"),i=Ad(n)?n:null;return await Promise.all(e.map((o,c)=>o.walkAsync(t[c],(u,l)=>(l=Ir.dereference(l,u),u==="address"?Br(l,i):l))))}function G8(r){const e=async function(c){const u=await B_(c,["data"]);u.to=await r.getAddress(),u.from&&(u.from=await Br(u.from,T_(r.runner)));const l=r.interface,f=Ee(u.value||gv,"overrides.value")===gv,d=(u.data||"0x")==="0x";l.fallback&&!l.fallback.payable&&l.receive&&!d&&!f&&j(!1,"cannot send data to receive or send value to non-payable fallback","overrides",c),j(l.fallback||d,"cannot send data to receive-only contract","overrides.data",u.data);const g=l.receive||l.fallback&&l.fallback.payable;return j(g||f,"cannot send value to non-payable fallback","overrides.value",u.value),j(l.fallback||d,"cannot send data to receive-only contract","overrides.data",u.data),u},t=async function(c){const u=ca(r.runner,"call");le(C_(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const l=await e(c);try{return await u.call(l)}catch(f){throw yy(f)&&f.data?r.interface.makeError(f.data,l):f}},n=async function(c){const u=r.runner;le(R_(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const l=await u.sendTransaction(await e(c)),f=Uo(r.runner);return new Ry(r.interface,f,l)},i=async function(c){const u=ca(r.runner,"estimateGas");return le(N_(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await e(c))},o=async c=>await n(c);return Ce(o,{_contract:r,estimateGas:i,populateTransaction:e,send:n,staticCall:t}),o}function q8(r,e){const t=function(...f){const d=r.interface.getFunction(e,f);return le(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:f}}),d},n=async function(...f){const d=t(...f);let g={};if(d.inputs.length+1===f.length&&(g=await B_(f.pop()),g.from&&(g.from=await Br(g.from,T_(r.runner)))),d.inputs.length!==f.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const m=await z8(r.runner,d.inputs,f);return Object.assign({},g,await Cr({to:r.getAddress(),data:r.interface.encodeFunctionData(d,m)}))},i=async function(...f){const d=await u(...f);return d.length===1?d[0]:d},o=async function(...f){const d=r.runner;le(R_(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const g=await d.sendTransaction(await n(...f)),m=Uo(r.runner);return new Ry(r.interface,m,g)},c=async function(...f){const d=ca(r.runner,"estimateGas");return le(N_(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await n(...f))},u=async function(...f){const d=ca(r.runner,"call");le(C_(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const g=await n(...f);let m="0x";try{m=await d.call(g)}catch(I){throw yy(I)&&I.data?r.interface.makeError(I.data,g):I}const b=t(...f);return r.interface.decodeFunctionResult(b,m)},l=async(...f)=>t(...f).constant?await i(...f):await o(...f);return Ce(l,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:c,populateTransaction:n,send:o,staticCall:i,staticCallResult:u}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{const f=r.interface.getFunction(e);return le(f,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),f}}),l}function V8(r,e){const t=function(...i){const o=r.interface.getEvent(e,i);return le(o,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:i}}),o},n=function(...i){return new H8(r,t(...i),i)};return Ce(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const i=r.interface.getEvent(e);return le(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),i}}),n}const Qf=Symbol.for("_ethersInternal_contract"),U_=new WeakMap;function K8(r,e){U_.set(r[Qf],e)}function cn(r){return U_.get(r[Qf])}function Q8(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function Ty(r,e){let t,n=null;if(Array.isArray(e)){const o=function(c){if(vt(c,32))return c;const u=r.interface.getEvent(c);return j(u,"unknown fragment","name",c),u.topicHash};t=e.map(c=>c==null?null:Array.isArray(c)?c.map(o):o(c))}else e==="*"?t=[null]:typeof e=="string"?vt(e,32)?t=[e]:(n=r.interface.getEvent(e),j(n,"unknown fragment","event",e),t=[n.topicHash]):Q8(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):j(!1,"unknown event name","event",e);t=t.map(o=>{if(o==null)return null;if(Array.isArray(o)){const c=Array.from(new Set(o.map(u=>u.toLowerCase())).values());return c.length===1?c[0]:(c.sort(),c)}return o.toLowerCase()});const i=t.map(o=>o==null?"null":Array.isArray(o)?o.join("|"):o).join("&");return{fragment:n,tag:i,topics:t}}async function Yu(r,e){const{subs:t}=cn(r);return t.get((await Ty(r,e)).tag)||null}async function yv(r,e,t){const n=Uo(r.runner);le(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:i,tag:o,topics:c}=await Ty(r,t),{addr:u,subs:l}=cn(r);let f=l.get(o);if(!f){const g={address:u||r,topics:c},m=B=>{let M=i;if(M==null)try{M=r.interface.getEvent(B.topics[0])}catch{}if(M){const R=M,C=i?r.interface.decodeEventLog(i,B.data,B.topics):[];L0(r,t,C,S=>new j8(r,S,t,R,B))}else L0(r,t,[],R=>new O_(r,R,t,B))};let b=[];f={tag:o,listeners:[],start:()=>{b.length||b.push(n.on(g,m))},stop:async()=>{if(b.length==0)return;let B=b;b=[],await Promise.all(B),n.off(g,m)}},l.set(o,f)}return f}let F0=Promise.resolve();async function W8(r,e,t,n){await F0;const i=await Yu(r,e);if(!i)return!1;const o=i.listeners.length;return i.listeners=i.listeners.filter(({listener:c,once:u})=>{const l=Array.from(t);n&&l.push(n(u?null:c));try{c.call(r,...l)}catch{}return!u}),i.listeners.length===0&&(i.stop(),cn(r).subs.delete(i.tag)),o>0}async function L0(r,e,t,n){try{await F0}catch{}const i=W8(r,e,t,n);return F0=i,await i}const af=["then"];var JE;JE=Qf;const sl=class sl{constructor(e,t,n,i){Q(this,"target");Q(this,"interface");Q(this,"runner");Q(this,"filters");Q(this,JE);Q(this,"fallback");j(typeof e=="string"||$A(e),"invalid value for Contract target","target",e),n==null&&(n=null);const o=U0.from(t);Ce(this,{target:e,runner:n,interface:o}),Object.defineProperty(this,Qf,{value:{}});let c,u=null,l=null;if(i){const g=Uo(n);l=new Ry(this.interface,g,i)}let f=new Map;if(typeof e=="string")if(vt(e))u=e,c=Promise.resolve(e);else{const g=ca(n,"resolveName");if(!Ad(g))throw St("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});c=g.resolveName(e).then(m=>{if(m==null)throw St("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return cn(this).addr=m,m})}else c=e.getAddress().then(g=>{if(g==null)throw new Error("TODO");return cn(this).addr=g,g});K8(this,{addrPromise:c,addr:u,deployTx:l,subs:f});const d=new Proxy({},{get:(g,m,b)=>{if(typeof m=="symbol"||af.indexOf(m)>=0)return Reflect.get(g,m,b);try{return this.getEvent(m)}catch(I){if(!pr(I,"INVALID_ARGUMENT")||I.argument!=="key")throw I}},has:(g,m)=>af.indexOf(m)>=0?Reflect.has(g,m):Reflect.has(g,m)||this.interface.hasEvent(String(m))});return Ce(this,{filters:d}),Ce(this,{fallback:o.receive||o.fallback?G8(this):null}),new Proxy(this,{get:(g,m,b)=>{if(typeof m=="symbol"||m in g||af.indexOf(m)>=0)return Reflect.get(g,m,b);try{return g.getFunction(m)}catch(I){if(!pr(I,"INVALID_ARGUMENT")||I.argument!=="key")throw I}},has:(g,m)=>typeof m=="symbol"||m in g||af.indexOf(m)>=0?Reflect.has(g,m):g.interface.hasFunction(m)})}connect(e){return new sl(this.target,this.interface,e)}attach(e){return new sl(e,this.interface,this.runner)}async getAddress(){return await cn(this).addrPromise}async getDeployedCode(){const e=Uo(this.runner);le(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=Uo(this.runner);return le(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((i,o)=>{const c=async()=>{try{if(await this.getDeployedCode()!=null)return i(this);n.once("block",c)}catch(u){o(u)}};c()})}deploymentTransaction(){return cn(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),q8(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),V8(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");const{addr:i,addrPromise:o}=cn(this),c=i||await o,{fragment:u,topics:l}=await Ty(this,e),f={address:c,topics:l,fromBlock:t,toBlock:n},d=Uo(this.runner);return le(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(f)).map(g=>{let m=u;if(m==null)try{m=this.interface.getEvent(g.topics[0])}catch{}if(m)try{return new Ny(g,this.interface,m)}catch(b){return new D_(g,b)}return new Rl(g,d)})}async on(e,t){const n=await yv(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await yv(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await L0(this,e,t,null)}async listenerCount(e){if(e){const i=await Yu(this,e);return i?i.listeners.length:0}const{subs:t}=cn(this);let n=0;for(const{listeners:i}of t.values())n+=i.length;return n}async listeners(e){if(e){const i=await Yu(this,e);return i?i.listeners.map(({listener:o})=>o):[]}const{subs:t}=cn(this);let n=[];for(const{listeners:i}of t.values())n=n.concat(i.map(({listener:o})=>o));return n}async off(e,t){const n=await Yu(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:o})=>o).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(t==null||n.listeners.length===0)&&(n.stop(),cn(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await Yu(this,e);if(!t)return this;t.stop(),cn(this).subs.delete(t.tag)}else{const{subs:t}=cn(this);for(const{tag:n,stop:i}of t.values())i(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends sl{constructor(i,o=null){super(i,e,o)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};let M0=sl;function J8(){return M0}class nl extends J8(){}function Ig(r){return r.match(/^ipfs:\/\/ipfs\//i)?r=r.substring(12):r.match(/^ipfs:\/\//i)?r=r.substring(7):j(!1,"unsupported IPFS format","link",r),`https://gateway.ipfs.io/ipfs/${r}`}class Y8{constructor(e){Q(this,"name");Ce(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const F_=new RegExp("^(ipfs)://(.*)$","i"),mv=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),F_,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var $s,Wo,js,Qa,ad,L_;const Xa=class Xa{constructor(e,t,n){J(this,js);Q(this,"provider");Q(this,"address");Q(this,"name");J(this,$s);J(this,Wo);Ce(this,{provider:e,address:t,name:n}),F(this,$s,null),F(this,Wo,new nl(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return P(this,$s)==null&&F(this,$s,(async()=>{try{return await P(this,Wo).supportsInterface("0x9061b923")}catch(e){if(pr(e,"CALL_EXCEPTION"))return!1;throw F(this,$s,null),e}})()),await P(this,$s)}async getAddress(e){if(e==null&&(e=60),e===60)try{const o=await de(this,js,Qa).call(this,"addr(bytes32)");return o==null||o===al?null:o}catch(o){if(pr(o,"CALL_EXCEPTION"))return null;throw o}if(e>=0&&e<2147483648){let o=e+2147483648;const c=await de(this,js,Qa).call(this,"addr(bytes32,uint)",[o]);if(vt(c,20))return st(c)}let t=null;for(const o of this.provider.plugins)if(o instanceof Y8&&o.supportsCoinType(e)){t=o;break}if(t==null)return null;const n=await de(this,js,Qa).call(this,"addr(bytes32,uint)",[e]);if(n==null||n==="0x")return null;const i=await t.decodeAddress(e,n);if(i!=null)return i;le(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:n}})}async getText(e){const t=await de(this,js,Qa).call(this,"text(bytes32,string)",[e]);return t==null||t==="0x"?null:t}async getContentHash(){const e=await de(this,js,Qa).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const i=t[1]==="e3010170"?"ipfs":"ipns",o=parseInt(t[4],16);if(t[5].length===o*2)return`${i}://${sC("0x"+t[2])}`}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;le(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const t=await this.getText("avatar");if(t==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let n=0;n<mv.length;n++){const i=t.match(mv[n]);if(i==null)continue;const o=i[1].toLowerCase();switch(o){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{const c=Ig(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:c}),{linkage:e,url:c}}case"erc721":case"erc1155":{const c=o==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:o,value:t});const u=await this.getAddress();if(u==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const l=(i[2]||"").split("/");if(l.length!==2)return e.push({type:`!${o}caip`,value:i[2]||""}),{url:null,linkage:e};const f=l[1],d=new nl(l[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(o==="erc721"){const x=await d.ownerOf(f);if(u!==x)return e.push({type:"!owner",value:x}),{url:null,linkage:e};e.push({type:"owner",value:x})}else if(o==="erc1155"){const x=await d.balanceOf(u,f);if(!x)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:x.toString()})}let g=await d[c](f);if(g==null||g==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:g}),o==="erc1155"&&(g=g.replace("{id}",Zs(f,32).substring(2)),e.push({type:"metadata-url-expanded",value:g})),g.match(/^ipfs:/i)&&(g=Ig(g)),e.push({type:"metadata-url",value:g});let m={};const b=await new Xs(g).send();b.assertOk();try{m=b.bodyJson}catch{try{e.push({type:"!metadata",value:b.bodyText})}catch{const M=b.body;return M&&e.push({type:"!metadata",value:ye(M)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!m)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(m)});let I=m.image;if(typeof I!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!I.match(/^(https:\/\/|data:)/i)){if(I.match(F_)==null)return e.push({type:"!imageUrl-ipfs",value:I}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:I}),I=Ig(I)}return e.push({type:"url",value:I}),{linkage:e,url:I}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return le(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){var i;let n=t;for(;;){if(n===""||n==="."||t!=="eth"&&n==="eth")return null;const o=await de(i=Xa,ad,L_).call(i,e,n);if(o!=null){const c=new Xa(e,o,t);return n!==t&&!await c.supportsWildcard()?null:c}n=n.split(".").slice(1).join(".")}}};$s=new WeakMap,Wo=new WeakMap,js=new WeakSet,Qa=async function(e,t){t=(t||[]).slice();const n=P(this,Wo).interface;t.unshift(T0(this.name));let i=null;await this.supportsWildcard()&&(i=n.getFunction(e),le(i,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[f8(this.name,255),n.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const o=await P(this,Wo)[e](...t);return i?n.decodeFunctionResult(i,o)[0]:o}catch(o){if(!pr(o,"CALL_EXCEPTION"))throw o}return null},ad=new WeakSet,L_=async function(e,t){const n=await Xa.getEnsAddress(e);try{const o=await new nl(n,["function resolver(bytes32) view returns (address)"],e).resolver(T0(t),{enableCcipRead:!0});return o===al?null:o}catch(i){throw i}return null},J(Xa,ad);let Wf=Xa;const wv=BigInt(0);function Ye(r,e){return function(t){return t==null?e:r(t)}}function yl(r,e){return t=>{if(e&&t==null)return null;if(!Array.isArray(t))throw new Error("not an array");return t.map(n=>r(n))}}function Tl(r,e){return t=>{const n={};for(const i in r){let o=i;if(e&&i in e&&!(o in t)){for(const c of e[i])if(c in t){o=c;break}}try{const c=r[i](t[o]);c!==void 0&&(n[i]=c)}catch(c){const u=c instanceof Error?c.message:"not-an-error";le(!1,`invalid value for value.${i} (${u})`,"BAD_DATA",{value:t})}}return n}}function Z8(r){switch(r){case!0:case"true":return!0;case!1:case"false":return!1}j(!1,`invalid boolean; ${JSON.stringify(r)}`,"value",r)}function eu(r){return j(vt(r,!0),"invalid data","value",r),r}function dr(r){return j(vt(r,32),"invalid hash","value",r),r}const X8=Tl({address:st,blockHash:dr,blockNumber:Ve,data:eu,index:Ve,removed:Ye(Z8,!1),topics:yl(dr),transactionHash:dr,transactionIndex:Ve},{index:["logIndex"]});function eT(r){return X8(r)}const tT=Tl({hash:Ye(dr),parentHash:dr,parentBeaconBlockRoot:Ye(dr,null),number:Ve,timestamp:Ve,nonce:Ye(eu),difficulty:Ee,gasLimit:Ee,gasUsed:Ee,stateRoot:Ye(dr,null),receiptsRoot:Ye(dr,null),blobGasUsed:Ye(Ee,null),excessBlobGas:Ye(Ee,null),miner:Ye(st),prevRandao:Ye(dr,null),extraData:eu,baseFeePerGas:Ye(Ee)},{prevRandao:["mixHash"]});function rT(r){const e=tT(r);return e.transactions=r.transactions.map(t=>typeof t=="string"?t:M_(t)),e}const nT=Tl({transactionIndex:Ve,blockNumber:Ve,transactionHash:dr,address:st,topics:yl(dr),data:eu,index:Ve,blockHash:dr},{index:["logIndex"]});function iT(r){return nT(r)}const sT=Tl({to:Ye(st,null),from:Ye(st,null),contractAddress:Ye(st,null),index:Ve,root:Ye(ye),gasUsed:Ee,blobGasUsed:Ye(Ee,null),logsBloom:Ye(eu),blockHash:dr,hash:dr,logs:yl(iT),blockNumber:Ve,cumulativeGasUsed:Ee,effectiveGasPrice:Ye(Ee),blobGasPrice:Ye(Ee,null),status:Ye(Ve),type:Ye(Ve,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function oT(r){return sT(r)}function M_(r){r.to&&Ee(r.to)===wv&&(r.to="0x0000000000000000000000000000000000000000");const e=Tl({hash:dr,index:Ye(Ve,void 0),type:t=>t==="0x"||t==null?0:Ve(t),accessList:Ye(ha,null),blobVersionedHashes:Ye(yl(dr,!0),null),authorizationList:Ye(yl(t=>{let n;if(t.signature)n=t.signature;else{let i=t.yParity;i==="0x1b"?i=0:i==="0x1c"&&(i=1),n=Object.assign({},t,{yParity:i})}return{address:st(t.address),chainId:Ee(t.chainId),nonce:Ee(t.nonce),signature:Yr.from(n)}},!1),null),blockHash:Ye(dr,null),blockNumber:Ye(Ve,null),transactionIndex:Ye(Ve,null),from:st,gasPrice:Ye(Ee),maxPriorityFeePerGas:Ye(Ee),maxFeePerGas:Ye(Ee),maxFeePerBlobGas:Ye(Ee,null),gasLimit:Ee,to:Ye(st,null),value:Ee,nonce:Ve,data:eu,creates:Ye(st,null),chainId:Ye(Ee,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(r);if(e.to==null&&e.creates==null&&(e.creates=QN(e)),(r.type===1||r.type===2)&&r.accessList==null&&(e.accessList=[]),r.signature?e.signature=Yr.from(r.signature):e.signature=Yr.from(r),e.chainId==null){const t=e.signature.legacyChainId;t!=null&&(e.chainId=t)}return e.blockHash&&Ee(e.blockHash)===wv&&(e.blockHash=null),e}const aT="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Bl{constructor(e){Q(this,"name");Ce(this,{name:e})}clone(){return new Bl(this.name)}}class _d extends Bl{constructor(t,n){t==null&&(t=0);super(`org.ethers.network.plugins.GasCost#${t||0}`);Q(this,"effectiveBlock");Q(this,"txBase");Q(this,"txCreate");Q(this,"txDataZero");Q(this,"txDataNonzero");Q(this,"txAccessListStorageKey");Q(this,"txAccessListAddress");const i={effectiveBlock:t};function o(c,u){let l=(n||{})[c];l==null&&(l=u),j(typeof l=="number",`invalud value for ${c}`,"costs",n),i[c]=l}o("txBase",21e3),o("txCreate",32e3),o("txDataZero",4),o("txDataNonzero",16),o("txAccessListStorageKey",1900),o("txAccessListAddress",2400),Ce(this,i)}clone(){return new _d(this.effectiveBlock,this)}}class Id extends Bl{constructor(t,n){super("org.ethers.plugins.network.Ens");Q(this,"address");Q(this,"targetNetwork");Ce(this,{address:t||aT,targetNetwork:n??1})}clone(){return new Id(this.address,this.targetNetwork)}}var Sl,Pl;class cT extends Bl{constructor(t,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");J(this,Sl);J(this,Pl);F(this,Sl,t),F(this,Pl,n)}get url(){return P(this,Sl)}get processFunc(){return P(this,Pl)}clone(){return this}}Sl=new WeakMap,Pl=new WeakMap;const xg=new Map;var Tc,Bc,Hs;const ec=class ec{constructor(e,t){J(this,Tc);J(this,Bc);J(this,Hs);F(this,Tc,e),F(this,Bc,Ee(t)),F(this,Hs,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return P(this,Tc)}set name(e){F(this,Tc,e)}get chainId(){return P(this,Bc)}set chainId(e){F(this,Bc,Ee(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ee(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ee(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ee(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(P(this,Hs).values())}attachPlugin(e){if(P(this,Hs).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return P(this,Hs).set(e.name,e.clone()),this}getPlugin(e){return P(this,Hs).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new ec(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new _d;let n=t.txBase;if(e.to==null&&(n+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)e.data.substring(i,i+2)==="00"?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const i=ha(e.accessList);for(const o in i)n+=t.txAccessListAddress+t.txAccessListStorageKey*i[o].storageKeys.length}return n}static from(e){if(uT(),e==null)return ec.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const t=xg.get(e);if(t)return t();if(typeof e=="bigint")return new ec("unknown",e);j(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){j(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const t=new ec(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&t.attachPlugin(new Id(e.ensAddress,e.ensNetwork)),t}j(!1,"invalid network","network",e)}static register(e,t){typeof e=="number"&&(e=BigInt(e));const n=xg.get(e);n&&j(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",e),xg.set(e,t)}};Tc=new WeakMap,Bc=new WeakMap,Hs=new WeakMap;let Ii=ec;function bv(r,e){const t=String(r);if(!t.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${r}`);const n=t.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${r}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let i=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||i++,n[1]=i.toString()}return BigInt(n[0]+n[1])}function vv(r){return new cT(r,async(e,t,n)=>{n.setHeader("User-Agent","ethers");let i;try{const[o,c]=await Promise.all([n.send(),e()]);i=o;const u=i.bodyJson.standard;return{gasPrice:c.gasPrice,maxFeePerGas:bv(u.maxFee,9),maxPriorityFeePerGas:bv(u.maxPriorityFee,9)}}catch(o){le(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:i,error:o})}})}let Ev=!1;function uT(){if(Ev)return;Ev=!0;function r(e,t,n){const i=function(){const o=new Ii(e,t);return n.ensNetwork!=null&&o.attachPlugin(new Id(null,n.ensNetwork)),o.attachPlugin(new _d),(n.plugins||[]).forEach(c=>{o.attachPlugin(c)}),o};Ii.register(e,i),Ii.register(t,i),n.altNames&&n.altNames.forEach(o=>{Ii.register(o,i)})}r("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),r("ropsten",3,{ensNetwork:3}),r("rinkeby",4,{ensNetwork:4}),r("goerli",5,{ensNetwork:5}),r("kovan",42,{ensNetwork:42}),r("sepolia",11155111,{ensNetwork:11155111}),r("holesky",17e3,{ensNetwork:17e3}),r("classic",61,{}),r("classicKotti",6,{}),r("arbitrum",42161,{ensNetwork:1}),r("arbitrum-goerli",421613,{}),r("arbitrum-sepolia",421614,{}),r("base",8453,{ensNetwork:1}),r("base-goerli",84531,{}),r("base-sepolia",84532,{}),r("bnb",56,{ensNetwork:1}),r("bnbt",97,{}),r("linea",59144,{ensNetwork:1}),r("linea-goerli",59140,{}),r("linea-sepolia",59141,{}),r("matic",137,{ensNetwork:1,plugins:[vv("https://gasstation.polygon.technology/v2")]}),r("matic-amoy",80002,{}),r("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[vv("https://gasstation-testnet.polygon.technology/v2")]}),r("optimism",10,{ensNetwork:1,plugins:[]}),r("optimism-goerli",420,{}),r("optimism-sepolia",11155420,{}),r("xdai",100,{ensNetwork:1})}function k0(r){return JSON.parse(JSON.stringify(r))}var ts,On,zs,bi,Uc,Df;class lT{constructor(e){J(this,Uc);J(this,ts);J(this,On);J(this,zs);J(this,bi);F(this,ts,e),F(this,On,null),F(this,zs,4e3),F(this,bi,-2)}get pollingInterval(){return P(this,zs)}set pollingInterval(e){F(this,zs,e)}start(){P(this,On)||(F(this,On,P(this,ts)._setTimeout(de(this,Uc,Df).bind(this),P(this,zs))),de(this,Uc,Df).call(this))}stop(){P(this,On)&&(P(this,ts)._clearTimeout(P(this,On)),F(this,On,null))}pause(e){this.stop(),e&&F(this,bi,-2)}resume(){this.start()}}ts=new WeakMap,On=new WeakMap,zs=new WeakMap,bi=new WeakMap,Uc=new WeakSet,Df=async function(){try{const e=await P(this,ts).getBlockNumber();if(P(this,bi)===-2){F(this,bi,e);return}if(e!==P(this,bi)){for(let t=P(this,bi)+1;t<=e;t++){if(P(this,On)==null)return;await P(this,ts).emit("block",t)}F(this,bi,e)}}catch{}P(this,On)!=null&&F(this,On,P(this,ts)._setTimeout(de(this,Uc,Df).bind(this),P(this,zs)))};var Jo,Yo,Gs;class By{constructor(e){J(this,Jo);J(this,Yo);J(this,Gs);F(this,Jo,e),F(this,Gs,!1),F(this,Yo,t=>{this._poll(t,P(this,Jo))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){P(this,Gs)||(F(this,Gs,!0),P(this,Yo).call(this,-2),P(this,Jo).on("block",P(this,Yo)))}stop(){P(this,Gs)&&(F(this,Gs,!1),P(this,Jo).off("block",P(this,Yo)))}pause(e){this.stop()}resume(){this.start()}}Jo=new WeakMap,Yo=new WeakMap,Gs=new WeakMap;var Fc,rs;class hT extends By{constructor(t,n){super(t);J(this,Fc);J(this,rs);F(this,Fc,n),F(this,rs,-2)}pause(t){t&&F(this,rs,-2),super.pause(t)}async _poll(t,n){const i=await n.getBlock(P(this,Fc));i!=null&&(P(this,rs)===-2?F(this,rs,i.number):i.number>P(this,rs)&&(n.emit(P(this,Fc),i.number),F(this,rs,i.number)))}}Fc=new WeakMap,rs=new WeakMap;var cd;class fT extends By{constructor(t,n){super(t);J(this,cd);F(this,cd,k0(n))}async _poll(t,n){throw new Error("@TODO")}}cd=new WeakMap;var Lc;class dT extends By{constructor(t,n){super(t);J(this,Lc);F(this,Lc,n)}async _poll(t,n){const i=await n.getTransactionReceipt(P(this,Lc));i&&n.emit(P(this,Lc),i)}}Lc=new WeakMap;var ns,Mc,kc,qs,Cn,ud,k_;class Uy{constructor(e,t){J(this,ud);J(this,ns);J(this,Mc);J(this,kc);J(this,qs);J(this,Cn);F(this,ns,e),F(this,Mc,k0(t)),F(this,kc,de(this,ud,k_).bind(this)),F(this,qs,!1),F(this,Cn,-2)}start(){P(this,qs)||(F(this,qs,!0),P(this,Cn)===-2&&P(this,ns).getBlockNumber().then(e=>{F(this,Cn,e)}),P(this,ns).on("block",P(this,kc)))}stop(){P(this,qs)&&(F(this,qs,!1),P(this,ns).off("block",P(this,kc)))}pause(e){this.stop(),e&&F(this,Cn,-2)}resume(){this.start()}}ns=new WeakMap,Mc=new WeakMap,kc=new WeakMap,qs=new WeakMap,Cn=new WeakMap,ud=new WeakSet,k_=async function(e){if(P(this,Cn)===-2)return;const t=k0(P(this,Mc));t.fromBlock=P(this,Cn)+1,t.toBlock=e;const n=await P(this,ns).getLogs(t);if(n.length===0){P(this,Cn)<e-60&&F(this,Cn,e-60);return}for(const i of n)P(this,ns).emit(P(this,Mc),i),F(this,Cn,i.blockNumber)};const pT=BigInt(2),gT=10;function cf(r){return r&&typeof r.then=="function"}function Of(r,e){return r+":"+JSON.stringify(e,(t,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const i=Object.keys(n);return i.sort(),i.reduce((o,c)=>(o[c]=n[c],o),{})}return n})}class $_{constructor(e){Q(this,"name");Ce(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function yT(r){return JSON.parse(JSON.stringify(r))}function $0(r){return r=Array.from(new Set(r).values()),r.sort(),r}async function Sg(r,e){if(r==null)throw new Error("invalid event");if(Array.isArray(r)&&(r={topics:r}),typeof r=="string")switch(r){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:r,tag:r}}if(vt(r,32)){const t=r.toLowerCase();return{type:"transaction",tag:Of("tx",{hash:t}),hash:t}}if(r.orphan){const t=r;return{type:"orphan",tag:Of("orphan",t),filter:yT(t)}}if(r.address||r.topics){const t=r,n={topics:(t.topics||[]).map(i=>i==null?null:Array.isArray(i)?$0(i.map(o=>o.toLowerCase())):i.toLowerCase())};if(t.address){const i=[],o=[],c=u=>{vt(u)?i.push(u):o.push((async()=>{i.push(await Br(u,e))})())};Array.isArray(t.address)?t.address.forEach(c):c(t.address),o.length&&await Promise.all(o),n.address=$0(i.map(u=>u.toLowerCase()))}return{filter:n,tag:Of("event",n),type:"event"}}j(!1,"unknown ProviderEvent","event",r)}function Pg(){return new Date().getTime()}const mT={cacheTimeout:250,pollingInterval:4e3};var Ar,Vs,_r,$c,fn,Zo,Ks,is,Dl,Nn,jc,Hc,qe,an,j0,H0,Zu,z0,Xu,Cf;class wT{constructor(e,t){J(this,qe);J(this,Ar);J(this,Vs);J(this,_r);J(this,$c);J(this,fn);J(this,Zo);J(this,Ks);J(this,is);J(this,Dl);J(this,Nn);J(this,jc);J(this,Hc);if(F(this,Hc,Object.assign({},mT,t||{})),e==="any")F(this,Zo,!0),F(this,fn,null);else if(e){const n=Ii.from(e);F(this,Zo,!1),F(this,fn,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else F(this,Zo,!1),F(this,fn,null);F(this,is,-1),F(this,Ks,new Map),F(this,Ar,new Map),F(this,Vs,new Map),F(this,_r,null),F(this,$c,!1),F(this,Dl,1),F(this,Nn,new Map),F(this,jc,!1)}get pollingInterval(){return P(this,Hc).pollingInterval}get provider(){return this}get plugins(){return Array.from(P(this,Vs).values())}attachPlugin(e){if(P(this,Vs).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return P(this,Vs).set(e.name,e.connect(this)),this}getPlugin(e){return P(this,Vs).get(e)||null}get disableCcipRead(){return P(this,jc)}set disableCcipRead(e){F(this,jc,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||n.length===0||e.to==null)return null;const i=e.to.toLowerCase(),o=t.toLowerCase(),c=[];for(let u=0;u<n.length;u++){const l=n[u],f=l.replace("{sender}",i).replace("{data}",o),d=new Xs(f);l.indexOf("{data}")===-1&&(d.body={data:o,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:u,urls:n});let g="unknown error",m;try{m=await d.send()}catch(b){c.push(b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:{error:b}});continue}try{const b=m.bodyJson;if(b.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:b}),b.data;b.message&&(g=b.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:b})}catch{}le(m.statusCode<400||m.statusCode>=500,`response not found during CCIP fetch: ${g}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:l,errorMessage:g}}),c.push(g)}le(!1,`error encountered during CCIP fetch: ${c.map(u=>JSON.stringify(u)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:c}})}_wrapBlock(e,t){return new L8(rT(e),this)}_wrapLog(e,t){return new Rl(eT(e),this)}_wrapTransactionReceipt(e,t){return new x_(oT(e),this)}_wrapTransactionResponse(e,t){return new gl(M_(e),this)}_detectNetwork(){le(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){le(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Ve(await de(this,qe,an).call(this,{method:"getBlockNumber"}),"%response");return P(this,is)>=0&&F(this,is,e),e}_getAddress(e){return Br(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(vt(e))return vt(e,32)?e:Zn(e);if(typeof e=="bigint"&&(e=Ve(e,"blockTag")),typeof e=="number")return e>=0?Zn(e):P(this,is)>=0?Zn(P(this,is)+e):this.getBlockNumber().then(t=>Zn(t+e));j(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const t=(e.topics||[]).map(l=>l==null?null:Array.isArray(l)?$0(l.map(f=>f.toLowerCase())):l.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,i=(l,f,d)=>{let g;switch(l.length){case 0:break;case 1:g=l[0];break;default:l.sort(),g=l}if(n&&(f!=null||d!=null))throw new Error("invalid filter");const m={};return g&&(m.address=g),t.length&&(m.topics=t),f&&(m.fromBlock=f),d&&(m.toBlock=d),n&&(m.blockHash=n),m};let o=[];if(e.address)if(Array.isArray(e.address))for(const l of e.address)o.push(this._getAddress(l));else o.push(this._getAddress(e.address));let c;"fromBlock"in e&&(c=this._getBlockTag(e.fromBlock));let u;return"toBlock"in e&&(u=this._getBlockTag(e.toBlock)),o.filter(l=>typeof l!="string").length||c!=null&&typeof c!="string"||u!=null&&typeof u!="string"?Promise.all([Promise.all(o),c,u]).then(l=>i(l[0],l[1],l[2])):i(o,c,u)}_getTransactionRequest(e){const t=Kf(e),n=[];if(["to","from"].forEach(i=>{if(t[i]==null)return;const o=Br(t[i],this);cf(o)?n.push(async function(){t[i]=await o}()):t[i]=o}),t.blockTag!=null){const i=this._getBlockTag(t.blockTag);cf(i)?n.push(async function(){t.blockTag=await i}()):t.blockTag=i}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(P(this,fn)==null){const i=(async()=>{try{const o=await this._detectNetwork();return this.emit("network",o,null),o}catch(o){throw P(this,fn)===i&&F(this,fn,null),o}})();return F(this,fn,i),(await i).clone()}const e=P(this,fn),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(P(this,Zo)?(this.emit("network",n,t),P(this,fn)===e&&F(this,fn,Promise.resolve(n))):le(!1,`network changed: ${t.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:i,gasPrice:o,priorityFee:c}=await Cr({_block:de(this,qe,z0).call(this,"latest",!1),gasPrice:(async()=>{try{const d=await de(this,qe,an).call(this,{method:"getGasPrice"});return Ee(d,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const d=await de(this,qe,an).call(this,{method:"getPriorityFee"});return Ee(d,"%response")}catch{}return null})()});let u=null,l=null;const f=this._wrapBlock(i,e);return f&&f.baseFeePerGas&&(l=c??BigInt("1000000000"),u=f.baseFeePerGas*pT+l),new pv(o,u,l)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const i=new Xs(n.url),o=await n.processFunc(t,this,i);return new pv(o.gasPrice,o.maxFeePerGas,o.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return cf(t)&&(t=await t),Ee(await de(this,qe,an).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await Cr({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await de(this,qe,H0).call(this,de(this,qe,j0).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return Ee(await de(this,qe,Zu).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Ve(await de(this,qe,Zu).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return ye(await de(this,qe,Zu).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const i=Ee(t,"position");return ye(await de(this,qe,Zu).call(this,{method:"getStorage",position:i},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:i}=await Cr({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),o=$f.from(e);if(o.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(o,i).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:i}=await Cr({network:this.getNetwork(),params:de(this,qe,z0).call(this,e,!!t)});return i==null?null:this._wrapBlock(i,n)}async getTransaction(e){const{network:t,params:n}=await Cr({network:this.getNetwork(),params:de(this,qe,an).call(this,{method:"getTransaction",hash:e})});return n==null?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await Cr({network:this.getNetwork(),params:de(this,qe,an).call(this,{method:"getTransactionReceipt",hash:e})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const i=await de(this,qe,an).call(this,{method:"getTransaction",hash:e});if(i==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=i.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await Cr({network:this.getNetwork(),result:de(this,qe,an).call(this,{method:"getTransactionResult",hash:e})});return t==null?null:ye(t)}async getLogs(e){let t=this._getFilter(e);cf(t)&&(t=await t);const{network:n,params:i}=await Cr({network:this.getNetwork(),params:de(this,qe,an).call(this,{method:"getLogs",filter:t})});return i.map(o=>this._wrapLog(o,n))}_getProvider(e){le(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await Wf.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){e=st(e);const t=T0(e.substring(2).toLowerCase()+".addr.reverse");try{const n=await Wf.getEnsAddress(this),o=await new nl(n,["function resolver(bytes32) view returns (address)"],this).resolver(t);if(o==null||o===al)return null;const u=await new nl(o,["function name(bytes32) view returns (string)"],this).name(t);return await this.resolveName(u)!==e?null:u}catch(n){if(pr(n,"BAD_DATA")&&n.value==="0x"||pr(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(e,t,n){const i=t??1;return i===0?this.getTransactionReceipt(e):new Promise(async(o,c)=>{let u=null;const l=async f=>{try{const d=await this.getTransactionReceipt(e);if(d!=null&&f-d.blockNumber+1>=i){o(d),u&&(clearTimeout(u),u=null);return}}catch(d){console.log("EEE",d)}this.once("block",l)};n!=null&&(u=setTimeout(()=>{u!=null&&(u=null,this.off("block",l),c(St("timeout","TIMEOUT",{reason:"timeout"})))},n)),l(await this.getBlockNumber())})}async waitForBlock(e){le(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=P(this,Nn).get(e);t&&(t.timer&&clearTimeout(t.timer),P(this,Nn).delete(e))}_setTimeout(e,t){t==null&&(t=0);const n=Ou(this,Dl)._++,i=()=>{P(this,Nn).delete(n),e()};if(this.paused)P(this,Nn).set(n,{timer:null,func:i,time:t});else{const o=setTimeout(i,t);P(this,Nn).set(n,{timer:o,func:i,time:Pg()})}return n}_forEachSubscriber(e){for(const t of P(this,Ar).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new $_(e.type);case"block":{const t=new lT(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new hT(this,e.type);case"event":return new Uy(this,e.filter);case"transaction":return new dT(this,e.hash);case"orphan":return new fT(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(const n of P(this,Ar).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),P(this,_r)!=null&&t.pause(P(this,_r));break}}async on(e,t){const n=await de(this,qe,Cf).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,P(this,_r)!=null&&n.subscriber.pause(P(this,_r))),this}async once(e,t){const n=await de(this,qe,Cf).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,P(this,_r)!=null&&n.subscriber.pause(P(this,_r))),this}async emit(e,...t){const n=await de(this,qe,Xu).call(this,e,t);if(!n||n.listeners.length===0)return!1;const i=n.listeners.length;return n.listeners=n.listeners.filter(({listener:o,once:c})=>{const u=new tA(this,c?null:o,e);try{o.call(this,...t,u)}catch{}return!c}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),P(this,Ar).delete(n.tag)),i>0}async listenerCount(e){if(e){const n=await de(this,qe,Xu).call(this,e);return n?n.listeners.length:0}let t=0;for(const{listeners:n}of P(this,Ar).values())t+=n.length;return t}async listeners(e){if(e){const n=await de(this,qe,Xu).call(this,e);return n?n.listeners.map(({listener:i})=>i):[]}let t=[];for(const{listeners:n}of P(this,Ar).values())t=t.concat(n.map(({listener:i})=>i));return t}async off(e,t){const n=await de(this,qe,Xu).call(this,e);if(!n)return this;if(t){const i=n.listeners.map(({listener:o})=>o).indexOf(t);i>=0&&n.listeners.splice(i,1)}return(!t||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),P(this,Ar).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:i}=await de(this,qe,Cf).call(this,e);n&&i.stop(),P(this,Ar).delete(t)}else for(const[t,{started:n,subscriber:i}]of P(this,Ar))n&&i.stop(),P(this,Ar).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return P(this,$c)}destroy(){this.removeAllListeners();for(const e of P(this,Nn).keys())this._clearTimeout(e);F(this,$c,!0)}get paused(){return P(this,_r)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(F(this,is,-1),P(this,_r)!=null){if(P(this,_r)==!!e)return;le(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),F(this,_r,!!e);for(const t of P(this,Nn).values())t.timer&&clearTimeout(t.timer),t.time=Pg()-t.time}resume(){if(P(this,_r)!=null){this._forEachSubscriber(e=>e.resume()),F(this,_r,null);for(const e of P(this,Nn).values()){let t=e.time;t<0&&(t=0),e.time=Pg(),setTimeout(e.func,t)}}}}Ar=new WeakMap,Vs=new WeakMap,_r=new WeakMap,$c=new WeakMap,fn=new WeakMap,Zo=new WeakMap,Ks=new WeakMap,is=new WeakMap,Dl=new WeakMap,Nn=new WeakMap,jc=new WeakMap,Hc=new WeakMap,qe=new WeakSet,an=async function(e){const t=P(this,Hc).cacheTimeout;if(t<0)return await this._perform(e);const n=Of(e.method,e);let i=P(this,Ks).get(n);return i||(i=this._perform(e),P(this,Ks).set(n,i),setTimeout(()=>{P(this,Ks).get(n)===i&&P(this,Ks).delete(n)},t)),await i},j0=async function(e,t,n){le(n<gT,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const i=Kf(e);try{return ye(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(o){if(!this.disableCcipRead&&yy(o)&&o.data&&n>=0&&t==="latest"&&i.to!=null&&Ft(o.data,0,4)==="0x556f1830"){const c=o.data,u=await Br(i.to,this);let l;try{l=_T(Ft(o.data,4))}catch(g){le(!1,g.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:c}})}le(l.sender.toLowerCase()===u.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:c,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:l.errorArgs}});const f=await this.ccipReadFetch(i,l.calldata,l.urls);le(f!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:o.data,errorArgs:l.errorArgs}});const d={to:u,data:Mt([l.selector,AT([f,l.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const g=await de(this,qe,j0).call(this,d,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:g}),g}catch(g){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:g}),g}}throw o}},H0=async function(e){const{value:t}=await Cr({network:this.getNetwork(),value:e});return t},Zu=async function(e,t,n){let i=this._getAddress(t),o=this._getBlockTag(n);return(typeof i!="string"||typeof o!="string")&&([i,o]=await Promise.all([i,o])),await de(this,qe,H0).call(this,de(this,qe,an).call(this,Object.assign(e,{address:i,blockTag:o})))},z0=async function(e,t){if(vt(e,32))return await de(this,qe,an).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return typeof n!="string"&&(n=await n),await de(this,qe,an).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})},Xu=async function(e,t){let n=await Sg(e,this);return n.type==="event"&&t&&t.length>0&&t[0].removed===!0&&(n=await Sg({orphan:"drop-log",log:t[0]},this)),P(this,Ar).get(n.tag)||null},Cf=async function(e){const t=await Sg(e,this),n=t.tag;let i=P(this,Ar).get(n);return i||(i={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},P(this,Ar).set(n,i)),i};function bT(r,e){try{const t=G0(r,e);if(t)return Mf(t)}catch{}return null}function G0(r,e){if(r==="0x")return null;try{const t=Ve(Ft(r,e,e+32)),n=Ve(Ft(r,t,t+32));return Ft(r,t+32,t+32+n)}catch{}return null}function Av(r){const e=tr(r);if(e.length>32)throw new Error("internal; should not happen");const t=new Uint8Array(32);return t.set(e,32-e.length),t}function vT(r){if(r.length%32===0)return r;const e=new Uint8Array(Math.ceil(r.length/32)*32);return e.set(r),e}const ET=new Uint8Array([]);function AT(r){const e=[];let t=0;for(let n=0;n<r.length;n++)e.push(ET),t+=32;for(let n=0;n<r.length;n++){const i=Ge(r[n]);e[n]=Av(t),e.push(Av(i.length)),e.push(vT(i)),t+=32+Math.ceil(i.length/32)*32}return Mt(e)}const _v="0x0000000000000000000000000000000000000000000000000000000000000000";function _T(r){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};le(tc(r)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const t=Ft(r,0,32);le(Ft(t,0,12)===Ft(_v,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Ft(t,12);try{const n=[],i=Ve(Ft(r,32,64)),o=Ve(Ft(r,i,i+32)),c=Ft(r,i+32);for(let u=0;u<o;u++){const l=bT(c,u*32);if(l==null)throw new Error("abort");n.push(l)}e.urls=n}catch{le(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=G0(r,64);if(n==null)throw new Error("abort");e.calldata=n}catch{le(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}le(Ft(r,100,128)===Ft(_v,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Ft(r,96,100);try{const n=G0(r,128);if(n==null)throw new Error("abort");e.extraData=n}catch{le(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>e[n]),e}function Eo(r,e){if(r.provider)return r.provider;le(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function Iv(r,e){let t=Kf(e);if(t.to!=null&&(t.to=Br(t.to,r)),t.from!=null){const n=t.from;t.from=Promise.all([r.getAddress(),Br(n,r)]).then(([i,o])=>(j(i.toLowerCase()===o.toLowerCase(),"transaction from mismatch","tx.from",o),i))}else t.from=r.getAddress();return await Cr(t)}class IT{constructor(e){Q(this,"provider");Ce(this,{provider:e||null})}async getNonce(e){return Eo(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Iv(this,e)}async populateTransaction(e){const t=Eo(this,"populateTransaction"),n=await Iv(this,e);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const i=await this.provider.getNetwork();if(n.chainId!=null){const c=Ee(n.chainId);j(c===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=i.chainId;const o=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||o)?j(!1,"eip-1559 transaction do not support gasPrice","tx",e):(n.type===0||n.type===1)&&o&&j(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const c=await t.getFeeData();le(c.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=c.gasPrice)}else{const c=await t.getFeeData();if(n.type==null)if(c.maxFeePerGas!=null&&c.maxPriorityFeePerGas!=null)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,n.gasPrice!=null){const u=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=u,n.maxPriorityFeePerGas=u}else n.maxFeePerGas==null&&(n.maxFeePerGas=c.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=c.maxPriorityFeePerGas);else c.gasPrice!=null?(le(!o,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=c.gasPrice),n.type=0):le(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(n.type===2||n.type===3||n.type===4)&&(n.maxFeePerGas==null&&(n.maxFeePerGas=c.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=c.maxPriorityFeePerGas))}return await Cr(n)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Eo(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Eo(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Eo(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Eo(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Eo(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const i=$f.from(n);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){le(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function xT(r){return JSON.parse(JSON.stringify(r))}var Or,vi,Xo,Qs,ea,zc,ro,q0,V0;class j_{constructor(e){J(this,ro);J(this,Or);J(this,vi);J(this,Xo);J(this,Qs);J(this,ea);J(this,zc);F(this,Or,e),F(this,vi,null),F(this,Xo,de(this,ro,q0).bind(this)),F(this,Qs,!1),F(this,ea,null),F(this,zc,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){P(this,Qs)||(F(this,Qs,!0),de(this,ro,q0).call(this,-2))}stop(){P(this,Qs)&&(F(this,Qs,!1),F(this,zc,!0),de(this,ro,V0).call(this),P(this,Or).off("block",P(this,Xo)))}pause(e){e&&de(this,ro,V0).call(this),P(this,Or).off("block",P(this,Xo))}resume(){this.start()}}Or=new WeakMap,vi=new WeakMap,Xo=new WeakMap,Qs=new WeakMap,ea=new WeakMap,zc=new WeakMap,ro=new WeakSet,q0=async function(e){try{P(this,vi)==null&&F(this,vi,this._subscribe(P(this,Or)));let t=null;try{t=await P(this,vi)}catch(o){if(!pr(o,"UNSUPPORTED_OPERATION")||o.operation!=="eth_newFilter")throw o}if(t==null){F(this,vi,null),P(this,Or)._recoverSubscriber(this,this._recover(P(this,Or)));return}const n=await P(this,Or).getNetwork();if(P(this,ea)||F(this,ea,n),P(this,ea).chainId!==n.chainId)throw new Error("chaid changed");if(P(this,zc))return;const i=await P(this,Or).send("eth_getFilterChanges",[t]);await this._emitResults(P(this,Or),i)}catch(t){console.log("@TODO",t)}P(this,Or).once("block",P(this,Xo))},V0=function(){const e=P(this,vi);e&&(F(this,vi,null),e.then(t=>{P(this,Or).destroyed||P(this,Or).send("eth_uninstallFilter",[t])}))};var ta;class ST extends j_{constructor(t,n){super(t);J(this,ta);F(this,ta,xT(n))}_recover(t){return new Uy(t,P(this,ta))}async _subscribe(t){return await t.send("eth_newFilter",[P(this,ta)])}async _emitResults(t,n){for(const i of n)t.emit(P(this,ta),t._wrapLog(i,t._network))}}ta=new WeakMap;class PT extends j_{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const DT="bigint,boolean,function,number,string,symbol".split(/,/g);function Nf(r){if(r==null||DT.indexOf(typeof r)>=0||typeof r.getAddress=="function")return r;if(Array.isArray(r))return r.map(Nf);if(typeof r=="object")return Object.keys(r).reduce((e,t)=>(e[t]=r[t],e),{});throw new Error(`should not happen: ${r} (${typeof r})`)}function OT(r){return new Promise(e=>{setTimeout(e,r)})}function Ha(r){return r&&r.toLowerCase()}function xv(r){return r&&typeof r.pollingInterval=="number"}const H_={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Dg extends IT{constructor(t,n){super(t);Q(this,"address");n=st(n),Ce(this,{address:n})}connect(t){le(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){const n=Nf(t),i=[];if(n.from){const c=n.from;i.push((async()=>{const u=await Br(c,this.provider);j(u!=null&&u.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=u})())}else n.from=this.address;if(n.gasLimit==null&&i.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const c=n.to;i.push((async()=>{n.to=await Br(c,this.provider)})())}i.length&&await Promise.all(i);const o=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[o])}async sendTransaction(t){const n=await this.provider.getBlockNumber(),i=await this.sendUncheckedTransaction(t);return await new Promise((o,c)=>{const u=[1e3,100];let l=0;const f=async()=>{try{const d=await this.provider.getTransaction(i);if(d!=null){o(d.replaceableTransaction(n));return}}catch(d){if(pr(d,"CANCELLED")||pr(d,"BAD_DATA")||pr(d,"NETWORK_ERROR")||pr(d,"UNSUPPORTED_OPERATION")){d.info==null&&(d.info={}),d.info.sendTransactionHash=i,c(d);return}if(pr(d,"INVALID_ARGUMENT")&&(l++,d.info==null&&(d.info={}),d.info.sendTransactionHash=i,l>10)){c(d);return}this.provider.emit("error",St("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:d}))}this.provider._setTimeout(()=>{f()},u.pop()||4e3)};f()})}async signTransaction(t){const n=Nf(t);if(n.from){const o=await Br(n.from,this.provider);j(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),n.from=o}else n.from=this.address;const i=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[i])}async signMessage(t){const n=typeof t=="string"?cs(t):t;return await this.provider.send("personal_sign",[ye(n),this.address.toLowerCase()])}async signTypedData(t,n,i){const o=Nf(i),c=await Vf.resolveNames(t,n,o,async u=>{const l=await Br(u);return j(l!=null,"TypedData does not support null address","value",u),l});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(Vf.getPayload(c.domain,n,c.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){const n=typeof t=="string"?cs(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),ye(n)])}}var ra,Gc,ss,Ei,Jn,Rn,Kr,Ol,K0;class CT extends wT{constructor(t,n){super(t,n);J(this,Ol);J(this,ra);J(this,Gc);J(this,ss);J(this,Ei);J(this,Jn);J(this,Rn);J(this,Kr);F(this,Gc,1),F(this,ra,Object.assign({},H_,n||{})),F(this,ss,[]),F(this,Ei,null),F(this,Rn,null),F(this,Kr,null);{let o=null;const c=new Promise(u=>{o=u});F(this,Jn,{promise:c,resolve:o})}const i=this._getOption("staticNetwork");typeof i=="boolean"?(j(!i||t!=="any","staticNetwork cannot be used on special network 'any'","options",n),i&&t!=null&&F(this,Rn,Ii.from(t))):i&&(j(t==null||i.matches(t),"staticNetwork MUST match network object","options",n),F(this,Rn,i))}_getOption(t){return P(this,ra)[t]}get _network(){return le(P(this,Rn),"network is not available yet","NETWORK_ERROR"),P(this,Rn)}async _perform(t){if(t.method==="call"||t.method==="estimateGas"){let i=t.transaction;if(i&&i.type!=null&&Ee(i.type)&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const o=await this.getFeeData();o.maxFeePerGas==null&&o.maxPriorityFeePerGas==null&&(t=Object.assign({},t,{transaction:Object.assign({},i,{type:void 0})}))}}const n=this.getRpcRequest(t);return n!=null?await this.send(n.method,n.args):super._perform(t)}async _detectNetwork(){const t=this._getOption("staticNetwork");if(t)if(t===!0){if(P(this,Rn))return P(this,Rn)}else return t;return P(this,Kr)?await P(this,Kr):this.ready?(F(this,Kr,(async()=>{try{const n=Ii.from(Ee(await this.send("eth_chainId",[])));return F(this,Kr,null),n}catch(n){throw F(this,Kr,null),n}})()),await P(this,Kr)):(F(this,Kr,(async()=>{const n={id:Ou(this,Gc)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let i;try{i=(await this._send(n))[0],F(this,Kr,null)}catch(o){throw F(this,Kr,null),this.emit("debug",{action:"receiveRpcError",error:o}),o}if(this.emit("debug",{action:"receiveRpcResult",result:i}),"result"in i)return Ii.from(Ee(i.result));throw this.getRpcError(n,i)})()),await P(this,Kr))}_start(){P(this,Jn)==null||P(this,Jn).resolve==null||(P(this,Jn).resolve(),F(this,Jn,null),(async()=>{for(;P(this,Rn)==null&&!this.destroyed;)try{F(this,Rn,await this._detectNetwork())}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",St("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await OT(1e3)}de(this,Ol,K0).call(this)})())}async _waitUntilReady(){if(P(this,Jn)!=null)return await P(this,Jn).promise}_getSubscriber(t){return t.type==="pending"?new PT(this):t.type==="event"?this._getOption("polling")?new Uy(this,t.filter):new ST(this,t.filter):t.type==="orphan"&&t.filter.orphan==="drop-log"?new $_("orphan"):super._getSubscriber(t)}get ready(){return P(this,Jn)==null}getRpcTransaction(t){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(i=>{if(t[i]==null)return;let o=i;i==="gasLimit"&&(o="gas"),n[o]=Zn(Ee(t[i],`tx.${i}`))}),["from","to","data"].forEach(i=>{t[i]!=null&&(n[i]=ye(t[i]))}),t.accessList&&(n.accessList=ha(t.accessList)),t.blobVersionedHashes&&(n.blobVersionedHashes=t.blobVersionedHashes.map(i=>i.toLowerCase())),t.authorizationList&&(n.authorizationList=t.authorizationList.map(i=>{const o=GA(i);return{address:o.address,nonce:Zn(o.nonce),chainId:Zn(o.chainId),yParity:Zn(o.signature.yParity),r:Zn(o.signature.r),s:Zn(o.signature.s)}})),n}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Ha(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Ha(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[Ha(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Ha(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&t.filter.address!=null&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(Ha):t.filter.address=Ha(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,n){const{method:i}=t,{error:o}=n;if(i==="eth_estimateGas"&&o.message){const l=o.message;if(!l.match(/revert/i)&&l.match(/insufficient funds/i))return St("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:o}});if(l.match(/nonce/i)&&l.match(/too low/i))return St("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:o}})}if(i==="eth_call"||i==="eth_estimateGas"){const l=Q0(o),f=pl.getBuiltinCallException(i==="eth_call"?"call":"estimateGas",t.params[0],l?l.data:null);return f.info={error:o,payload:t},f}const c=JSON.stringify(RT(o));if(typeof o.message=="string"&&o.message.match(/user denied|ethers-user-denied/i))return St("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[i]||"unknown",reason:"rejected",info:{payload:t,error:o}});if(i==="eth_sendRawTransaction"||i==="eth_sendTransaction"){const l=t.params[0];if(c.match(/insufficient funds|base fee exceeds gas limit/i))return St("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:l,info:{error:o}});if(c.match(/nonce/i)&&c.match(/too low/i))return St("nonce has already been used","NONCE_EXPIRED",{transaction:l,info:{error:o}});if(c.match(/replacement transaction/i)&&c.match(/underpriced/i))return St("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:l,info:{error:o}});if(c.match(/only replay-protected/i))return St("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:i,info:{transaction:l,info:{error:o}}})}let u=!!c.match(/the method .* does not exist/i);return u||o&&o.details&&o.details.startsWith("Unauthorized method:")&&(u=!0),u?St("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:o,payload:t}}):St("could not coalesce error","UNKNOWN_ERROR",{error:o,payload:t})}send(t,n){if(this.destroyed)return Promise.reject(St("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));const i=Ou(this,Gc)._++,o=new Promise((c,u)=>{P(this,ss).push({resolve:c,reject:u,payload:{method:t,params:n,id:i,jsonrpc:"2.0"}})});return de(this,Ol,K0).call(this),o}async getSigner(t){t==null&&(t=0);const n=this.send("eth_accounts",[]);if(typeof t=="number"){const o=await n;if(t>=o.length)throw new Error("no such account");return new Dg(this,o[t])}const{accounts:i}=await Cr({network:this.getNetwork(),accounts:n});t=st(t);for(const o of i)if(st(o)===t)return new Dg(this,t);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Dg(this,n))}destroy(){P(this,Ei)&&(clearTimeout(P(this,Ei)),F(this,Ei,null));for(const{payload:t,reject:n}of P(this,ss))n(St("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));F(this,ss,[]),super.destroy()}}ra=new WeakMap,Gc=new WeakMap,ss=new WeakMap,Ei=new WeakMap,Jn=new WeakMap,Rn=new WeakMap,Kr=new WeakMap,Ol=new WeakSet,K0=function(){if(P(this,Ei))return;const t=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");F(this,Ei,setTimeout(()=>{F(this,Ei,null);const n=P(this,ss);for(F(this,ss,[]);n.length;){const i=[n.shift()];for(;n.length&&i.length!==P(this,ra).batchMaxCount;)if(i.push(n.shift()),JSON.stringify(i.map(c=>c.payload)).length>P(this,ra).batchMaxSize){n.unshift(i.pop());break}(async()=>{const o=i.length===1?i[0].payload:i.map(c=>c.payload);this.emit("debug",{action:"sendRpcPayload",payload:o});try{const c=await this._send(o);this.emit("debug",{action:"receiveRpcResult",result:c});for(const{resolve:u,reject:l,payload:f}of i){if(this.destroyed){l(St("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:f.method}));continue}const d=c.filter(g=>g.id===f.id)[0];if(d==null){const g=St("missing response for request","BAD_DATA",{value:c,info:{payload:f}});this.emit("error",g),l(g);continue}if("error"in d){l(this.getRpcError(f,d));continue}u(d.result)}}catch(c){this.emit("debug",{action:"receiveRpcError",error:c});for(const{reject:u}of i)u(c)}})()}},t))};var Ws;class NT extends CT{constructor(t,n){super(t,n);J(this,Ws);let i=this._getOption("pollingInterval");i==null&&(i=H_.pollingInterval),F(this,Ws,i)}_getSubscriber(t){const n=super._getSubscriber(t);return xv(n)&&(n.pollingInterval=P(this,Ws)),n}get pollingInterval(){return P(this,Ws)}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw new Error("invalid interval");F(this,Ws,t),this._forEachSubscriber(n=>{xv(n)&&(n.pollingInterval=P(this,Ws))})}}Ws=new WeakMap;function Q0(r){if(r==null)return null;if(typeof r.message=="string"&&r.message.match(/revert/i)&&vt(r.data))return{message:r.message,data:r.data};if(typeof r=="object"){for(const e in r){const t=Q0(r[e]);if(t)return t}return null}if(typeof r=="string")try{return Q0(JSON.parse(r))}catch{}return null}function W0(r,e){if(r!=null){if(typeof r.message=="string"&&e.push(r.message),typeof r=="object")for(const t in r)W0(r[t],e);if(typeof r=="string")try{return W0(JSON.parse(r),e)}catch{}}}function RT(r){const e=[];return W0(r,e),e}var qc,Vc;const Ro=class Ro extends NT{constructor(t,n,i){const o=Object.assign({},i??{},{batchMaxCount:1});j(t&&t.request,"invalid EIP-1193 provider","ethereum",t);super(n,o);J(this,qc);J(this,Vc);F(this,Vc,null),i&&i.providerInfo&&F(this,Vc,i.providerInfo),F(this,qc,async(c,u)=>{const l={method:c,params:u};this.emit("debug",{action:"sendEip1193Request",payload:l});try{const f=await t.request(l);return this.emit("debug",{action:"receiveEip1193Result",result:f}),f}catch(f){const d=new Error(f.message);throw d.code=f.code,d.data=f.data,d.payload=l,this.emit("debug",{action:"receiveEip1193Error",error:d}),d}})}get providerInfo(){return P(this,Vc)}async send(t,n){return await this._start(),await super.send(t,n)}async _send(t){j(!Array.isArray(t),"EIP-1193 does not support batch request","payload",t);try{const n=await P(this,qc).call(this,t.method,t.params||[]);return[{id:t.id,result:n}]}catch(n){return[{id:t.id,error:{code:n.code,data:n.data,message:n.message}}]}}getRpcError(t,n){switch(n=JSON.parse(JSON.stringify(n)),n.error.code||-1){case 4001:n.error.message=`ethers-user-denied: ${n.error.message}`;break;case 4200:n.error.message=`ethers-unsupported: ${n.error.message}`;break}return super.getRpcError(t,n)}async hasSigner(t){t==null&&(t=0);const n=await this.send("eth_accounts",[]);return typeof t=="number"?n.length>t:(t=t.toLowerCase(),n.filter(i=>i.toLowerCase()===t).length!==0)}async getSigner(t){if(t==null&&(t=0),!await this.hasSigner(t))try{await P(this,qc).call(this,"eth_requestAccounts",[])}catch(n){const i=n.payload;throw this.getRpcError(i,{id:i.id,error:n})}return await super.getSigner(t)}static async discover(t){if(t==null&&(t={}),t.provider)return new Ro(t.provider);const n=t.window?t.window:typeof window<"u"?window:null;if(n==null)return null;const i=t.anyProvider;if(i&&n.ethereum)return new Ro(n.ethereum);if(!("addEventListener"in n&&"dispatchEvent"in n&&"removeEventListener"in n))return null;const o=t.timeout?t.timeout:300;return o===0?null:await new Promise((c,u)=>{let l=[];const f=m=>{l.push(m.detail),i&&d()},d=()=>{if(clearTimeout(g),l.length)if(t&&t.filter){const m=t.filter(l.map(b=>Object.assign({},b.info)));if(m==null)c(null);else if(m instanceof Ro)c(m);else{let b=null;if(m.uuid&&(b=l.filter(x=>m.uuid===x.info.uuid)[0]),b){const{provider:I,info:x}=b;c(new Ro(I,void 0,{providerInfo:x}))}else u(St("filter returned unknown info","UNSUPPORTED_OPERATION",{value:m}))}}else{const{provider:m,info:b}=l[0];c(new Ro(m,void 0,{providerInfo:b}))}else c(null);n.removeEventListener("eip6963:announceProvider",f)},g=setTimeout(()=>{d()},o);n.addEventListener("eip6963:announceProvider",f),n.dispatchEvent(new Event("eip6963:requestProvider"))})}};qc=new WeakMap,Vc=new WeakMap;let J0=Ro;const TT="modulepreload",BT=function(r){return"/"+r},Sv={},UT=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){let c=function(f){return Promise.all(f.map(d=>Promise.resolve(d).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),l=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=c(t.map(f=>{if(f=BT(f),f in Sv)return;Sv[f]=!0;const d=f.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":TT,d||(m.as="script"),m.crossOrigin="",m.href=f,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((b,I)=>{m.addEventListener("load",b),m.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})};var Jr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Fy(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var uf={exports:{}},Pv;function z_(){if(Pv)return uf.exports;Pv=1;var r=typeof Reflect=="object"?Reflect:null,e=r&&typeof r.apply=="function"?r.apply:function(D,E,p){return Function.prototype.apply.call(D,E,p)},t;r&&typeof r.ownKeys=="function"?t=r.ownKeys:Object.getOwnPropertySymbols?t=function(D){return Object.getOwnPropertyNames(D).concat(Object.getOwnPropertySymbols(D))}:t=function(D){return Object.getOwnPropertyNames(D)};function n(S){console&&console.warn&&console.warn(S)}var i=Number.isNaN||function(D){return D!==D};function o(){o.init.call(this)}uf.exports=o,uf.exports.once=M,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function u(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(S){if(typeof S!="number"||S<0||i(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");c=S}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(D){if(typeof D!="number"||D<0||i(D))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+D+".");return this._maxListeners=D,this};function l(S){return S._maxListeners===void 0?o.defaultMaxListeners:S._maxListeners}o.prototype.getMaxListeners=function(){return l(this)},o.prototype.emit=function(D){for(var E=[],p=1;p<arguments.length;p++)E.push(arguments[p]);var _=D==="error",$=this._events;if($!==void 0)_=_&&$.error===void 0;else if(!_)return!1;if(_){var q;if(E.length>0&&(q=E[0]),q instanceof Error)throw q;var Z=new Error("Unhandled error."+(q?" ("+q.message+")":""));throw Z.context=q,Z}var oe=$[D];if(oe===void 0)return!1;if(typeof oe=="function")e(oe,this,E);else for(var fe=oe.length,re=I(oe,fe),p=0;p<fe;++p)e(re[p],this,E);return!0};function f(S,D,E,p){var _,$,q;if(u(E),$=S._events,$===void 0?($=S._events=Object.create(null),S._eventsCount=0):($.newListener!==void 0&&(S.emit("newListener",D,E.listener?E.listener:E),$=S._events),q=$[D]),q===void 0)q=$[D]=E,++S._eventsCount;else if(typeof q=="function"?q=$[D]=p?[E,q]:[q,E]:p?q.unshift(E):q.push(E),_=l(S),_>0&&q.length>_&&!q.warned){q.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+q.length+" "+String(D)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=S,Z.type=D,Z.count=q.length,n(Z)}return S}o.prototype.addListener=function(D,E){return f(this,D,E,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(D,E){return f(this,D,E,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(S,D,E){var p={fired:!1,wrapFn:void 0,target:S,type:D,listener:E},_=d.bind(p);return _.listener=E,p.wrapFn=_,_}o.prototype.once=function(D,E){return u(E),this.on(D,g(this,D,E)),this},o.prototype.prependOnceListener=function(D,E){return u(E),this.prependListener(D,g(this,D,E)),this},o.prototype.removeListener=function(D,E){var p,_,$,q,Z;if(u(E),_=this._events,_===void 0)return this;if(p=_[D],p===void 0)return this;if(p===E||p.listener===E)--this._eventsCount===0?this._events=Object.create(null):(delete _[D],_.removeListener&&this.emit("removeListener",D,p.listener||E));else if(typeof p!="function"){for($=-1,q=p.length-1;q>=0;q--)if(p[q]===E||p[q].listener===E){Z=p[q].listener,$=q;break}if($<0)return this;$===0?p.shift():x(p,$),p.length===1&&(_[D]=p[0]),_.removeListener!==void 0&&this.emit("removeListener",D,Z||E)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(D){var E,p,_;if(p=this._events,p===void 0)return this;if(p.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):p[D]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete p[D]),this;if(arguments.length===0){var $=Object.keys(p),q;for(_=0;_<$.length;++_)q=$[_],q!=="removeListener"&&this.removeAllListeners(q);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(E=p[D],typeof E=="function")this.removeListener(D,E);else if(E!==void 0)for(_=E.length-1;_>=0;_--)this.removeListener(D,E[_]);return this};function m(S,D,E){var p=S._events;if(p===void 0)return[];var _=p[D];return _===void 0?[]:typeof _=="function"?E?[_.listener||_]:[_]:E?B(_):I(_,_.length)}o.prototype.listeners=function(D){return m(this,D,!0)},o.prototype.rawListeners=function(D){return m(this,D,!1)},o.listenerCount=function(S,D){return typeof S.listenerCount=="function"?S.listenerCount(D):b.call(S,D)},o.prototype.listenerCount=b;function b(S){var D=this._events;if(D!==void 0){var E=D[S];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function I(S,D){for(var E=new Array(D),p=0;p<D;++p)E[p]=S[p];return E}function x(S,D){for(;D+1<S.length;D++)S[D]=S[D+1];S.pop()}function B(S){for(var D=new Array(S.length),E=0;E<D.length;++E)D[E]=S[E].listener||S[E];return D}function M(S,D){return new Promise(function(E,p){function _(q){S.removeListener(D,$),p(q)}function $(){typeof S.removeListener=="function"&&S.removeListener("error",_),E([].slice.call(arguments))}C(S,D,$,{once:!0}),D!=="error"&&R(S,_,{once:!0})})}function R(S,D,E){typeof S.on=="function"&&C(S,"error",D,E)}function C(S,D,E,p){if(typeof S.on=="function")p.once?S.once(D,E):S.on(D,E);else if(typeof S.addEventListener=="function")S.addEventListener(D,function _($){p.once&&S.removeEventListener(D,_),E($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}return uf.exports}var dn=z_();const Ly=xd(dn);var Og={},Ru={},ze={},Cg={},Dv;function FT(){return Dv||(Dv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});function e(u,l){var f=u>>>16&65535,d=u&65535,g=l>>>16&65535,m=l&65535;return d*m+(f*m+d*g<<16>>>0)|0}r.mul=Math.imul||e;function t(u,l){return u+l|0}r.add=t;function n(u,l){return u-l|0}r.sub=n;function i(u,l){return u<<l|u>>>32-l}r.rotl=i;function o(u,l){return u<<32-l|u>>>l}r.rotr=o;function c(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}r.isInteger=Number.isInteger||c,r.MAX_SAFE_INTEGER=9007199254740991,r.isSafeInteger=function(u){return r.isInteger(u)&&u>=-r.MAX_SAFE_INTEGER&&u<=r.MAX_SAFE_INTEGER}}(Cg)),Cg}var Ov;function Sd(){if(Ov)return ze;Ov=1,Object.defineProperty(ze,"__esModule",{value:!0});var r=FT();function e(v,w){return w===void 0&&(w=0),(v[w+0]<<8|v[w+1])<<16>>16}ze.readInt16BE=e;function t(v,w){return w===void 0&&(w=0),(v[w+0]<<8|v[w+1])>>>0}ze.readUint16BE=t;function n(v,w){return w===void 0&&(w=0),(v[w+1]<<8|v[w])<<16>>16}ze.readInt16LE=n;function i(v,w){return w===void 0&&(w=0),(v[w+1]<<8|v[w])>>>0}ze.readUint16LE=i;function o(v,w,T){return w===void 0&&(w=new Uint8Array(2)),T===void 0&&(T=0),w[T+0]=v>>>8,w[T+1]=v>>>0,w}ze.writeUint16BE=o,ze.writeInt16BE=o;function c(v,w,T){return w===void 0&&(w=new Uint8Array(2)),T===void 0&&(T=0),w[T+0]=v>>>0,w[T+1]=v>>>8,w}ze.writeUint16LE=c,ze.writeInt16LE=c;function u(v,w){return w===void 0&&(w=0),v[w]<<24|v[w+1]<<16|v[w+2]<<8|v[w+3]}ze.readInt32BE=u;function l(v,w){return w===void 0&&(w=0),(v[w]<<24|v[w+1]<<16|v[w+2]<<8|v[w+3])>>>0}ze.readUint32BE=l;function f(v,w){return w===void 0&&(w=0),v[w+3]<<24|v[w+2]<<16|v[w+1]<<8|v[w]}ze.readInt32LE=f;function d(v,w){return w===void 0&&(w=0),(v[w+3]<<24|v[w+2]<<16|v[w+1]<<8|v[w])>>>0}ze.readUint32LE=d;function g(v,w,T){return w===void 0&&(w=new Uint8Array(4)),T===void 0&&(T=0),w[T+0]=v>>>24,w[T+1]=v>>>16,w[T+2]=v>>>8,w[T+3]=v>>>0,w}ze.writeUint32BE=g,ze.writeInt32BE=g;function m(v,w,T){return w===void 0&&(w=new Uint8Array(4)),T===void 0&&(T=0),w[T+0]=v>>>0,w[T+1]=v>>>8,w[T+2]=v>>>16,w[T+3]=v>>>24,w}ze.writeUint32LE=m,ze.writeInt32LE=m;function b(v,w){w===void 0&&(w=0);var T=u(v,w),H=u(v,w+4);return T*4294967296+H-(H>>31)*4294967296}ze.readInt64BE=b;function I(v,w){w===void 0&&(w=0);var T=l(v,w),H=l(v,w+4);return T*4294967296+H}ze.readUint64BE=I;function x(v,w){w===void 0&&(w=0);var T=f(v,w),H=f(v,w+4);return H*4294967296+T-(T>>31)*4294967296}ze.readInt64LE=x;function B(v,w){w===void 0&&(w=0);var T=d(v,w),H=d(v,w+4);return H*4294967296+T}ze.readUint64LE=B;function M(v,w,T){return w===void 0&&(w=new Uint8Array(8)),T===void 0&&(T=0),g(v/4294967296>>>0,w,T),g(v>>>0,w,T+4),w}ze.writeUint64BE=M,ze.writeInt64BE=M;function R(v,w,T){return w===void 0&&(w=new Uint8Array(8)),T===void 0&&(T=0),m(v>>>0,w,T),m(v/4294967296>>>0,w,T+4),w}ze.writeUint64LE=R,ze.writeInt64LE=R;function C(v,w,T){if(T===void 0&&(T=0),v%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(v/8>w.length-T)throw new Error("readUintBE: array is too short for the given bitLength");for(var H=0,Y=1,K=v/8+T-1;K>=T;K--)H+=w[K]*Y,Y*=256;return H}ze.readUintBE=C;function S(v,w,T){if(T===void 0&&(T=0),v%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(v/8>w.length-T)throw new Error("readUintLE: array is too short for the given bitLength");for(var H=0,Y=1,K=T;K<T+v/8;K++)H+=w[K]*Y,Y*=256;return H}ze.readUintLE=S;function D(v,w,T,H){if(T===void 0&&(T=new Uint8Array(v/8)),H===void 0&&(H=0),v%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!r.isSafeInteger(w))throw new Error("writeUintBE value must be an integer");for(var Y=1,K=v/8+H-1;K>=H;K--)T[K]=w/Y&255,Y*=256;return T}ze.writeUintBE=D;function E(v,w,T,H){if(T===void 0&&(T=new Uint8Array(v/8)),H===void 0&&(H=0),v%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!r.isSafeInteger(w))throw new Error("writeUintLE value must be an integer");for(var Y=1,K=H;K<H+v/8;K++)T[K]=w/Y&255,Y*=256;return T}ze.writeUintLE=E;function p(v,w){w===void 0&&(w=0);var T=new DataView(v.buffer,v.byteOffset,v.byteLength);return T.getFloat32(w)}ze.readFloat32BE=p;function _(v,w){w===void 0&&(w=0);var T=new DataView(v.buffer,v.byteOffset,v.byteLength);return T.getFloat32(w,!0)}ze.readFloat32LE=_;function $(v,w){w===void 0&&(w=0);var T=new DataView(v.buffer,v.byteOffset,v.byteLength);return T.getFloat64(w)}ze.readFloat64BE=$;function q(v,w){w===void 0&&(w=0);var T=new DataView(v.buffer,v.byteOffset,v.byteLength);return T.getFloat64(w,!0)}ze.readFloat64LE=q;function Z(v,w,T){w===void 0&&(w=new Uint8Array(4)),T===void 0&&(T=0);var H=new DataView(w.buffer,w.byteOffset,w.byteLength);return H.setFloat32(T,v),w}ze.writeFloat32BE=Z;function oe(v,w,T){w===void 0&&(w=new Uint8Array(4)),T===void 0&&(T=0);var H=new DataView(w.buffer,w.byteOffset,w.byteLength);return H.setFloat32(T,v,!0),w}ze.writeFloat32LE=oe;function fe(v,w,T){w===void 0&&(w=new Uint8Array(8)),T===void 0&&(T=0);var H=new DataView(w.buffer,w.byteOffset,w.byteLength);return H.setFloat64(T,v),w}ze.writeFloat64BE=fe;function re(v,w,T){w===void 0&&(w=new Uint8Array(8)),T===void 0&&(T=0);var H=new DataView(w.buffer,w.byteOffset,w.byteLength);return H.setFloat64(T,v,!0),w}return ze.writeFloat64LE=re,ze}var lf={},Cv;function ds(){if(Cv)return lf;Cv=1,Object.defineProperty(lf,"__esModule",{value:!0});function r(e){for(var t=0;t<e.length;t++)e[t]=0;return e}return lf.wipe=r,lf}var Nv;function LT(){if(Nv)return Ru;Nv=1,Object.defineProperty(Ru,"__esModule",{value:!0});var r=Sd(),e=ds(),t=20;function n(u,l,f){for(var d=1634760805,g=857760878,m=2036477234,b=1797285236,I=f[3]<<24|f[2]<<16|f[1]<<8|f[0],x=f[7]<<24|f[6]<<16|f[5]<<8|f[4],B=f[11]<<24|f[10]<<16|f[9]<<8|f[8],M=f[15]<<24|f[14]<<16|f[13]<<8|f[12],R=f[19]<<24|f[18]<<16|f[17]<<8|f[16],C=f[23]<<24|f[22]<<16|f[21]<<8|f[20],S=f[27]<<24|f[26]<<16|f[25]<<8|f[24],D=f[31]<<24|f[30]<<16|f[29]<<8|f[28],E=l[3]<<24|l[2]<<16|l[1]<<8|l[0],p=l[7]<<24|l[6]<<16|l[5]<<8|l[4],_=l[11]<<24|l[10]<<16|l[9]<<8|l[8],$=l[15]<<24|l[14]<<16|l[13]<<8|l[12],q=d,Z=g,oe=m,fe=b,re=I,v=x,w=B,T=M,H=R,Y=C,K=S,ue=D,he=E,X=p,ne=_,ee=$,me=0;me<t;me+=2)q=q+re|0,he^=q,he=he>>>16|he<<16,H=H+he|0,re^=H,re=re>>>20|re<<12,Z=Z+v|0,X^=Z,X=X>>>16|X<<16,Y=Y+X|0,v^=Y,v=v>>>20|v<<12,oe=oe+w|0,ne^=oe,ne=ne>>>16|ne<<16,K=K+ne|0,w^=K,w=w>>>20|w<<12,fe=fe+T|0,ee^=fe,ee=ee>>>16|ee<<16,ue=ue+ee|0,T^=ue,T=T>>>20|T<<12,oe=oe+w|0,ne^=oe,ne=ne>>>24|ne<<8,K=K+ne|0,w^=K,w=w>>>25|w<<7,fe=fe+T|0,ee^=fe,ee=ee>>>24|ee<<8,ue=ue+ee|0,T^=ue,T=T>>>25|T<<7,Z=Z+v|0,X^=Z,X=X>>>24|X<<8,Y=Y+X|0,v^=Y,v=v>>>25|v<<7,q=q+re|0,he^=q,he=he>>>24|he<<8,H=H+he|0,re^=H,re=re>>>25|re<<7,q=q+v|0,ee^=q,ee=ee>>>16|ee<<16,K=K+ee|0,v^=K,v=v>>>20|v<<12,Z=Z+w|0,he^=Z,he=he>>>16|he<<16,ue=ue+he|0,w^=ue,w=w>>>20|w<<12,oe=oe+T|0,X^=oe,X=X>>>16|X<<16,H=H+X|0,T^=H,T=T>>>20|T<<12,fe=fe+re|0,ne^=fe,ne=ne>>>16|ne<<16,Y=Y+ne|0,re^=Y,re=re>>>20|re<<12,oe=oe+T|0,X^=oe,X=X>>>24|X<<8,H=H+X|0,T^=H,T=T>>>25|T<<7,fe=fe+re|0,ne^=fe,ne=ne>>>24|ne<<8,Y=Y+ne|0,re^=Y,re=re>>>25|re<<7,Z=Z+w|0,he^=Z,he=he>>>24|he<<8,ue=ue+he|0,w^=ue,w=w>>>25|w<<7,q=q+v|0,ee^=q,ee=ee>>>24|ee<<8,K=K+ee|0,v^=K,v=v>>>25|v<<7;r.writeUint32LE(q+d|0,u,0),r.writeUint32LE(Z+g|0,u,4),r.writeUint32LE(oe+m|0,u,8),r.writeUint32LE(fe+b|0,u,12),r.writeUint32LE(re+I|0,u,16),r.writeUint32LE(v+x|0,u,20),r.writeUint32LE(w+B|0,u,24),r.writeUint32LE(T+M|0,u,28),r.writeUint32LE(H+R|0,u,32),r.writeUint32LE(Y+C|0,u,36),r.writeUint32LE(K+S|0,u,40),r.writeUint32LE(ue+D|0,u,44),r.writeUint32LE(he+E|0,u,48),r.writeUint32LE(X+p|0,u,52),r.writeUint32LE(ne+_|0,u,56),r.writeUint32LE(ee+$|0,u,60)}function i(u,l,f,d,g){if(g===void 0&&(g=0),u.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(d.length<f.length)throw new Error("ChaCha: destination is shorter than source");var m,b;if(g===0){if(l.length!==8&&l.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");m=new Uint8Array(16),b=m.length-l.length,m.set(l,b)}else{if(l.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");m=l,b=g}for(var I=new Uint8Array(64),x=0;x<f.length;x+=64){n(I,m,u);for(var B=x;B<x+64&&B<f.length;B++)d[B]=f[B]^I[B-x];c(m,0,b)}return e.wipe(I),g===0&&e.wipe(m),d}Ru.streamXOR=i;function o(u,l,f,d){return d===void 0&&(d=0),e.wipe(f),i(u,l,f,f,d)}Ru.stream=o;function c(u,l,f){for(var d=1;f--;)d=d+(u[l]&255)|0,u[l]=d&255,d>>>=8,l++;if(d>0)throw new Error("ChaCha: counter overflow")}return Ru}var Ng={},Ao={},Rv;function My(){if(Rv)return Ao;Rv=1,Object.defineProperty(Ao,"__esModule",{value:!0});function r(i,o,c){return~(i-1)&o|i-1&c}Ao.select=r;function e(i,o){return(i|0)-(o|0)-1>>>31&1}Ao.lessOrEqual=e;function t(i,o){if(i.length!==o.length)return 0;for(var c=0,u=0;u<i.length;u++)c|=i[u]^o[u];return 1&c-1>>>8}Ao.compare=t;function n(i,o){return i.length===0||o.length===0?!1:t(i,o)!==0}return Ao.equal=n,Ao}var Tv;function MT(){return Tv||(Tv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=My(),t=ds();r.DIGEST_LENGTH=16;var n=function(){function c(u){this.digestLength=r.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=u[0]|u[1]<<8;this._r[0]=l&8191;var f=u[2]|u[3]<<8;this._r[1]=(l>>>13|f<<3)&8191;var d=u[4]|u[5]<<8;this._r[2]=(f>>>10|d<<6)&7939;var g=u[6]|u[7]<<8;this._r[3]=(d>>>7|g<<9)&8191;var m=u[8]|u[9]<<8;this._r[4]=(g>>>4|m<<12)&255,this._r[5]=m>>>1&8190;var b=u[10]|u[11]<<8;this._r[6]=(m>>>14|b<<2)&8191;var I=u[12]|u[13]<<8;this._r[7]=(b>>>11|I<<5)&8065;var x=u[14]|u[15]<<8;this._r[8]=(I>>>8|x<<8)&8191,this._r[9]=x>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return c.prototype._blocks=function(u,l,f){for(var d=this._fin?0:2048,g=this._h[0],m=this._h[1],b=this._h[2],I=this._h[3],x=this._h[4],B=this._h[5],M=this._h[6],R=this._h[7],C=this._h[8],S=this._h[9],D=this._r[0],E=this._r[1],p=this._r[2],_=this._r[3],$=this._r[4],q=this._r[5],Z=this._r[6],oe=this._r[7],fe=this._r[8],re=this._r[9];f>=16;){var v=u[l+0]|u[l+1]<<8;g+=v&8191;var w=u[l+2]|u[l+3]<<8;m+=(v>>>13|w<<3)&8191;var T=u[l+4]|u[l+5]<<8;b+=(w>>>10|T<<6)&8191;var H=u[l+6]|u[l+7]<<8;I+=(T>>>7|H<<9)&8191;var Y=u[l+8]|u[l+9]<<8;x+=(H>>>4|Y<<12)&8191,B+=Y>>>1&8191;var K=u[l+10]|u[l+11]<<8;M+=(Y>>>14|K<<2)&8191;var ue=u[l+12]|u[l+13]<<8;R+=(K>>>11|ue<<5)&8191;var he=u[l+14]|u[l+15]<<8;C+=(ue>>>8|he<<8)&8191,S+=he>>>5|d;var X=0,ne=X;ne+=g*D,ne+=m*(5*re),ne+=b*(5*fe),ne+=I*(5*oe),ne+=x*(5*Z),X=ne>>>13,ne&=8191,ne+=B*(5*q),ne+=M*(5*$),ne+=R*(5*_),ne+=C*(5*p),ne+=S*(5*E),X+=ne>>>13,ne&=8191;var ee=X;ee+=g*E,ee+=m*D,ee+=b*(5*re),ee+=I*(5*fe),ee+=x*(5*oe),X=ee>>>13,ee&=8191,ee+=B*(5*Z),ee+=M*(5*q),ee+=R*(5*$),ee+=C*(5*_),ee+=S*(5*p),X+=ee>>>13,ee&=8191;var me=X;me+=g*p,me+=m*E,me+=b*D,me+=I*(5*re),me+=x*(5*fe),X=me>>>13,me&=8191,me+=B*(5*oe),me+=M*(5*Z),me+=R*(5*q),me+=C*(5*$),me+=S*(5*_),X+=me>>>13,me&=8191;var Se=X;Se+=g*_,Se+=m*p,Se+=b*E,Se+=I*D,Se+=x*(5*re),X=Se>>>13,Se&=8191,Se+=B*(5*fe),Se+=M*(5*oe),Se+=R*(5*Z),Se+=C*(5*q),Se+=S*(5*$),X+=Se>>>13,Se&=8191;var _e=X;_e+=g*$,_e+=m*_,_e+=b*p,_e+=I*E,_e+=x*D,X=_e>>>13,_e&=8191,_e+=B*(5*re),_e+=M*(5*fe),_e+=R*(5*oe),_e+=C*(5*Z),_e+=S*(5*q),X+=_e>>>13,_e&=8191;var Ie=X;Ie+=g*q,Ie+=m*$,Ie+=b*_,Ie+=I*p,Ie+=x*E,X=Ie>>>13,Ie&=8191,Ie+=B*D,Ie+=M*(5*re),Ie+=R*(5*fe),Ie+=C*(5*oe),Ie+=S*(5*Z),X+=Ie>>>13,Ie&=8191;var Ne=X;Ne+=g*Z,Ne+=m*q,Ne+=b*$,Ne+=I*_,Ne+=x*p,X=Ne>>>13,Ne&=8191,Ne+=B*E,Ne+=M*D,Ne+=R*(5*re),Ne+=C*(5*fe),Ne+=S*(5*oe),X+=Ne>>>13,Ne&=8191;var Te=X;Te+=g*oe,Te+=m*Z,Te+=b*q,Te+=I*$,Te+=x*_,X=Te>>>13,Te&=8191,Te+=B*p,Te+=M*E,Te+=R*D,Te+=C*(5*re),Te+=S*(5*fe),X+=Te>>>13,Te&=8191;var Re=X;Re+=g*fe,Re+=m*oe,Re+=b*Z,Re+=I*q,Re+=x*$,X=Re>>>13,Re&=8191,Re+=B*_,Re+=M*p,Re+=R*E,Re+=C*D,Re+=S*(5*re),X+=Re>>>13,Re&=8191;var Be=X;Be+=g*re,Be+=m*fe,Be+=b*oe,Be+=I*Z,Be+=x*q,X=Be>>>13,Be&=8191,Be+=B*$,Be+=M*_,Be+=R*p,Be+=C*E,Be+=S*D,X+=Be>>>13,Be&=8191,X=(X<<2)+X|0,X=X+ne|0,ne=X&8191,X=X>>>13,ee+=X,g=ne,m=ee,b=me,I=Se,x=_e,B=Ie,M=Ne,R=Te,C=Re,S=Be,l+=16,f-=16}this._h[0]=g,this._h[1]=m,this._h[2]=b,this._h[3]=I,this._h[4]=x,this._h[5]=B,this._h[6]=M,this._h[7]=R,this._h[8]=C,this._h[9]=S},c.prototype.finish=function(u,l){l===void 0&&(l=0);var f=new Uint16Array(10),d,g,m,b;if(this._leftover){for(b=this._leftover,this._buffer[b++]=1;b<16;b++)this._buffer[b]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(d=this._h[1]>>>13,this._h[1]&=8191,b=2;b<10;b++)this._h[b]+=d,d=this._h[b]>>>13,this._h[b]&=8191;for(this._h[0]+=d*5,d=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=d,d=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=d,f[0]=this._h[0]+5,d=f[0]>>>13,f[0]&=8191,b=1;b<10;b++)f[b]=this._h[b]+d,d=f[b]>>>13,f[b]&=8191;for(f[9]-=8192,g=(d^1)-1,b=0;b<10;b++)f[b]&=g;for(g=~g,b=0;b<10;b++)this._h[b]=this._h[b]&g|f[b];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,m=this._h[0]+this._pad[0],this._h[0]=m&65535,b=1;b<8;b++)m=(this._h[b]+this._pad[b]|0)+(m>>>16)|0,this._h[b]=m&65535;return u[l+0]=this._h[0]>>>0,u[l+1]=this._h[0]>>>8,u[l+2]=this._h[1]>>>0,u[l+3]=this._h[1]>>>8,u[l+4]=this._h[2]>>>0,u[l+5]=this._h[2]>>>8,u[l+6]=this._h[3]>>>0,u[l+7]=this._h[3]>>>8,u[l+8]=this._h[4]>>>0,u[l+9]=this._h[4]>>>8,u[l+10]=this._h[5]>>>0,u[l+11]=this._h[5]>>>8,u[l+12]=this._h[6]>>>0,u[l+13]=this._h[6]>>>8,u[l+14]=this._h[7]>>>0,u[l+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(u){var l=0,f=u.length,d;if(this._leftover){d=16-this._leftover,d>f&&(d=f);for(var g=0;g<d;g++)this._buffer[this._leftover+g]=u[l+g];if(f-=d,l+=d,this._leftover+=d,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(f>=16&&(d=f-f%16,this._blocks(u,l,d),l+=d,f-=d),f){for(var g=0;g<f;g++)this._buffer[this._leftover+g]=u[l+g];this._leftover+=f}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},c.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();r.Poly1305=n;function i(c,u){var l=new n(c);l.update(u);var f=l.digest();return l.clean(),f}r.oneTimeAuth=i;function o(c,u){return c.length!==r.DIGEST_LENGTH||u.length!==r.DIGEST_LENGTH?!1:e.equal(c,u)}r.equal=o}(Ng)),Ng}var Bv;function kT(){return Bv||(Bv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=LT(),t=MT(),n=ds(),i=Sd(),o=My();r.KEY_LENGTH=32,r.NONCE_LENGTH=12,r.TAG_LENGTH=16;var c=new Uint8Array(16),u=function(){function l(f){if(this.nonceLength=r.NONCE_LENGTH,this.tagLength=r.TAG_LENGTH,f.length!==r.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(f)}return l.prototype.seal=function(f,d,g,m){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var b=new Uint8Array(16);b.set(f,b.length-f.length);var I=new Uint8Array(32);e.stream(this._key,b,I,4);var x=d.length+this.tagLength,B;if(m){if(m.length!==x)throw new Error("ChaCha20Poly1305: incorrect destination length");B=m}else B=new Uint8Array(x);return e.streamXOR(this._key,b,d,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),I,B.subarray(0,B.length-this.tagLength),g),n.wipe(b),B},l.prototype.open=function(f,d,g,m){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var b=new Uint8Array(16);b.set(f,b.length-f.length);var I=new Uint8Array(32);e.stream(this._key,b,I,4);var x=new Uint8Array(this.tagLength);if(this._authenticate(x,I,d.subarray(0,d.length-this.tagLength),g),!o.equal(x,d.subarray(d.length-this.tagLength,d.length)))return null;var B=d.length-this.tagLength,M;if(m){if(m.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");M=m}else M=new Uint8Array(B);return e.streamXOR(this._key,b,d.subarray(0,d.length-this.tagLength),M,4),n.wipe(b),M},l.prototype.clean=function(){return n.wipe(this._key),this},l.prototype._authenticate=function(f,d,g,m){var b=new t.Poly1305(d);m&&(b.update(m),m.length%16>0&&b.update(c.subarray(m.length%16))),b.update(g),g.length%16>0&&b.update(c.subarray(g.length%16));var I=new Uint8Array(8);m&&i.writeUint64LE(m.length,I),b.update(I),i.writeUint64LE(g.length,I),b.update(I);for(var x=b.digest(),B=0;B<x.length;B++)f[B]=x[B];b.clean(),n.wipe(x),n.wipe(I)},l}();r.ChaCha20Poly1305=u}(Og)),Og}var G_=kT(),hf={},za={},ff={},Uv;function $T(){if(Uv)return ff;Uv=1,Object.defineProperty(ff,"__esModule",{value:!0});function r(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}return ff.isSerializableHash=r,ff}var Fv;function jT(){if(Fv)return za;Fv=1,Object.defineProperty(za,"__esModule",{value:!0});var r=$T(),e=My(),t=ds(),n=function(){function o(c,u){this._finished=!1,this._inner=new c,this._outer=new c,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var l=new Uint8Array(this.blockSize);u.length>this.blockSize?this._inner.update(u).finish(l).clean():l.set(u);for(var f=0;f<l.length;f++)l[f]^=54;this._inner.update(l);for(var f=0;f<l.length;f++)l[f]^=106;this._outer.update(l),r.isSerializableHash(this._inner)&&r.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),t.wipe(l)}return o.prototype.reset=function(){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},o.prototype.clean=function(){r.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),r.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},o.prototype.update=function(c){return this._inner.update(c),this},o.prototype.finish=function(c){return this._finished?(this._outer.finish(c),this):(this._inner.finish(c),this._outer.update(c.subarray(0,this.digestLength)).finish(c),this._finished=!0,this)},o.prototype.digest=function(){var c=new Uint8Array(this.digestLength);return this.finish(c),c},o.prototype.saveState=function(){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},o.prototype.restoreState=function(c){if(!r.isSerializableHash(this._inner)||!r.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(c),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},o.prototype.cleanSavedState=function(c){if(!r.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(c)},o}();za.HMAC=n;function i(o,c,u){var l=new n(o,c);l.update(u);var f=l.digest();return l.clean(),f}return za.hmac=i,za.equal=e.equal,za}var Lv;function HT(){if(Lv)return hf;Lv=1,Object.defineProperty(hf,"__esModule",{value:!0});var r=jT(),e=ds(),t=function(){function n(i,o,c,u){c===void 0&&(c=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=i,this._info=u;var l=r.hmac(this._hash,c,o);this._hmac=new r.HMAC(i,l),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var i=this._counter[0];if(i===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),i>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(i){for(var o=new Uint8Array(i),c=0;c<o.length;c++)this._bufpos===this._buffer.length&&this._fillBuffer(),o[c]=this._buffer[this._bufpos++];return o},n.prototype.clean=function(){this._hmac.clean(),e.wipe(this._buffer),e.wipe(this._counter),this._bufpos=0},n}();return hf.HKDF=t,hf}var zT=HT(),Rg={},Tu={},Bu={},Mv;function GT(){if(Mv)return Bu;Mv=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.BrowserRandomSource=void 0;const r=65536;class e{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const n=typeof self<"u"?self.crypto||self.msCrypto:null;n&&n.getRandomValues!==void 0&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const i=new Uint8Array(n);for(let o=0;o<i.length;o+=r)this._crypto.getRandomValues(i.subarray(o,o+Math.min(i.length-o,r)));return i}}return Bu.BrowserRandomSource=e,Bu}function qT(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Uu={};const VT={},KT=Object.freeze(Object.defineProperty({__proto__:null,default:VT},Symbol.toStringTag,{value:"Module"})),QT=Fy(KT);var kv;function WT(){if(kv)return Uu;kv=1,Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.NodeRandomSource=void 0;const r=ds();class e{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof qT<"u"){const n=QT;n&&n.randomBytes&&(this._crypto=n,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(n){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let i=this._crypto.randomBytes(n);if(i.length!==n)throw new Error("NodeRandomSource: got fewer bytes than requested");const o=new Uint8Array(n);for(let c=0;c<o.length;c++)o[c]=i[c];return(0,r.wipe)(i),o}}return Uu.NodeRandomSource=e,Uu}var $v;function JT(){if($v)return Tu;$v=1,Object.defineProperty(Tu,"__esModule",{value:!0}),Tu.SystemRandomSource=void 0;const r=GT(),e=WT();class t{constructor(){if(this.isAvailable=!1,this.name="",this._source=new r.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new e.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(i){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(i)}}return Tu.SystemRandomSource=t,Tu}var jv;function q_(){return jv||(jv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.randomStringForEntropy=r.randomString=r.randomUint32=r.randomBytes=r.defaultRandomSource=void 0;const e=JT(),t=Sd(),n=ds();r.defaultRandomSource=new e.SystemRandomSource;function i(f,d=r.defaultRandomSource){return d.randomBytes(f)}r.randomBytes=i;function o(f=r.defaultRandomSource){const d=i(4,f),g=(0,t.readUint32LE)(d);return(0,n.wipe)(d),g}r.randomUint32=o;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(f,d=c,g=r.defaultRandomSource){if(d.length<2)throw new Error("randomString charset is too short");if(d.length>256)throw new Error("randomString charset is too long");let m="";const b=d.length,I=256-256%b;for(;f>0;){const x=i(Math.ceil(f*256/I),g);for(let B=0;B<x.length&&f>0;B++){const M=x[B];M<I&&(m+=d.charAt(M%b),f--)}(0,n.wipe)(x)}return m}r.randomString=u;function l(f,d=c,g=r.defaultRandomSource){const m=Math.ceil(f/(Math.log(d.length)/Math.LN2));return u(m,d,g)}r.randomStringForEntropy=l}(Rg)),Rg}var V_=q_(),Tg={},Hv;function YT(){return Hv||(Hv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});var e=Sd(),t=ds();r.DIGEST_LENGTH=32,r.BLOCK_SIZE=64;var n=function(){function u(){this.digestLength=r.DIGEST_LENGTH,this.blockSize=r.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},u.prototype.update=function(l,f){if(f===void 0&&(f=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var d=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&f>0;)this._buffer[this._bufferLength++]=l[d++],f--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(d=o(this._temp,this._state,l,d,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=l[d++],f--;return this},u.prototype.finish=function(l){if(!this._finished){var f=this._bytesHashed,d=this._bufferLength,g=f/536870912|0,m=f<<3,b=f%64<56?64:128;this._buffer[d]=128;for(var I=d+1;I<b-8;I++)this._buffer[I]=0;e.writeUint32BE(g,this._buffer,b-8),e.writeUint32BE(m,this._buffer,b-4),o(this._temp,this._state,this._buffer,0,b),this._finished=!0}for(var I=0;I<this.digestLength/4;I++)e.writeUint32BE(this._state[I],l,I*4);return this},u.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(l){t.wipe(l.state),l.buffer&&t.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},u}();r.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(u,l,f,d,g){for(;g>=64;){for(var m=l[0],b=l[1],I=l[2],x=l[3],B=l[4],M=l[5],R=l[6],C=l[7],S=0;S<16;S++){var D=d+S*4;u[S]=e.readUint32BE(f,D)}for(var S=16;S<64;S++){var E=u[S-2],p=(E>>>17|E<<15)^(E>>>19|E<<13)^E>>>10;E=u[S-15];var _=(E>>>7|E<<25)^(E>>>18|E<<14)^E>>>3;u[S]=(p+u[S-7]|0)+(_+u[S-16]|0)}for(var S=0;S<64;S++){var p=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&M^~B&R)|0)+(C+(i[S]+u[S]|0)|0)|0,_=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&b^m&I^b&I)|0;C=R,R=M,M=B,B=x+p|0,x=I,I=b,b=m,m=p+_|0}l[0]+=m,l[1]+=b,l[2]+=I,l[3]+=x,l[4]+=B,l[5]+=M,l[6]+=R,l[7]+=C,d+=64,g-=64}return d}function c(u){var l=new n;l.update(u);var f=l.digest();return l.clean(),f}r.hash=c}(Tg)),Tg}var ky=YT(),Bg={},zv;function ZT(){return zv||(zv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.sharedKey=r.generateKeyPair=r.generateKeyPairFromSeed=r.scalarMultBase=r.scalarMult=r.SHARED_KEY_LENGTH=r.SECRET_KEY_LENGTH=r.PUBLIC_KEY_LENGTH=void 0;const e=q_(),t=ds();r.PUBLIC_KEY_LENGTH=32,r.SECRET_KEY_LENGTH=32,r.SHARED_KEY_LENGTH=32;function n(S){const D=new Float64Array(16);if(S)for(let E=0;E<S.length;E++)D[E]=S[E];return D}const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function c(S){let D=1;for(let E=0;E<16;E++){let p=S[E]+D+65535;D=Math.floor(p/65536),S[E]=p-D*65536}S[0]+=D-1+37*(D-1)}function u(S,D,E){const p=~(E-1);for(let _=0;_<16;_++){const $=p&(S[_]^D[_]);S[_]^=$,D[_]^=$}}function l(S,D){const E=n(),p=n();for(let _=0;_<16;_++)p[_]=D[_];c(p),c(p),c(p);for(let _=0;_<2;_++){E[0]=p[0]-65517;for(let q=1;q<15;q++)E[q]=p[q]-65535-(E[q-1]>>16&1),E[q-1]&=65535;E[15]=p[15]-32767-(E[14]>>16&1);const $=E[15]>>16&1;E[14]&=65535,u(p,E,1-$)}for(let _=0;_<16;_++)S[2*_]=p[_]&255,S[2*_+1]=p[_]>>8}function f(S,D){for(let E=0;E<16;E++)S[E]=D[2*E]+(D[2*E+1]<<8);S[15]&=32767}function d(S,D,E){for(let p=0;p<16;p++)S[p]=D[p]+E[p]}function g(S,D,E){for(let p=0;p<16;p++)S[p]=D[p]-E[p]}function m(S,D,E){let p,_,$=0,q=0,Z=0,oe=0,fe=0,re=0,v=0,w=0,T=0,H=0,Y=0,K=0,ue=0,he=0,X=0,ne=0,ee=0,me=0,Se=0,_e=0,Ie=0,Ne=0,Te=0,Re=0,Be=0,tt=0,Yt=0,Lr=0,rr=0,ni=0,Pi=0,ht=E[0],Xe=E[1],ft=E[2],bt=E[3],Pt=E[4],dt=E[5],Dt=E[6],ot=E[7],at=E[8],Et=E[9],et=E[10],Ot=E[11],Ct=E[12],Bt=E[13],Nt=E[14],At=E[15];p=D[0],$+=p*ht,q+=p*Xe,Z+=p*ft,oe+=p*bt,fe+=p*Pt,re+=p*dt,v+=p*Dt,w+=p*ot,T+=p*at,H+=p*Et,Y+=p*et,K+=p*Ot,ue+=p*Ct,he+=p*Bt,X+=p*Nt,ne+=p*At,p=D[1],q+=p*ht,Z+=p*Xe,oe+=p*ft,fe+=p*bt,re+=p*Pt,v+=p*dt,w+=p*Dt,T+=p*ot,H+=p*at,Y+=p*Et,K+=p*et,ue+=p*Ot,he+=p*Ct,X+=p*Bt,ne+=p*Nt,ee+=p*At,p=D[2],Z+=p*ht,oe+=p*Xe,fe+=p*ft,re+=p*bt,v+=p*Pt,w+=p*dt,T+=p*Dt,H+=p*ot,Y+=p*at,K+=p*Et,ue+=p*et,he+=p*Ot,X+=p*Ct,ne+=p*Bt,ee+=p*Nt,me+=p*At,p=D[3],oe+=p*ht,fe+=p*Xe,re+=p*ft,v+=p*bt,w+=p*Pt,T+=p*dt,H+=p*Dt,Y+=p*ot,K+=p*at,ue+=p*Et,he+=p*et,X+=p*Ot,ne+=p*Ct,ee+=p*Bt,me+=p*Nt,Se+=p*At,p=D[4],fe+=p*ht,re+=p*Xe,v+=p*ft,w+=p*bt,T+=p*Pt,H+=p*dt,Y+=p*Dt,K+=p*ot,ue+=p*at,he+=p*Et,X+=p*et,ne+=p*Ot,ee+=p*Ct,me+=p*Bt,Se+=p*Nt,_e+=p*At,p=D[5],re+=p*ht,v+=p*Xe,w+=p*ft,T+=p*bt,H+=p*Pt,Y+=p*dt,K+=p*Dt,ue+=p*ot,he+=p*at,X+=p*Et,ne+=p*et,ee+=p*Ot,me+=p*Ct,Se+=p*Bt,_e+=p*Nt,Ie+=p*At,p=D[6],v+=p*ht,w+=p*Xe,T+=p*ft,H+=p*bt,Y+=p*Pt,K+=p*dt,ue+=p*Dt,he+=p*ot,X+=p*at,ne+=p*Et,ee+=p*et,me+=p*Ot,Se+=p*Ct,_e+=p*Bt,Ie+=p*Nt,Ne+=p*At,p=D[7],w+=p*ht,T+=p*Xe,H+=p*ft,Y+=p*bt,K+=p*Pt,ue+=p*dt,he+=p*Dt,X+=p*ot,ne+=p*at,ee+=p*Et,me+=p*et,Se+=p*Ot,_e+=p*Ct,Ie+=p*Bt,Ne+=p*Nt,Te+=p*At,p=D[8],T+=p*ht,H+=p*Xe,Y+=p*ft,K+=p*bt,ue+=p*Pt,he+=p*dt,X+=p*Dt,ne+=p*ot,ee+=p*at,me+=p*Et,Se+=p*et,_e+=p*Ot,Ie+=p*Ct,Ne+=p*Bt,Te+=p*Nt,Re+=p*At,p=D[9],H+=p*ht,Y+=p*Xe,K+=p*ft,ue+=p*bt,he+=p*Pt,X+=p*dt,ne+=p*Dt,ee+=p*ot,me+=p*at,Se+=p*Et,_e+=p*et,Ie+=p*Ot,Ne+=p*Ct,Te+=p*Bt,Re+=p*Nt,Be+=p*At,p=D[10],Y+=p*ht,K+=p*Xe,ue+=p*ft,he+=p*bt,X+=p*Pt,ne+=p*dt,ee+=p*Dt,me+=p*ot,Se+=p*at,_e+=p*Et,Ie+=p*et,Ne+=p*Ot,Te+=p*Ct,Re+=p*Bt,Be+=p*Nt,tt+=p*At,p=D[11],K+=p*ht,ue+=p*Xe,he+=p*ft,X+=p*bt,ne+=p*Pt,ee+=p*dt,me+=p*Dt,Se+=p*ot,_e+=p*at,Ie+=p*Et,Ne+=p*et,Te+=p*Ot,Re+=p*Ct,Be+=p*Bt,tt+=p*Nt,Yt+=p*At,p=D[12],ue+=p*ht,he+=p*Xe,X+=p*ft,ne+=p*bt,ee+=p*Pt,me+=p*dt,Se+=p*Dt,_e+=p*ot,Ie+=p*at,Ne+=p*Et,Te+=p*et,Re+=p*Ot,Be+=p*Ct,tt+=p*Bt,Yt+=p*Nt,Lr+=p*At,p=D[13],he+=p*ht,X+=p*Xe,ne+=p*ft,ee+=p*bt,me+=p*Pt,Se+=p*dt,_e+=p*Dt,Ie+=p*ot,Ne+=p*at,Te+=p*Et,Re+=p*et,Be+=p*Ot,tt+=p*Ct,Yt+=p*Bt,Lr+=p*Nt,rr+=p*At,p=D[14],X+=p*ht,ne+=p*Xe,ee+=p*ft,me+=p*bt,Se+=p*Pt,_e+=p*dt,Ie+=p*Dt,Ne+=p*ot,Te+=p*at,Re+=p*Et,Be+=p*et,tt+=p*Ot,Yt+=p*Ct,Lr+=p*Bt,rr+=p*Nt,ni+=p*At,p=D[15],ne+=p*ht,ee+=p*Xe,me+=p*ft,Se+=p*bt,_e+=p*Pt,Ie+=p*dt,Ne+=p*Dt,Te+=p*ot,Re+=p*at,Be+=p*Et,tt+=p*et,Yt+=p*Ot,Lr+=p*Ct,rr+=p*Bt,ni+=p*Nt,Pi+=p*At,$+=38*ee,q+=38*me,Z+=38*Se,oe+=38*_e,fe+=38*Ie,re+=38*Ne,v+=38*Te,w+=38*Re,T+=38*Be,H+=38*tt,Y+=38*Yt,K+=38*Lr,ue+=38*rr,he+=38*ni,X+=38*Pi,_=1,p=$+_+65535,_=Math.floor(p/65536),$=p-_*65536,p=q+_+65535,_=Math.floor(p/65536),q=p-_*65536,p=Z+_+65535,_=Math.floor(p/65536),Z=p-_*65536,p=oe+_+65535,_=Math.floor(p/65536),oe=p-_*65536,p=fe+_+65535,_=Math.floor(p/65536),fe=p-_*65536,p=re+_+65535,_=Math.floor(p/65536),re=p-_*65536,p=v+_+65535,_=Math.floor(p/65536),v=p-_*65536,p=w+_+65535,_=Math.floor(p/65536),w=p-_*65536,p=T+_+65535,_=Math.floor(p/65536),T=p-_*65536,p=H+_+65535,_=Math.floor(p/65536),H=p-_*65536,p=Y+_+65535,_=Math.floor(p/65536),Y=p-_*65536,p=K+_+65535,_=Math.floor(p/65536),K=p-_*65536,p=ue+_+65535,_=Math.floor(p/65536),ue=p-_*65536,p=he+_+65535,_=Math.floor(p/65536),he=p-_*65536,p=X+_+65535,_=Math.floor(p/65536),X=p-_*65536,p=ne+_+65535,_=Math.floor(p/65536),ne=p-_*65536,$+=_-1+37*(_-1),_=1,p=$+_+65535,_=Math.floor(p/65536),$=p-_*65536,p=q+_+65535,_=Math.floor(p/65536),q=p-_*65536,p=Z+_+65535,_=Math.floor(p/65536),Z=p-_*65536,p=oe+_+65535,_=Math.floor(p/65536),oe=p-_*65536,p=fe+_+65535,_=Math.floor(p/65536),fe=p-_*65536,p=re+_+65535,_=Math.floor(p/65536),re=p-_*65536,p=v+_+65535,_=Math.floor(p/65536),v=p-_*65536,p=w+_+65535,_=Math.floor(p/65536),w=p-_*65536,p=T+_+65535,_=Math.floor(p/65536),T=p-_*65536,p=H+_+65535,_=Math.floor(p/65536),H=p-_*65536,p=Y+_+65535,_=Math.floor(p/65536),Y=p-_*65536,p=K+_+65535,_=Math.floor(p/65536),K=p-_*65536,p=ue+_+65535,_=Math.floor(p/65536),ue=p-_*65536,p=he+_+65535,_=Math.floor(p/65536),he=p-_*65536,p=X+_+65535,_=Math.floor(p/65536),X=p-_*65536,p=ne+_+65535,_=Math.floor(p/65536),ne=p-_*65536,$+=_-1+37*(_-1),S[0]=$,S[1]=q,S[2]=Z,S[3]=oe,S[4]=fe,S[5]=re,S[6]=v,S[7]=w,S[8]=T,S[9]=H,S[10]=Y,S[11]=K,S[12]=ue,S[13]=he,S[14]=X,S[15]=ne}function b(S,D){m(S,D,D)}function I(S,D){const E=n();for(let p=0;p<16;p++)E[p]=D[p];for(let p=253;p>=0;p--)b(E,E),p!==2&&p!==4&&m(E,E,D);for(let p=0;p<16;p++)S[p]=E[p]}function x(S,D){const E=new Uint8Array(32),p=new Float64Array(80),_=n(),$=n(),q=n(),Z=n(),oe=n(),fe=n();for(let T=0;T<31;T++)E[T]=S[T];E[31]=S[31]&127|64,E[0]&=248,f(p,D);for(let T=0;T<16;T++)$[T]=p[T];_[0]=Z[0]=1;for(let T=254;T>=0;--T){const H=E[T>>>3]>>>(T&7)&1;u(_,$,H),u(q,Z,H),d(oe,_,q),g(_,_,q),d(q,$,Z),g($,$,Z),b(Z,oe),b(fe,_),m(_,q,_),m(q,$,oe),d(oe,_,q),g(_,_,q),b($,_),g(q,Z,fe),m(_,q,o),d(_,_,Z),m(q,q,_),m(_,Z,fe),m(Z,$,p),b($,oe),u(_,$,H),u(q,Z,H)}for(let T=0;T<16;T++)p[T+16]=_[T],p[T+32]=q[T],p[T+48]=$[T],p[T+64]=Z[T];const re=p.subarray(32),v=p.subarray(16);I(re,re),m(v,v,re);const w=new Uint8Array(32);return l(w,v),w}r.scalarMult=x;function B(S){return x(S,i)}r.scalarMultBase=B;function M(S){if(S.length!==r.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${r.SECRET_KEY_LENGTH} bytes`);const D=new Uint8Array(S);return{publicKey:B(D),secretKey:D}}r.generateKeyPairFromSeed=M;function R(S){const D=(0,e.randomBytes)(32,S),E=M(D);return(0,t.wipe)(D),E}r.generateKeyPair=R;function C(S,D,E=!1){if(S.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(D.length!==r.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const p=x(S,D);if(E){let _=0;for(let $=0;$<p.length;$++)_|=p[$];if(_===0)throw new Error("X25519: invalid shared key")}return p}r.sharedKey=C}(Bg)),Bg}var K_=ZT();function $y(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Q_(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?$y(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Gv(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));const t=Q_(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return $y(t)}function XT(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),c=o.charCodeAt(0);if(t[c]!==255)throw new TypeError(o+" is ambiguous");t[c]=i}var u=r.length,l=r.charAt(0),f=Math.log(u)/Math.log(256),d=Math.log(256)/Math.log(u);function g(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var x=0,B=0,M=0,R=I.length;M!==R&&I[M]===0;)M++,x++;for(var C=(R-M)*d+1>>>0,S=new Uint8Array(C);M!==R;){for(var D=I[M],E=0,p=C-1;(D!==0||E<B)&&p!==-1;p--,E++)D+=256*S[p]>>>0,S[p]=D%u>>>0,D=D/u>>>0;if(D!==0)throw new Error("Non-zero carry");B=E,M++}for(var _=C-B;_!==C&&S[_]===0;)_++;for(var $=l.repeat(x);_<C;++_)$+=r.charAt(S[_]);return $}function m(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var x=0;if(I[x]!==" "){for(var B=0,M=0;I[x]===l;)B++,x++;for(var R=(I.length-x)*f+1>>>0,C=new Uint8Array(R);I[x];){var S=t[I.charCodeAt(x)];if(S===255)return;for(var D=0,E=R-1;(S!==0||D<M)&&E!==-1;E--,D++)S+=u*C[E]>>>0,C[E]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");M=D,x++}if(I[x]!==" "){for(var p=R-M;p!==R&&C[p]===0;)p++;for(var _=new Uint8Array(B+(R-p)),$=B;p!==R;)_[$++]=C[p++];return _}}}function b(I){var x=m(I);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:b}}var eB=XT,tB=eB;const rB=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},nB=r=>new TextEncoder().encode(r),iB=r=>new TextDecoder().decode(r);class sB{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class oB{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return W_(this,e)}}class aB{constructor(e){this.decoders=e}or(e){return W_(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const W_=(r,e)=>new aB({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class cB{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new sB(e,t,n),this.decoder=new oB(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Pd=({name:r,prefix:e,encode:t,decode:n})=>new cB(r,e,t,n),Ul=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=tB(t,e);return Pd({prefix:r,name:e,encode:n,decode:o=>rB(i(o))})},uB=(r,e,t,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let o=r.length;for(;r[o-1]==="=";)--o;const c=new Uint8Array(o*t/8|0);let u=0,l=0,f=0;for(let d=0;d<o;++d){const g=i[r[d]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|g,u+=t,u>=8&&(u-=8,c[f++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return c},lB=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let o="",c=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],c+=8;c>t;)c-=t,o+=e[i&u>>c];if(c&&(o+=e[i&u<<t-c]),n)for(;o.length*t&7;)o+="=";return o},yr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Pd({prefix:e,name:r,encode(i){return lB(i,n,t)},decode(i){return uB(i,n,t,r)}}),hB=Pd({prefix:"\0",name:"identity",encode:r=>iB(r),decode:r=>nB(r)}),fB=Object.freeze(Object.defineProperty({__proto__:null,identity:hB},Symbol.toStringTag,{value:"Module"})),dB=yr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),pB=Object.freeze(Object.defineProperty({__proto__:null,base2:dB},Symbol.toStringTag,{value:"Module"})),gB=yr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),yB=Object.freeze(Object.defineProperty({__proto__:null,base8:gB},Symbol.toStringTag,{value:"Module"})),mB=Ul({prefix:"9",name:"base10",alphabet:"0123456789"}),wB=Object.freeze(Object.defineProperty({__proto__:null,base10:mB},Symbol.toStringTag,{value:"Module"})),bB=yr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vB=yr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),EB=Object.freeze(Object.defineProperty({__proto__:null,base16:bB,base16upper:vB},Symbol.toStringTag,{value:"Module"})),AB=yr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_B=yr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),IB=yr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xB=yr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SB=yr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),PB=yr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),DB=yr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),OB=yr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),CB=yr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),NB=Object.freeze(Object.defineProperty({__proto__:null,base32:AB,base32hex:SB,base32hexpad:DB,base32hexpadupper:OB,base32hexupper:PB,base32pad:IB,base32padupper:xB,base32upper:_B,base32z:CB},Symbol.toStringTag,{value:"Module"})),RB=Ul({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),TB=Ul({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),BB=Object.freeze(Object.defineProperty({__proto__:null,base36:RB,base36upper:TB},Symbol.toStringTag,{value:"Module"})),UB=Ul({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),FB=Ul({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),LB=Object.freeze(Object.defineProperty({__proto__:null,base58btc:UB,base58flickr:FB},Symbol.toStringTag,{value:"Module"})),MB=yr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),kB=yr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$B=yr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),jB=yr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),HB=Object.freeze(Object.defineProperty({__proto__:null,base64:MB,base64pad:kB,base64url:$B,base64urlpad:jB},Symbol.toStringTag,{value:"Module"})),J_=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),zB=J_.reduce((r,e,t)=>(r[t]=e,r),[]),GB=J_.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function qB(r){return r.reduce((e,t)=>(e+=zB[t],e),"")}function VB(r){const e=[];for(const t of r){const n=GB[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const KB=Pd({prefix:"🚀",name:"base256emoji",encode:qB,decode:VB}),QB=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:KB},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const qv={...fB,...pB,...yB,...wB,...EB,...NB,...BB,...LB,...HB,...QB};function Y_(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const Vv=Y_("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Ug=Y_("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Q_(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Z_={utf8:Vv,"utf-8":Vv,hex:qv.base16,latin1:Ug,ascii:Ug,binary:Ug,...qv};function ei(r,e="utf8"){const t=Z_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?$y(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function Un(r,e="utf8"){const t=Z_[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}var Kv=function(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return r.concat(o||Array.prototype.slice.call(e))},WB=function(){function r(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"}return r}(),JB=function(){function r(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return r}(),YB=function(){function r(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"}return r}(),ZB=function(){function r(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return r}(),XB=function(){function r(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return r}(),e6=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,t6=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Qv=3,r6=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",e6]],Wv=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function n6(r){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new XB:typeof navigator<"u"?s6(navigator.userAgent):a6()}function i6(r){return r!==""&&r6.reduce(function(e,t){var n=t[0],i=t[1];if(e)return e;var o=i.exec(r);return!!o&&[n,o]},!1)}function s6(r){var e=i6(r);if(!e)return null;var t=e[0],n=e[1];if(t==="searchbot")return new ZB;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Qv&&(i=Kv(Kv([],i,!0),c6(Qv-i.length),!0)):i=[];var o=i.join("."),c=o6(r),u=t6.exec(r);return u&&u[1]?new YB(t,o,c,u[1]):new WB(t,o,c)}function o6(r){for(var e=0,t=Wv.length;e<t;e++){var n=Wv[e],i=n[0],o=n[1],c=o.exec(r);if(c)return i}return null}function a6(){var r=typeof process<"u"&&process.version;return r?new JB(process.version.slice(1)):null}function c6(r){for(var e=[],t=0;t<r;t++)e.push("0");return e}var Fg={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Y0=function(r,e){return Y0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Y0(r,e)};function u6(r,e){Y0(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Z0=function(){return Z0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Z0.apply(this,arguments)};function l6(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function h6(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(c=r[u])&&(o=(i<3?c(o):i>3?c(e,t,o):c(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o}function f6(r,e){return function(t,n){e(t,n,r)}}function d6(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function p6(r,e,t,n){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function u(d){try{f(n.next(d))}catch(g){c(g)}}function l(d){try{f(n.throw(d))}catch(g){c(g)}}function f(d){d.done?o(d.value):i(d.value).then(u,l)}f((n=n.apply(r,e||[])).next())})}function g6(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function u(f){return function(d){return l([f,d])}}function l(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(d){f=[6,d],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function y6(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function m6(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function X0(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function X_(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(u){c={error:u}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return o}function w6(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(X_(arguments[e]));return r}function b6(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var o=arguments[e],c=0,u=o.length;c<u;c++,i++)n[i]=o[c];return n}function ml(r){return this instanceof ml?(this.v=r,this):new ml(r)}function v6(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(m){n[m]&&(i[m]=function(b){return new Promise(function(I,x){o.push([m,b,I,x])>1||u(m,b)})})}function u(m,b){try{l(n[m](b))}catch(I){g(o[0][3],I)}}function l(m){m.value instanceof ml?Promise.resolve(m.value.v).then(f,d):g(o[0][2],m)}function f(m){u("next",m)}function d(m){u("throw",m)}function g(m,b){m(b),o.shift(),o.length&&u(o[0][0],o[0][1])}}function E6(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=r[i]?function(c){return(t=!t)?{value:ml(r[i](c)),done:i==="return"}:o?o(c):c}:o}}function A6(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof X0=="function"?X0(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(c){return new Promise(function(u,l){c=r[o](c),i(u,l,c.done,c.value)})}}function i(o,c,u,l){Promise.resolve(l).then(function(f){o({value:f,done:u})},c)}}function _6(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function I6(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function x6(r){return r&&r.__esModule?r:{default:r}}function S6(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function P6(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const D6=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Z0},__asyncDelegator:E6,__asyncGenerator:v6,__asyncValues:A6,__await:ml,__awaiter:p6,__classPrivateFieldGet:S6,__classPrivateFieldSet:P6,__createBinding:y6,__decorate:h6,__exportStar:m6,__extends:u6,__generator:g6,__importDefault:x6,__importStar:I6,__makeTemplateObject:_6,__metadata:d6,__param:f6,__read:X_,__rest:l6,__spread:w6,__spreadArrays:b6,__values:X0},Symbol.toStringTag,{value:"Module"})),ps=Fy(D6);var Lg={},Fu={},Jv;function O6(){if(Jv)return Fu;Jv=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Fu.delay=r,Fu}var _o={},Mg={},Io={},Yv;function C6(){return Yv||(Yv=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.ONE_THOUSAND=Io.ONE_HUNDRED=void 0,Io.ONE_HUNDRED=100,Io.ONE_THOUSAND=1e3),Io}var kg={},Zv;function N6(){return Zv||(Zv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(kg)),kg}var Xv;function e2(){return Xv||(Xv=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ps;e.__exportStar(C6(),r),e.__exportStar(N6(),r)}(Mg)),Mg}var e1;function R6(){if(e1)return _o;e1=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.fromMiliseconds=_o.toMiliseconds=void 0;const r=e2();function e(n){return n*r.ONE_THOUSAND}_o.toMiliseconds=e;function t(n){return Math.floor(n/r.ONE_THOUSAND)}return _o.fromMiliseconds=t,_o}var t1;function T6(){return t1||(t1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ps;e.__exportStar(O6(),r),e.__exportStar(R6(),r)}(Lg)),Lg}var Ga={},r1;function B6(){if(r1)return Ga;r1=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const n=this.get(t);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-n.started;this.timestamps.set(t,{started:n.started,elapsed:i})}get(t){const n=this.timestamps.get(t);if(typeof n>"u")throw new Error(`No timestamp found for label: ${t}`);return n}elapsed(t){const n=this.get(t);return n.elapsed||Date.now()-n.started}}return Ga.Watch=r,Ga.default=r,Ga}var $g={},Lu={},n1;function U6(){if(n1)return Lu;n1=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.IWatch=void 0;class r{}return Lu.IWatch=r,Lu}var i1;function F6(){return i1||(i1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),ps.__exportStar(U6(),r)}($g)),$g}var s1;function jy(){return s1||(s1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ps;e.__exportStar(T6(),r),e.__exportStar(B6(),r),e.__exportStar(F6(),r),e.__exportStar(e2(),r)}(Fg)),Fg}var xe=jy(),wt={},o1;function t2(){if(o1)return wt;o1=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.getLocalStorage=wt.getLocalStorageOrThrow=wt.getCrypto=wt.getCryptoOrThrow=wt.getLocation=wt.getLocationOrThrow=wt.getNavigator=wt.getNavigatorOrThrow=wt.getDocument=wt.getDocumentOrThrow=wt.getFromWindowOrThrow=wt.getFromWindow=void 0;function r(m){let b;return typeof window<"u"&&typeof window[m]<"u"&&(b=window[m]),b}wt.getFromWindow=r;function e(m){const b=r(m);if(!b)throw new Error(`${m} is not defined in Window`);return b}wt.getFromWindowOrThrow=e;function t(){return e("document")}wt.getDocumentOrThrow=t;function n(){return r("document")}wt.getDocument=n;function i(){return e("navigator")}wt.getNavigatorOrThrow=i;function o(){return r("navigator")}wt.getNavigator=o;function c(){return e("location")}wt.getLocationOrThrow=c;function u(){return r("location")}wt.getLocation=u;function l(){return e("crypto")}wt.getCryptoOrThrow=l;function f(){return r("crypto")}wt.getCrypto=f;function d(){return e("localStorage")}wt.getLocalStorageOrThrow=d;function g(){return r("localStorage")}return wt.getLocalStorage=g,wt}var Jf=t2(),Mu={},a1;function L6(){if(a1)return Mu;a1=1,Object.defineProperty(Mu,"__esModule",{value:!0}),Mu.getWindowMetadata=void 0;const r=t2();function e(){let t,n;try{t=r.getDocumentOrThrow(),n=r.getLocationOrThrow()}catch{return null}function i(){const b=t.getElementsByTagName("link"),I=[];for(let x=0;x<b.length;x++){const B=b[x],M=B.getAttribute("rel");if(M&&M.toLowerCase().indexOf("icon")>-1){const R=B.getAttribute("href");if(R)if(R.toLowerCase().indexOf("https:")===-1&&R.toLowerCase().indexOf("http:")===-1&&R.indexOf("//")!==0){let C=n.protocol+"//"+n.host;if(R.indexOf("/")===0)C+=R;else{const S=n.pathname.split("/");S.pop();const D=S.join("/");C+=D+"/"+R}I.push(C)}else if(R.indexOf("//")===0){const C=n.protocol+R;I.push(C)}else I.push(R)}}return I}function o(...b){const I=t.getElementsByTagName("meta");for(let x=0;x<I.length;x++){const B=I[x],M=["itemprop","property","name"].map(R=>B.getAttribute(R)).filter(R=>R?b.includes(R):!1);if(M.length&&M){const R=B.getAttribute("content");if(R)return R}}return""}function c(){let b=o("name","og:site_name","og:title","twitter:title");return b||(b=t.title),b}function u(){return o("description","og:description","twitter:description","keywords")}const l=c(),f=u(),d=n.origin,g=i();return{description:f,url:d,icons:g,name:l}}return Mu.getWindowMetadata=e,Mu}var M6=L6(),jg={},Hg,c1;function k6(){return c1||(c1=1,Hg=r=>encodeURIComponent(r).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`)),Hg}var zg,u1;function $6(){if(u1)return zg;u1=1;var r="%[a-f0-9]{2}",e=new RegExp("("+r+")|([^%]+?)","gi"),t=new RegExp("("+r+")+","gi");function n(c,u){try{return[decodeURIComponent(c.join(""))]}catch{}if(c.length===1)return c;u=u||1;var l=c.slice(0,u),f=c.slice(u);return Array.prototype.concat.call([],n(l),n(f))}function i(c){try{return decodeURIComponent(c)}catch{for(var u=c.match(e)||[],l=1;l<u.length;l++)c=n(u,l).join(""),u=c.match(e)||[];return c}}function o(c){for(var u={"%FE%FF":"��","%FF%FE":"��"},l=t.exec(c);l;){try{u[l[0]]=decodeURIComponent(l[0])}catch{var f=i(l[0]);f!==l[0]&&(u[l[0]]=f)}l=t.exec(c)}u["%C2"]="�";for(var d=Object.keys(u),g=0;g<d.length;g++){var m=d[g];c=c.replace(new RegExp(m,"g"),u[m])}return c}return zg=function(c){if(typeof c!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof c+"`");try{return c=c.replace(/\+/g," "),decodeURIComponent(c)}catch{return o(c)}},zg}var Gg,l1;function j6(){return l1||(l1=1,Gg=(r,e)=>{if(!(typeof r=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[r];const t=r.indexOf(e);return t===-1?[r]:[r.slice(0,t),r.slice(t+e.length)]}),Gg}var qg,h1;function H6(){return h1||(h1=1,qg=function(r,e){for(var t={},n=Object.keys(r),i=Array.isArray(e),o=0;o<n.length;o++){var c=n[o],u=r[c];(i?e.indexOf(c)!==-1:e(c,u,r))&&(t[c]=u)}return t}),qg}var f1;function z6(){return f1||(f1=1,function(r){const e=k6(),t=$6(),n=j6(),i=H6(),o=R=>R==null,c=Symbol("encodeFragmentIdentifier");function u(R){switch(R.arrayFormat){case"index":return C=>(S,D)=>{const E=S.length;return D===void 0||R.skipNull&&D===null||R.skipEmptyString&&D===""?S:D===null?[...S,[d(C,R),"[",E,"]"].join("")]:[...S,[d(C,R),"[",d(E,R),"]=",d(D,R)].join("")]};case"bracket":return C=>(S,D)=>D===void 0||R.skipNull&&D===null||R.skipEmptyString&&D===""?S:D===null?[...S,[d(C,R),"[]"].join("")]:[...S,[d(C,R),"[]=",d(D,R)].join("")];case"colon-list-separator":return C=>(S,D)=>D===void 0||R.skipNull&&D===null||R.skipEmptyString&&D===""?S:D===null?[...S,[d(C,R),":list="].join("")]:[...S,[d(C,R),":list=",d(D,R)].join("")];case"comma":case"separator":case"bracket-separator":{const C=R.arrayFormat==="bracket-separator"?"[]=":"=";return S=>(D,E)=>E===void 0||R.skipNull&&E===null||R.skipEmptyString&&E===""?D:(E=E===null?"":E,D.length===0?[[d(S,R),C,d(E,R)].join("")]:[[D,d(E,R)].join(R.arrayFormatSeparator)])}default:return C=>(S,D)=>D===void 0||R.skipNull&&D===null||R.skipEmptyString&&D===""?S:D===null?[...S,d(C,R)]:[...S,[d(C,R),"=",d(D,R)].join("")]}}function l(R){let C;switch(R.arrayFormat){case"index":return(S,D,E)=>{if(C=/\[(\d*)\]$/.exec(S),S=S.replace(/\[\d*\]$/,""),!C){E[S]=D;return}E[S]===void 0&&(E[S]={}),E[S][C[1]]=D};case"bracket":return(S,D,E)=>{if(C=/(\[\])$/.exec(S),S=S.replace(/\[\]$/,""),!C){E[S]=D;return}if(E[S]===void 0){E[S]=[D];return}E[S]=[].concat(E[S],D)};case"colon-list-separator":return(S,D,E)=>{if(C=/(:list)$/.exec(S),S=S.replace(/:list$/,""),!C){E[S]=D;return}if(E[S]===void 0){E[S]=[D];return}E[S]=[].concat(E[S],D)};case"comma":case"separator":return(S,D,E)=>{const p=typeof D=="string"&&D.includes(R.arrayFormatSeparator),_=typeof D=="string"&&!p&&g(D,R).includes(R.arrayFormatSeparator);D=_?g(D,R):D;const $=p||_?D.split(R.arrayFormatSeparator).map(q=>g(q,R)):D===null?D:g(D,R);E[S]=$};case"bracket-separator":return(S,D,E)=>{const p=/(\[\])$/.test(S);if(S=S.replace(/\[\]$/,""),!p){E[S]=D&&g(D,R);return}const _=D===null?[]:D.split(R.arrayFormatSeparator).map($=>g($,R));if(E[S]===void 0){E[S]=_;return}E[S]=[].concat(E[S],_)};default:return(S,D,E)=>{if(E[S]===void 0){E[S]=D;return}E[S]=[].concat(E[S],D)}}}function f(R){if(typeof R!="string"||R.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function d(R,C){return C.encode?C.strict?e(R):encodeURIComponent(R):R}function g(R,C){return C.decode?t(R):R}function m(R){return Array.isArray(R)?R.sort():typeof R=="object"?m(Object.keys(R)).sort((C,S)=>Number(C)-Number(S)).map(C=>R[C]):R}function b(R){const C=R.indexOf("#");return C!==-1&&(R=R.slice(0,C)),R}function I(R){let C="";const S=R.indexOf("#");return S!==-1&&(C=R.slice(S)),C}function x(R){R=b(R);const C=R.indexOf("?");return C===-1?"":R.slice(C+1)}function B(R,C){return C.parseNumbers&&!Number.isNaN(Number(R))&&typeof R=="string"&&R.trim()!==""?R=Number(R):C.parseBooleans&&R!==null&&(R.toLowerCase()==="true"||R.toLowerCase()==="false")&&(R=R.toLowerCase()==="true"),R}function M(R,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),f(C.arrayFormatSeparator);const S=l(C),D=Object.create(null);if(typeof R!="string"||(R=R.trim().replace(/^[?#&]/,""),!R))return D;for(const E of R.split("&")){if(E==="")continue;let[p,_]=n(C.decode?E.replace(/\+/g," "):E,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(C.arrayFormat)?_:g(_,C),S(g(p,C),_,D)}for(const E of Object.keys(D)){const p=D[E];if(typeof p=="object"&&p!==null)for(const _ of Object.keys(p))p[_]=B(p[_],C);else D[E]=B(p,C)}return C.sort===!1?D:(C.sort===!0?Object.keys(D).sort():Object.keys(D).sort(C.sort)).reduce((E,p)=>{const _=D[p];return _&&typeof _=="object"&&!Array.isArray(_)?E[p]=m(_):E[p]=_,E},Object.create(null))}r.extract=x,r.parse=M,r.stringify=(R,C)=>{if(!R)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),f(C.arrayFormatSeparator);const S=_=>C.skipNull&&o(R[_])||C.skipEmptyString&&R[_]==="",D=u(C),E={};for(const _ of Object.keys(R))S(_)||(E[_]=R[_]);const p=Object.keys(E);return C.sort!==!1&&p.sort(C.sort),p.map(_=>{const $=R[_];return $===void 0?"":$===null?d(_,C):Array.isArray($)?$.length===0&&C.arrayFormat==="bracket-separator"?d(_,C)+"[]":$.reduce(D(_),[]).join("&"):d(_,C)+"="+d($,C)}).filter(_=>_.length>0).join("&")},r.parseUrl=(R,C)=>{C=Object.assign({decode:!0},C);const[S,D]=n(R,"#");return Object.assign({url:S.split("?")[0]||"",query:M(x(R),C)},C&&C.parseFragmentIdentifier&&D?{fragmentIdentifier:g(D,C)}:{})},r.stringifyUrl=(R,C)=>{C=Object.assign({encode:!0,strict:!0,[c]:!0},C);const S=b(R.url).split("?")[0]||"",D=r.extract(R.url),E=r.parse(D,{sort:!1}),p=Object.assign(E,R.query);let _=r.stringify(p,C);_&&(_=`?${_}`);let $=I(R.url);return R.fragmentIdentifier&&($=`#${C[c]?d(R.fragmentIdentifier,C):R.fragmentIdentifier}`),`${S}${_}${$}`},r.pick=(R,C,S)=>{S=Object.assign({parseFragmentIdentifier:!0,[c]:!1},S);const{url:D,query:E,fragmentIdentifier:p}=r.parseUrl(R,S);return r.stringifyUrl({url:D,query:i(E,C),fragmentIdentifier:p},S)},r.exclude=(R,C,S)=>{const D=Array.isArray(C)?E=>!C.includes(E):(E,p)=>!C(E,p);return r.pick(R,D,S)}}(jg)),jg}var Yf=z6();const G6={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};function q6(r,e=[]){const t=[];return Object.keys(r).forEach(n=>{if(e.length&&!e.includes(n))return;const i=r[n];t.push(...i.accounts)}),t}function r2(r,e){return r.includes(":")?[r]:e.chains||[]}const n2="base10",Fr="base16",ey="base64pad",Hy="utf8",i2=0,da=1,V6=0,d1=1,ty=12,zy=32;function K6(){const r=K_.generateKeyPair();return{privateKey:Un(r.secretKey,Fr),publicKey:Un(r.publicKey,Fr)}}function ry(){const r=V_.randomBytes(zy);return Un(r,Fr)}function Q6(r,e){const t=K_.sharedKey(ei(r,Fr),ei(e,Fr)),n=new zT.HKDF(ky.SHA256,t).expand(zy);return Un(n,Fr)}function W6(r){const e=ky.hash(ei(r,Fr));return Un(e,Fr)}function ic(r){const e=ky.hash(ei(r,Hy));return Un(e,Fr)}function J6(r){return ei(`${r}`,n2)}function Fl(r){return Number(Un(r,n2))}function Y6(r){const e=J6(typeof r.type<"u"?r.type:i2);if(Fl(e)===da&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?ei(r.senderPublicKey,Fr):void 0,n=typeof r.iv<"u"?ei(r.iv,Fr):V_.randomBytes(ty),i=new G_.ChaCha20Poly1305(ei(r.symKey,Fr)).seal(n,ei(r.message,Hy));return X6({type:e,sealed:i,iv:n,senderPublicKey:t})}function Z6(r){const e=new G_.ChaCha20Poly1305(ei(r.symKey,Fr)),{sealed:t,iv:n}=Zf(r.encoded),i=e.open(n,t);if(i===null)throw new Error("Failed to decrypt");return Un(i,Hy)}function X6(r){if(Fl(r.type)===da){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Un(Gv([r.type,r.senderPublicKey,r.iv,r.sealed]),ey)}return Un(Gv([r.type,r.iv,r.sealed]),ey)}function Zf(r){const e=ei(r,ey),t=e.slice(V6,d1),n=d1;if(Fl(t)===da){const u=n+zy,l=u+ty,f=e.slice(n,u),d=e.slice(u,l),g=e.slice(l);return{type:t,sealed:g,iv:d,senderPublicKey:f}}const i=n+ty,o=e.slice(n,i),c=e.slice(i);return{type:t,sealed:c,iv:o}}function e5(r,e){const t=Zf(r);return s2({type:Fl(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Un(t.senderPublicKey,Fr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function s2(r){const e=(r==null?void 0:r.type)||i2;if(e===da){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function p1(r){return r.type===da&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var t5=Object.defineProperty,g1=Object.getOwnPropertySymbols,r5=Object.prototype.hasOwnProperty,n5=Object.prototype.propertyIsEnumerable,y1=(r,e,t)=>e in r?t5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,m1=(r,e)=>{for(var t in e||(e={}))r5.call(e,t)&&y1(r,t,e[t]);if(g1)for(var t of g1(e))n5.call(e,t)&&y1(r,t,e[t]);return r};const i5="ReactNative",Js={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},s5="js";function Gy(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function o2(){return!Jf.getDocument()&&!!Jf.getNavigator()&&navigator.product===i5}function qy(){return!Gy()&&!!Jf.getNavigator()}function Vy(){return o2()?Js.reactNative:Gy()?Js.node:qy()?Js.browser:Js.unknown}function o5(r,e){let t=Yf.parse(r);return t=m1(m1({},t),e),r=Yf.stringify(t),r}function a5(){return M6.getWindowMetadata()||{name:"",description:"",url:"",icons:[""]}}function c5(){if(Vy()===Js.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:n}=global.Platform;return[t,n].join("-")}const r=n6();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function u5(){var r;const e=Vy();return e===Js.browser?[e,((r=Jf.getLocation())==null?void 0:r.host)||"unknown"].join(":"):e}function l5(r,e,t){const n=c5(),i=u5();return[[r,e].join("-"),[s5,t].join("-"),n,i].join("/")}function h5({protocol:r,version:e,relayUrl:t,sdkVersion:n,auth:i,projectId:o,useOnCloseEvent:c}){const u=t.split("?"),l=l5(r,e,n),f={auth:i,ua:l,projectId:o,useOnCloseEvent:c},d=o5(u[1]||"",f);return u[0]+"?"+d}function Fo(r,e){return r.filter(t=>e.includes(t)).length===r.length}function a2(r){return Object.fromEntries(r.entries())}function c2(r){return new Map(Object.entries(r))}function Wa(r=xe.FIVE_MINUTES,e){const t=xe.toMiliseconds(r||xe.FIVE_MINUTES);let n,i,o;return{resolve:c=>{o&&n&&(clearTimeout(o),n(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,u)=>{o=setTimeout(()=>{u(new Error(e))},t),n=c,i=u})}}function Xf(r,e,t){return new Promise(async(n,i)=>{const o=setTimeout(()=>i(new Error(t)),e);try{const c=await r;n(c)}catch(c){i(c)}clearTimeout(o)})}function u2(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function f5(r){return u2("topic",r)}function d5(r){return u2("id",r)}function l2(r){const[e,t]=r.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")n.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))n.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return n}function Yn(r,e){return xe.fromMiliseconds(Date.now()+xe.toMiliseconds(r))}function Rs(r){return Date.now()>=xe.toMiliseconds(r)}function Wt(r,e){return`${r}${e?`:${e}`:""}`}function Vg(r=[],e=[]){return[...new Set([...r,...e])]}async function p5({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;const n=typeof t=="string"?JSON.parse(t):t;let i=n==null?void 0:n.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const o=`${i}/wc?requestId=${r}&sessionTopic=${e}`,c=Vy();c===Js.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):c===Js.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}const g5="irn";function ny(r){return(r==null?void 0:r.relay)||{protocol:g5}}function Rf(r){const e=G6[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var y5=Object.defineProperty,w1=Object.getOwnPropertySymbols,m5=Object.prototype.hasOwnProperty,w5=Object.prototype.propertyIsEnumerable,b1=(r,e,t)=>e in r?y5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b5=(r,e)=>{for(var t in e||(e={}))m5.call(e,t)&&b1(r,t,e[t]);if(w1)for(var t of w1(e))w5.call(e,t)&&b1(r,t,e[t]);return r};function v5(r,e="-"){const t={},n="relay"+e;return Object.keys(r).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,""),c=r[i];t[o]=c}}),t}function E5(r){const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,n=r.substring(0,e),i=r.substring(e+1,t).split("@"),o=typeof t<"u"?r.substring(t):"",c=Yf.parse(o);return{protocol:n,topic:A5(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:v5(c)}}function A5(r){return r.startsWith("//")?r.substring(2):r}function _5(r,e="-"){const t="relay",n={};return Object.keys(r).forEach(i=>{const o=t+e+i;r[i]&&(n[o]=r[i])}),n}function I5(r){return`${r.protocol}:${r.topic}@${r.version}?`+Yf.stringify(b5({symKey:r.symKey},_5(r.relay)))}function nu(r){const e=[];return r.forEach(t=>{const[n,i]=t.split(":");e.push(`${n}:${i}`)}),e}function x5(r){const e=[];return Object.values(r).forEach(t=>{e.push(...nu(t.accounts))}),e}function S5(r,e){const t=[];return Object.values(r).forEach(n=>{nu(n.accounts).includes(e)&&t.push(...n.methods)}),t}function P5(r,e){const t=[];return Object.values(r).forEach(n=>{nu(n.accounts).includes(e)&&t.push(...n.events)}),t}function D5(r,e){const t=Bf(r,e);if(t)throw new Error(t.message);const n={};for(const[i,o]of Object.entries(r))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return n}function Ky(r){return r.includes(":")}function Tf(r){return Ky(r)?r.split(":")[0]:r}const O5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},C5={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ge(r,e){const{message:t,code:n}=C5[r];return{message:e?`${t} ${e}`:t,code:n}}function zt(r,e){const{message:t,code:n}=O5[r];return{message:e?`${t} ${e}`:t,code:n}}function Si(r,e){return!!Array.isArray(r)}function sc(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Rr(r){return typeof r>"u"}function cr(r,e){return e&&Rr(r)?!0:typeof r=="string"&&!!r.trim().length}function Qy(r,e){return e&&Rr(r)?!0:typeof r=="number"&&!isNaN(r)}function N5(r,e){const{requiredNamespaces:t}=e,n=Object.keys(r.namespaces),i=Object.keys(t);let o=!0;return Fo(i,n)?(n.forEach(c=>{const{accounts:u,methods:l,events:f}=r.namespaces[c],d=nu(u),g=t[c];(!Fo(r2(c,g),d)||!Fo(g.methods,l)||!Fo(g.events,f))&&(o=!1)}),o):!1}function ed(r){return cr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function R5(r){if(cr(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&ed(t)}}return!1}function T5(r){if(cr(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function B5(r){var e;return(e=r==null?void 0:r.proposer)==null?void 0:e.publicKey}function U5(r){return r==null?void 0:r.topic}function F5(r,e){let t=null;return cr(r==null?void 0:r.publicKey,!1)||(t=ge("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function v1(r){let e=!0;return Si(r)?r.length&&(e=r.every(t=>cr(t,!1))):e=!1,e}function L5(r,e,t){let n=null;return Si(e)&&e.length?e.forEach(i=>{n||ed(i)||(n=zt("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):ed(r)||(n=zt("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function M5(r,e,t){let n=null;return Object.entries(r).forEach(([i,o])=>{if(n)return;const c=L5(i,r2(i,o),`${e} ${t}`);c&&(n=c)}),n}function k5(r,e){let t=null;return Si(r)?r.forEach(n=>{t||R5(n)||(t=zt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):t=zt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function $5(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=k5(n==null?void 0:n.accounts,`${e} namespace`);i&&(t=i)}),t}function j5(r,e){let t=null;return v1(r==null?void 0:r.methods)?v1(r==null?void 0:r.events)||(t=zt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=zt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function h2(r,e){let t=null;return Object.values(r).forEach(n=>{if(t)return;const i=j5(n,`${e}, namespace`);i&&(t=i)}),t}function H5(r,e,t){let n=null;if(r&&sc(r)){const i=h2(r,e);i&&(n=i);const o=M5(r,e,t);o&&(n=o)}else n=ge("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return n}function Bf(r,e){let t=null;if(r&&sc(r)){const n=h2(r,e);n&&(t=n);const i=$5(r,e);i&&(t=i)}else t=ge("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function f2(r){return cr(r.protocol,!0)}function z5(r,e){let t=!1;return r?r&&Si(r)&&r.length&&r.forEach(n=>{t=f2(n)}):t=!0,t}function G5(r){return typeof r=="number"}function qr(r){return typeof r<"u"&&typeof r!==null}function q5(r){return!(!r||typeof r!="object"||!r.code||!Qy(r.code,!1)||!r.message||!cr(r.message,!1))}function V5(r){return!(Rr(r)||!cr(r.method,!1))}function K5(r){return!(Rr(r)||Rr(r.result)&&Rr(r.error)||!Qy(r.id,!1)||!cr(r.jsonrpc,!1))}function Q5(r){return!(Rr(r)||!cr(r.name,!1))}function E1(r,e){return!(!ed(e)||!x5(r).includes(e))}function W5(r,e,t){return cr(t,!1)?S5(r,e).includes(t):!1}function J5(r,e,t){return cr(t,!1)?P5(r,e).includes(t):!1}function A1(r,e,t){let n=null;const i=Y5(r),o=Z5(e),c=Object.keys(i),u=Object.keys(o),l=_1(Object.keys(r)),f=_1(Object.keys(e)),d=l.filter(g=>!f.includes(g));return d.length&&(n=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${d.toString()}
      Received: ${Object.keys(e).toString()}`)),Fo(c,u)||(n=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${u.toString()}`)),Object.keys(e).forEach(g=>{if(!g.includes(":")||n)return;const m=nu(e[g].accounts);m.includes(g)||(n=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${g}
        Required: ${g}
        Approved: ${m.toString()}`))}),c.forEach(g=>{n||(Fo(i[g].methods,o[g].methods)?Fo(i[g].events,o[g].events)||(n=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${g}`)):n=ge("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${g}`))}),n}function Y5(r){const e={};return Object.keys(r).forEach(t=>{var n;t.includes(":")?e[t]=r[t]:(n=r[t].chains)==null||n.forEach(i=>{e[i]={methods:r[t].methods,events:r[t].events}})}),e}function _1(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Z5(r){const e={};return Object.keys(r).forEach(t=>{if(t.includes(":"))e[t]=r[t];else{const n=nu(r[t].accounts);n==null||n.forEach(i=>{e[i]={accounts:r[t].accounts.filter(o=>o.includes(`${i}:`)),methods:r[t].methods,events:r[t].events}})}}),e}function X5(r,e){return Qy(r,!1)&&r<=e.max&&r>=e.min}const eU=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,tU=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,rU=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function nU(r,e){if(r==="__proto__"||r==="constructor"&&e&&typeof e=="object"&&"prototype"in e){iU(r);return}return e}function iU(r){console.warn(`[destr] Dropping "${r}" key to prevent prototype pollution.`)}function df(r,e={}){if(typeof r!="string")return r;if(r[0]==='"'&&r[r.length-1]==='"'&&r.indexOf("\\")===-1)return r.slice(1,-1);const t=r.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!rU.test(r)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return r}try{if(eU.test(r)||tU.test(r)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(r,nU)}return JSON.parse(r)}catch(n){if(e.strict)throw n;return r}}function sU(r){return!r||typeof r.then!="function"?Promise.resolve(r):r}function sr(r,...e){try{return sU(r(...e))}catch(t){return Promise.reject(t)}}function oU(r){const e=typeof r;return r===null||e!=="object"&&e!=="function"}function aU(r){const e=Object.getPrototypeOf(r);return!e||e.isPrototypeOf(Object)}function Uf(r){if(oU(r))return String(r);if(aU(r)||Array.isArray(r))return JSON.stringify(r);if(typeof r.toJSON=="function")return Uf(r.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const iy="base64:";function cU(r){return typeof r=="string"?r:iy+hU(r)}function uU(r){return typeof r!="string"||!r.startsWith(iy)?r:lU(r.slice(iy.length))}function lU(r){return globalThis.Buffer?Buffer.from(r,"base64"):Uint8Array.from(globalThis.atob(r),e=>e.codePointAt(0))}function hU(r){return globalThis.Buffer?Buffer.from(r).toString("base64"):globalThis.btoa(String.fromCodePoint(...r))}function Gr(r){var e;return r&&((e=r.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function fU(...r){return Gr(r.join(":"))}function pf(r){return r=Gr(r),r?r+":":""}function dU(r,e){if(e===void 0)return!0;let t=0,n=r.indexOf(":");for(;n>-1;)t++,n=r.indexOf(":",n+1);return t<=e}function pU(r,e){return e?r.startsWith(e)&&r[r.length-1]!=="$":r[r.length-1]!=="$"}const gU="memory",yU=()=>{const r=new Map;return{name:gU,getInstance:()=>r,hasItem(e){return r.has(e)},getItem(e){return r.get(e)??null},getItemRaw(e){return r.get(e)??null},setItem(e,t){r.set(e,t)},setItemRaw(e,t){r.set(e,t)},removeItem(e){r.delete(e)},getKeys(){return[...r.keys()]},clear(){r.clear()},dispose(){r.clear()}}};function mU(r={}){const e={mounts:{"":r.driver||yU()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},t=f=>{for(const d of e.mountpoints)if(f.startsWith(d))return{base:d,relativeKey:f.slice(d.length),driver:e.mounts[d]};return{base:"",relativeKey:f,driver:e.mounts[""]}},n=(f,d)=>e.mountpoints.filter(g=>g.startsWith(f)||d&&f.startsWith(g)).map(g=>({relativeBase:f.length>g.length?f.slice(g.length):void 0,mountpoint:g,driver:e.mounts[g]})),i=(f,d)=>{if(e.watching){d=Gr(d);for(const g of e.watchListeners)g(f,d)}},o=async()=>{if(!e.watching){e.watching=!0;for(const f in e.mounts)e.unwatch[f]=await I1(e.mounts[f],i,f)}},c=async()=>{if(e.watching){for(const f in e.unwatch)await e.unwatch[f]();e.unwatch={},e.watching=!1}},u=(f,d,g)=>{const m=new Map,b=I=>{let x=m.get(I.base);return x||(x={driver:I.driver,base:I.base,items:[]},m.set(I.base,x)),x};for(const I of f){const x=typeof I=="string",B=Gr(x?I:I.key),M=x?void 0:I.value,R=x||!I.options?d:{...d,...I.options},C=t(B);b(C).items.push({key:B,value:M,relativeKey:C.relativeKey,options:R})}return Promise.all([...m.values()].map(I=>g(I))).then(I=>I.flat())},l={hasItem(f,d={}){f=Gr(f);const{relativeKey:g,driver:m}=t(f);return sr(m.hasItem,g,d)},getItem(f,d={}){f=Gr(f);const{relativeKey:g,driver:m}=t(f);return sr(m.getItem,g,d).then(b=>df(b))},getItems(f,d={}){return u(f,d,g=>g.driver.getItems?sr(g.driver.getItems,g.items.map(m=>({key:m.relativeKey,options:m.options})),d).then(m=>m.map(b=>({key:fU(g.base,b.key),value:df(b.value)}))):Promise.all(g.items.map(m=>sr(g.driver.getItem,m.relativeKey,m.options).then(b=>({key:m.key,value:df(b)})))))},getItemRaw(f,d={}){f=Gr(f);const{relativeKey:g,driver:m}=t(f);return m.getItemRaw?sr(m.getItemRaw,g,d):sr(m.getItem,g,d).then(b=>uU(b))},async setItem(f,d,g={}){if(d===void 0)return l.removeItem(f);f=Gr(f);const{relativeKey:m,driver:b}=t(f);b.setItem&&(await sr(b.setItem,m,Uf(d),g),b.watch||i("update",f))},async setItems(f,d){await u(f,d,async g=>{if(g.driver.setItems)return sr(g.driver.setItems,g.items.map(m=>({key:m.relativeKey,value:Uf(m.value),options:m.options})),d);g.driver.setItem&&await Promise.all(g.items.map(m=>sr(g.driver.setItem,m.relativeKey,Uf(m.value),m.options)))})},async setItemRaw(f,d,g={}){if(d===void 0)return l.removeItem(f,g);f=Gr(f);const{relativeKey:m,driver:b}=t(f);if(b.setItemRaw)await sr(b.setItemRaw,m,d,g);else if(b.setItem)await sr(b.setItem,m,cU(d),g);else return;b.watch||i("update",f)},async removeItem(f,d={}){typeof d=="boolean"&&(d={removeMeta:d}),f=Gr(f);const{relativeKey:g,driver:m}=t(f);m.removeItem&&(await sr(m.removeItem,g,d),(d.removeMeta||d.removeMata)&&await sr(m.removeItem,g+"$",d),m.watch||i("remove",f))},async getMeta(f,d={}){typeof d=="boolean"&&(d={nativeOnly:d}),f=Gr(f);const{relativeKey:g,driver:m}=t(f),b=Object.create(null);if(m.getMeta&&Object.assign(b,await sr(m.getMeta,g,d)),!d.nativeOnly){const I=await sr(m.getItem,g+"$",d).then(x=>df(x));I&&typeof I=="object"&&(typeof I.atime=="string"&&(I.atime=new Date(I.atime)),typeof I.mtime=="string"&&(I.mtime=new Date(I.mtime)),Object.assign(b,I))}return b},setMeta(f,d,g={}){return this.setItem(f+"$",d,g)},removeMeta(f,d={}){return this.removeItem(f+"$",d)},async getKeys(f,d={}){var B;f=pf(f);const g=n(f,!0);let m=[];const b=[];let I=!0;for(const M of g){(B=M.driver.flags)!=null&&B.maxDepth||(I=!1);const R=await sr(M.driver.getKeys,M.relativeBase,d);for(const C of R){const S=M.mountpoint+Gr(C);m.some(D=>S.startsWith(D))||b.push(S)}m=[M.mountpoint,...m.filter(C=>!C.startsWith(M.mountpoint))]}const x=d.maxDepth!==void 0&&!I;return b.filter(M=>(!x||dU(M,d.maxDepth))&&pU(M,f))},async clear(f,d={}){f=pf(f),await Promise.all(n(f,!1).map(async g=>{if(g.driver.clear)return sr(g.driver.clear,g.relativeBase,d);if(g.driver.removeItem){const m=await g.driver.getKeys(g.relativeBase||"",d);return Promise.all(m.map(b=>g.driver.removeItem(b,d)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(f=>x1(f)))},async watch(f){return await o(),e.watchListeners.push(f),async()=>{e.watchListeners=e.watchListeners.filter(d=>d!==f),e.watchListeners.length===0&&await c()}},async unwatch(){e.watchListeners=[],await c()},mount(f,d){if(f=pf(f),f&&e.mounts[f])throw new Error(`already mounted at ${f}`);return f&&(e.mountpoints.push(f),e.mountpoints.sort((g,m)=>m.length-g.length)),e.mounts[f]=d,e.watching&&Promise.resolve(I1(d,i,f)).then(g=>{e.unwatch[f]=g}).catch(console.error),l},async unmount(f,d=!0){var g,m;f=pf(f),!(!f||!e.mounts[f])&&(e.watching&&f in e.unwatch&&((m=(g=e.unwatch)[f])==null||m.call(g),delete e.unwatch[f]),d&&await x1(e.mounts[f]),e.mountpoints=e.mountpoints.filter(b=>b!==f),delete e.mounts[f])},getMount(f=""){f=Gr(f)+":";const d=t(f);return{driver:d.driver,base:d.base}},getMounts(f="",d={}){return f=Gr(f),n(f,d.parents).map(m=>({driver:m.driver,base:m.mountpoint}))},keys:(f,d={})=>l.getKeys(f,d),get:(f,d={})=>l.getItem(f,d),set:(f,d,g={})=>l.setItem(f,d,g),has:(f,d={})=>l.hasItem(f,d),del:(f,d={})=>l.removeItem(f,d),remove:(f,d={})=>l.removeItem(f,d)};return l}function I1(r,e,t){return r.watch?r.watch((n,i)=>e(n,t+i)):()=>{}}async function x1(r){typeof r.dispose=="function"&&await sr(r.dispose)}function pa(r){return new Promise((e,t)=>{r.oncomplete=r.onsuccess=()=>e(r.result),r.onabort=r.onerror=()=>t(r.error)})}function d2(r,e){let t;const n=()=>{if(t)return t;const i=indexedDB.open(r);return i.onupgradeneeded=()=>i.result.createObjectStore(e),t=pa(i),t.then(o=>{o.onclose=()=>t=void 0},()=>{}),t};return(i,o)=>n().then(c=>o(c.transaction(e,i).objectStore(e)))}let Kg;function Ll(){return Kg||(Kg=d2("keyval-store","keyval")),Kg}function S1(r,e=Ll()){return e("readonly",t=>pa(t.get(r)))}function wU(r,e,t=Ll()){return t("readwrite",n=>(n.put(e,r),pa(n.transaction)))}function bU(r,e=Ll()){return e("readwrite",t=>(t.delete(r),pa(t.transaction)))}function vU(r=Ll()){return r("readwrite",e=>(e.clear(),pa(e.transaction)))}function EU(r,e){return r.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},pa(r.transaction)}function AU(r=Ll()){return r("readonly",e=>{if(e.getAllKeys)return pa(e.getAllKeys());const t=[];return EU(e,n=>t.push(n.key)).then(()=>t)})}const _U=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),IU=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ml(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return IU(r)}catch{return r}}function ua(r){return typeof r=="string"?r:_U(r)||""}const xU="idb-keyval";var SU=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=i=>e+i;let n;return r.dbName&&r.storeName&&(n=d2(r.dbName,r.storeName)),{name:xU,options:r,async hasItem(i){return!(typeof await S1(t(i),n)>"u")},async getItem(i){return await S1(t(i),n)??null},setItem(i,o){return wU(t(i),o,n)},removeItem(i){return bU(t(i),n)},getKeys(){return AU(n)},clear(){return vU(n)}}};const PU="WALLET_CONNECT_V2_INDEXED_DB",DU="keyvaluestorage";let OU=class{constructor(){this.indexedDb=mU({driver:SU({dbName:PU,storeName:DU})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,ua(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var Qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ff={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,n){this[t]=String(n)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(n){t[n]=void 0,delete t[n]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof Qg<"u"&&Qg.localStorage?Ff.exports=Qg.localStorage:typeof window<"u"&&window.localStorage?Ff.exports=window.localStorage:Ff.exports=new e})();function CU(r){var e;return[r[0],Ml((e=r[1])!=null?e:"")]}let NU=class{constructor(){this.localStorage=Ff.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(CU)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ml(t)}async setItem(e,t){this.localStorage.setItem(e,ua(t))}async removeItem(e){this.localStorage.removeItem(e)}};const RU="wc_storage_version",P1=1,TU=async(r,e,t)=>{const n=RU,i=await e.getItem(n);if(i&&i>=P1){t(e);return}const o=await r.getKeys();if(!o.length){t(e);return}const c=[];for(;o.length;){const u=o.shift();if(!u)continue;const l=u.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){const f=await r.getItem(u);await e.setItem(u,f),c.push(u)}}await e.setItem(n,P1),t(e),BU(r,c)},BU=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let UU=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new NU;this.storage=e;try{const t=new OU;TU(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Wg={},ku={},Jg={},$u={};class ga{}const FU=Object.freeze(Object.defineProperty({__proto__:null,IEvents:ga},Symbol.toStringTag,{value:"Module"})),LU=Fy(FU);var D1;function MU(){if(D1)return $u;D1=1,Object.defineProperty($u,"__esModule",{value:!0}),$u.IHeartBeat=void 0;const r=LU;class e extends r.IEvents{constructor(n){super()}}return $u.IHeartBeat=e,$u}var O1;function p2(){return O1||(O1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),ps.__exportStar(MU(),r)}(Jg)),Jg}var Yg={},xo={},C1;function kU(){if(C1)return xo;C1=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.HEARTBEAT_EVENTS=xo.HEARTBEAT_INTERVAL=void 0;const r=jy();return xo.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,xo.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},xo}var N1;function g2(){return N1||(N1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),ps.__exportStar(kU(),r)}(Yg)),Yg}var R1;function $U(){if(R1)return ku;R1=1,Object.defineProperty(ku,"__esModule",{value:!0}),ku.HeartBeat=void 0;const r=ps,e=z_(),t=jy(),n=p2(),i=g2();class o extends n.IHeartBeat{constructor(u){super(u),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(u==null?void 0:u.interval)||i.HEARTBEAT_INTERVAL}static init(u){return r.__awaiter(this,void 0,void 0,function*(){const l=new o(u);return yield l.init(),l})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(u,l){this.events.on(u,l)}once(u,l){this.events.once(u,l)}off(u,l){this.events.off(u,l)}removeListener(u,l){this.events.removeListener(u,l)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return ku.HeartBeat=o,ku}var T1;function jU(){return T1||(T1=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ps;e.__exportStar($U(),r),e.__exportStar(p2(),r),e.__exportStar(g2(),r)}(Wg)),Wg}var kl=jU(),Zg,B1;function HU(){if(B1)return Zg;B1=1;function r(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}Zg=e;function e(t,n,i){var o=i&&i.stringify||r,c=1;if(typeof t=="object"&&t!==null){var u=n.length+c;if(u===1)return t;var l=new Array(u);l[0]=o(t);for(var f=1;f<u;f++)l[f]=o(n[f]);return l.join(" ")}if(typeof t!="string")return t;var d=n.length;if(d===0)return t;for(var g="",m=1-c,b=-1,I=t&&t.length||0,x=0;x<I;){if(t.charCodeAt(x)===37&&x+1<I){switch(b=b>-1?b:0,t.charCodeAt(x+1)){case 100:case 102:if(m>=d||n[m]==null)break;b<x&&(g+=t.slice(b,x)),g+=Number(n[m]),b=x+2,x++;break;case 105:if(m>=d||n[m]==null)break;b<x&&(g+=t.slice(b,x)),g+=Math.floor(Number(n[m])),b=x+2,x++;break;case 79:case 111:case 106:if(m>=d||n[m]===void 0)break;b<x&&(g+=t.slice(b,x));var B=typeof n[m];if(B==="string"){g+="'"+n[m]+"'",b=x+2,x++;break}if(B==="function"){g+=n[m].name||"<anonymous>",b=x+2,x++;break}g+=o(n[m]),b=x+2,x++;break;case 115:if(m>=d)break;b<x&&(g+=t.slice(b,x)),g+=String(n[m]),b=x+2,x++;break;case 37:b<x&&(g+=t.slice(b,x)),g+="%",b=x+2,x++,m--;break}++m}++x}return b===-1?t:(b<I&&(g+=t.slice(b)),g)}return Zg}var Xg,U1;function zU(){if(U1)return Xg;U1=1;const r=HU();Xg=i;const e=D().console||{},t={mapHttpRequest:I,mapHttpResponse:I,wrapRequestSerializer:x,wrapResponseSerializer:x,wrapErrorSerializer:x,req:I,res:I,err:m};function n(E,p){return Array.isArray(E)?E.filter(function($){return $!=="!stdSerializers.err"}):E===!0?Object.keys(p):!1}function i(E){E=E||{},E.browser=E.browser||{};const p=E.browser.transmit;if(p&&typeof p.send!="function")throw Error("pino: transmit option must have a send function");const _=E.browser.write||e;E.browser.write&&(E.browser.asObject=!0);const $=E.serializers||{},q=n(E.browser.serialize,$);let Z=E.browser.serialize;Array.isArray(E.browser.serialize)&&E.browser.serialize.indexOf("!stdSerializers.err")>-1&&(Z=!1);const oe=["error","fatal","warn","info","debug","trace"];typeof _=="function"&&(_.error=_.fatal=_.warn=_.info=_.debug=_.trace=_),E.enabled===!1&&(E.level="silent");const fe=E.level||"info",re=Object.create(_);re.log||(re.log=B),Object.defineProperty(re,"levelVal",{get:w}),Object.defineProperty(re,"level",{get:T,set:H});const v={transmit:p,serialize:q,asObject:E.browser.asObject,levels:oe,timestamp:b(E)};re.levels=i.levels,re.level=fe,re.setMaxListeners=re.getMaxListeners=re.emit=re.addListener=re.on=re.prependListener=re.once=re.prependOnceListener=re.removeListener=re.removeAllListeners=re.listeners=re.listenerCount=re.eventNames=re.write=re.flush=B,re.serializers=$,re._serialize=q,re._stdErrSerialize=Z,re.child=Y,p&&(re._logEvent=g());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function T(){return this._level}function H(K){if(K!=="silent"&&!this.levels.values[K])throw Error("unknown level "+K);this._level=K,o(v,re,"error","log"),o(v,re,"fatal","error"),o(v,re,"warn","error"),o(v,re,"info","log"),o(v,re,"debug","log"),o(v,re,"trace","log")}function Y(K,ue){if(!K)throw new Error("missing bindings for child Pino");ue=ue||{},q&&K.serializers&&(ue.serializers=K.serializers);const he=ue.serializers;if(q&&he){var X=Object.assign({},$,he),ne=E.browser.serialize===!0?Object.keys(X):q;delete K.serializers,l([K],ne,X,this._stdErrSerialize)}function ee(me){this._childLevel=(me._childLevel|0)+1,this.error=f(me,K,"error"),this.fatal=f(me,K,"fatal"),this.warn=f(me,K,"warn"),this.info=f(me,K,"info"),this.debug=f(me,K,"debug"),this.trace=f(me,K,"trace"),X&&(this.serializers=X,this._serialize=ne),p&&(this._logEvent=g([].concat(me._logEvent.bindings,K)))}return ee.prototype=this,new ee(this)}return re}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=t,i.stdTimeFunctions=Object.assign({},{nullTime:M,epochTime:R,unixTime:C,isoTime:S});function o(E,p,_,$){const q=Object.getPrototypeOf(p);p[_]=p.levelVal>p.levels.values[_]?B:q[_]?q[_]:e[_]||e[$]||B,c(E,p,_)}function c(E,p,_){!E.transmit&&p[_]===B||(p[_]=function($){return function(){const Z=E.timestamp(),oe=new Array(arguments.length),fe=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var re=0;re<oe.length;re++)oe[re]=arguments[re];if(E.serialize&&!E.asObject&&l(oe,this._serialize,this.serializers,this._stdErrSerialize),E.asObject?$.call(fe,u(this,_,oe,Z)):$.apply(fe,oe),E.transmit){const v=E.transmit.level||p.level,w=i.levels.values[v],T=i.levels.values[_];if(T<w)return;d(this,{ts:Z,methodLevel:_,methodValue:T,transmitValue:i.levels.values[E.transmit.level||p.level],send:E.transmit.send,val:p.levelVal},oe)}}}(p[_]))}function u(E,p,_,$){E._serialize&&l(_,E._serialize,E.serializers,E._stdErrSerialize);const q=_.slice();let Z=q[0];const oe={};$&&(oe.time=$),oe.level=i.levels.values[p];let fe=(E._childLevel|0)+1;if(fe<1&&(fe=1),Z!==null&&typeof Z=="object"){for(;fe--&&typeof q[0]=="object";)Object.assign(oe,q.shift());Z=q.length?r(q.shift(),q):void 0}else typeof Z=="string"&&(Z=r(q.shift(),q));return Z!==void 0&&(oe.msg=Z),oe}function l(E,p,_,$){for(const q in E)if($&&E[q]instanceof Error)E[q]=i.stdSerializers.err(E[q]);else if(typeof E[q]=="object"&&!Array.isArray(E[q]))for(const Z in E[q])p&&p.indexOf(Z)>-1&&Z in _&&(E[q][Z]=_[Z](E[q][Z]))}function f(E,p,_){return function(){const $=new Array(1+arguments.length);$[0]=p;for(var q=1;q<$.length;q++)$[q]=arguments[q-1];return E[_].apply(this,$)}}function d(E,p,_){const $=p.send,q=p.ts,Z=p.methodLevel,oe=p.methodValue,fe=p.val,re=E._logEvent.bindings;l(_,E._serialize||Object.keys(E.serializers),E.serializers,E._stdErrSerialize===void 0?!0:E._stdErrSerialize),E._logEvent.ts=q,E._logEvent.messages=_.filter(function(v){return re.indexOf(v)===-1}),E._logEvent.level.label=Z,E._logEvent.level.value=oe,$(Z,E._logEvent,fe),E._logEvent=g(re)}function g(E){return{ts:0,messages:[],bindings:E||[],level:{label:"",value:0}}}function m(E){const p={type:E.constructor.name,msg:E.message,stack:E.stack};for(const _ in E)p[_]===void 0&&(p[_]=E[_]);return p}function b(E){return typeof E.timestamp=="function"?E.timestamp:E.timestamp===!1?M:R}function I(){return{}}function x(E){return E}function B(){}function M(){return!1}function R(){return Date.now()}function C(){return Math.round(Date.now()/1e3)}function S(){return new Date(Date.now()).toISOString()}function D(){function E(p){return typeof p<"u"&&p}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return E(self)||E(window)||E(this)||{}}}return Xg}var GU=zU();const Dd=xd(GU),qU={level:"info"},$l="custom_context";var VU=Object.defineProperty,KU=Object.defineProperties,QU=Object.getOwnPropertyDescriptors,F1=Object.getOwnPropertySymbols,WU=Object.prototype.hasOwnProperty,JU=Object.prototype.propertyIsEnumerable,L1=(r,e,t)=>e in r?VU(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,YU=(r,e)=>{for(var t in e||(e={}))WU.call(e,t)&&L1(r,t,e[t]);if(F1)for(var t of F1(e))JU.call(e,t)&&L1(r,t,e[t]);return r},ZU=(r,e)=>KU(r,QU(e));function Od(r){return ZU(YU({},r),{level:(r==null?void 0:r.level)||qU.level})}function XU(r,e=$l){return r[e]||""}function eF(r,e,t=$l){return r[t]=e,r}function Xr(r,e=$l){let t="";return typeof r.bindings>"u"?t=XU(r,e):t=r.bindings().context||"",t}function tF(r,e,t=$l){const n=Xr(r,t);return n.trim()?`${n}/${e}`:e}function pn(r,e,t=$l){const n=tF(r,e,t),i=r.child({context:n});return eF(i,n,t)}let rF=class extends ga{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}};class nF extends ga{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class iF{constructor(e,t){this.logger=e,this.core=t}}let sF=class extends ga{constructor(e,t){super(),this.relayer=e,this.logger=t}},oF=class extends ga{constructor(e){super()}},aF=class{constructor(e,t,n,i){this.core=e,this.logger=t,this.name=n}},cF=class extends ga{constructor(e,t){super(),this.relayer=e,this.logger=t}},uF=class extends ga{constructor(e,t){super(),this.core=e,this.logger=t}},lF=class{constructor(e,t){this.projectId=e,this.logger=t}};class hF{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}let fF=class{constructor(e){this.client=e}};function dF(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function y2(r,...e){if(!dF(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function M1(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function pF(r,e){y2(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const qa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const e0=r=>new DataView(r.buffer,r.byteOffset,r.byteLength);function gF(r){if(typeof r!="string")throw new Error("utf8ToBytes expected string, got "+typeof r);return new Uint8Array(new TextEncoder().encode(r))}function m2(r){return typeof r=="string"&&(r=gF(r)),y2(r),r}class yF{clone(){return this._cloneInto()}}function mF(r){const e=n=>r().update(m2(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function w2(r=32){if(qa&&typeof qa.getRandomValues=="function")return qa.getRandomValues(new Uint8Array(r));if(qa&&typeof qa.randomBytes=="function")return qa.randomBytes(r);throw new Error("crypto.getRandomValues must be defined")}function wF(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const i=BigInt(32),o=BigInt(4294967295),c=Number(t>>i&o),u=Number(t&o),l=n?4:0,f=n?0:4;r.setUint32(e+l,c,n),r.setUint32(e+f,u,n)}class bF extends yF{constructor(e,t,n,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=e0(this.buffer)}update(e){M1(this);const{view:t,buffer:n,blockLen:i}=this;e=m2(e);const o=e.length;for(let c=0;c<o;){const u=Math.min(i-this.pos,o-c);if(u===i){const l=e0(e);for(;i<=o-c;c+=i)this.process(l,c);continue}n.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){M1(this),pF(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:o}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>i-c&&(this.process(n,0),c=0);for(let g=c;g<i;g++)t[g]=0;wF(n,i-8,BigInt(this.length*8),o),this.process(n,0);const u=e0(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,d=this.get();if(f>d.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<f;g++)u.setUint32(4*g,d[g],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:i,finished:o,destroyed:c,pos:u}=this;return e.length=i,e.pos=u,e.finished=o,e.destroyed=c,i%t&&e.buffer.set(n),e}}const gf=BigInt(2**32-1),sy=BigInt(32);function b2(r,e=!1){return e?{h:Number(r&gf),l:Number(r>>sy&gf)}:{h:Number(r>>sy&gf)|0,l:Number(r&gf)|0}}function vF(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:o,l:c}=b2(r[i],e);[t[i],n[i]]=[o,c]}return[t,n]}const EF=(r,e)=>BigInt(r>>>0)<<sy|BigInt(e>>>0),AF=(r,e,t)=>r>>>t,_F=(r,e,t)=>r<<32-t|e>>>t,IF=(r,e,t)=>r>>>t|e<<32-t,xF=(r,e,t)=>r<<32-t|e>>>t,SF=(r,e,t)=>r<<64-t|e>>>t-32,PF=(r,e,t)=>r>>>t-32|e<<64-t,DF=(r,e)=>e,OF=(r,e)=>r,CF=(r,e,t)=>r<<t|e>>>32-t,NF=(r,e,t)=>e<<t|r>>>32-t,RF=(r,e,t)=>e<<t-32|r>>>64-t,TF=(r,e,t)=>r<<t-32|e>>>64-t;function BF(r,e,t,n){const i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}const UF=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),FF=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,LF=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),MF=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,kF=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),$F=(r,e,t,n,i,o)=>e+t+n+i+o+(r/2**32|0)|0,je={fromBig:b2,split:vF,toBig:EF,shrSH:AF,shrSL:_F,rotrSH:IF,rotrSL:xF,rotrBH:SF,rotrBL:PF,rotr32H:DF,rotr32L:OF,rotlSH:CF,rotlSL:NF,rotlBH:RF,rotlBL:TF,add:BF,add3L:UF,add3H:FF,add4L:LF,add4H:MF,add5H:$F,add5L:kF},[jF,HF]=je.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Os=new Uint32Array(80),Cs=new Uint32Array(80);class zF extends bF{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:i,Ch:o,Cl:c,Dh:u,Dl:l,Eh:f,El:d,Fh:g,Fl:m,Gh:b,Gl:I,Hh:x,Hl:B}=this;return[e,t,n,i,o,c,u,l,f,d,g,m,b,I,x,B]}set(e,t,n,i,o,c,u,l,f,d,g,m,b,I,x,B){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=c|0,this.Dh=u|0,this.Dl=l|0,this.Eh=f|0,this.El=d|0,this.Fh=g|0,this.Fl=m|0,this.Gh=b|0,this.Gl=I|0,this.Hh=x|0,this.Hl=B|0}process(e,t){for(let C=0;C<16;C++,t+=4)Os[C]=e.getUint32(t),Cs[C]=e.getUint32(t+=4);for(let C=16;C<80;C++){const S=Os[C-15]|0,D=Cs[C-15]|0,E=je.rotrSH(S,D,1)^je.rotrSH(S,D,8)^je.shrSH(S,D,7),p=je.rotrSL(S,D,1)^je.rotrSL(S,D,8)^je.shrSL(S,D,7),_=Os[C-2]|0,$=Cs[C-2]|0,q=je.rotrSH(_,$,19)^je.rotrBH(_,$,61)^je.shrSH(_,$,6),Z=je.rotrSL(_,$,19)^je.rotrBL(_,$,61)^je.shrSL(_,$,6),oe=je.add4L(p,Z,Cs[C-7],Cs[C-16]),fe=je.add4H(oe,E,q,Os[C-7],Os[C-16]);Os[C]=fe|0,Cs[C]=oe|0}let{Ah:n,Al:i,Bh:o,Bl:c,Ch:u,Cl:l,Dh:f,Dl:d,Eh:g,El:m,Fh:b,Fl:I,Gh:x,Gl:B,Hh:M,Hl:R}=this;for(let C=0;C<80;C++){const S=je.rotrSH(g,m,14)^je.rotrSH(g,m,18)^je.rotrBH(g,m,41),D=je.rotrSL(g,m,14)^je.rotrSL(g,m,18)^je.rotrBL(g,m,41),E=g&b^~g&x,p=m&I^~m&B,_=je.add5L(R,D,p,HF[C],Cs[C]),$=je.add5H(_,M,S,E,jF[C],Os[C]),q=_|0,Z=je.rotrSH(n,i,28)^je.rotrBH(n,i,34)^je.rotrBH(n,i,39),oe=je.rotrSL(n,i,28)^je.rotrBL(n,i,34)^je.rotrBL(n,i,39),fe=n&o^n&u^o&u,re=i&c^i&l^c&l;M=x|0,R=B|0,x=b|0,B=I|0,b=g|0,I=m|0,{h:g,l:m}=je.add(f|0,d|0,$|0,q|0),f=u|0,d=l|0,u=o|0,l=c|0,o=n|0,c=i|0;const v=je.add3L(q,oe,re);n=je.add3H(v,$,Z,fe),i=v|0}({h:n,l:i}=je.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:c}=je.add(this.Bh|0,this.Bl|0,o|0,c|0),{h:u,l}=je.add(this.Ch|0,this.Cl|0,u|0,l|0),{h:f,l:d}=je.add(this.Dh|0,this.Dl|0,f|0,d|0),{h:g,l:m}=je.add(this.Eh|0,this.El|0,g|0,m|0),{h:b,l:I}=je.add(this.Fh|0,this.Fl|0,b|0,I|0),{h:x,l:B}=je.add(this.Gh|0,this.Gl|0,x|0,B|0),{h:M,l:R}=je.add(this.Hh|0,this.Hl|0,M|0,R|0),this.set(n,i,o,c,u,l,f,d,g,m,b,I,x,B,M,R)}roundClean(){Os.fill(0),Cs.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const GF=mF(()=>new zF);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wy=BigInt(0),v2=BigInt(1),qF=BigInt(2);function Jy(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Yy(r){if(!Jy(r))throw new Error("Uint8Array expected")}function t0(r,e){if(typeof e!="boolean")throw new Error(r+" boolean expected, got "+e)}const VF=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Zy(r){Yy(r);let e="";for(let t=0;t<r.length;t++)e+=VF[r[t]];return e}function E2(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Wy:BigInt("0x"+r)}const ji={_0:48,_9:57,A:65,F:70,a:97,f:102};function k1(r){if(r>=ji._0&&r<=ji._9)return r-ji._0;if(r>=ji.A&&r<=ji.F)return r-(ji.A-10);if(r>=ji.a&&r<=ji.f)return r-(ji.a-10)}function A2(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let i=0,o=0;i<t;i++,o+=2){const c=k1(r.charCodeAt(o)),u=k1(r.charCodeAt(o+1));if(c===void 0||u===void 0){const l=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}n[i]=c*16+u}return n}function KF(r){return E2(Zy(r))}function Lf(r){return Yy(r),E2(Zy(Uint8Array.from(r).reverse()))}function _2(r,e){return A2(r.toString(16).padStart(e*2,"0"))}function oy(r,e){return _2(r,e).reverse()}function Hi(r,e,t){let n;if(typeof e=="string")try{n=A2(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(Jy(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");const i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function $1(...r){let e=0;for(let n=0;n<r.length;n++){const i=r[n];Yy(i),e+=i.length}const t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){const o=r[n];t.set(o,i),i+=o.length}return t}const r0=r=>typeof r=="bigint"&&Wy<=r;function QF(r,e,t){return r0(r)&&r0(e)&&r0(t)&&e<=r&&r<t}function ju(r,e,t,n){if(!QF(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function WF(r){let e;for(e=0;r>Wy;r>>=v2,e+=1);return e}const JF=r=>(qF<<BigInt(r-1))-v2,YF={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||Jy(r),isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Xy(r,e,t={}){const n=(i,o,c)=>{const u=YF[o];if(typeof u!="function")throw new Error("invalid validator function");const l=r[i];if(!(c&&l===void 0)&&!u(l,r))throw new Error("param "+String(i)+" is invalid. Expected "+o+", got "+l)};for(const[i,o]of Object.entries(e))n(i,o,!1);for(const[i,o]of Object.entries(t))n(i,o,!0);return r}function j1(r){const e=new WeakMap;return(t,...n)=>{const i=e.get(t);if(i!==void 0)return i;const o=r(t,...n);return e.set(t,o),o}}const lr=BigInt(0),qt=BigInt(1),Oo=BigInt(2),ZF=BigInt(3),ay=BigInt(4),H1=BigInt(5),z1=BigInt(8);function er(r,e){const t=r%e;return t>=lr?t:e+t}function XF(r,e,t){if(e<lr)throw new Error("invalid exponent, negatives unsupported");if(t<=lr)throw new Error("invalid modulus");if(t===qt)return lr;let n=qt;for(;e>lr;)e&qt&&(n=n*r%t),r=r*r%t,e>>=qt;return n}function li(r,e,t){let n=r;for(;e-- >lr;)n*=n,n%=t;return n}function G1(r,e){if(r===lr)throw new Error("invert: expected non-zero number");if(e<=lr)throw new Error("invert: expected positive modulus, got "+e);let t=er(r,e),n=e,i=lr,o=qt;for(;t!==lr;){const c=n/t,u=n%t,l=i-o*c;n=t,t=u,i=o,o=l}if(n!==qt)throw new Error("invert: does not exist");return er(i,e)}function e4(r){const e=(r-qt)/Oo;let t,n,i;for(t=r-qt,n=0;t%Oo===lr;t/=Oo,n++);for(i=Oo;i<r&&XF(i,e,r)!==r-qt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const c=(r+qt)/ay;return function(u,l){const f=u.pow(l,c);if(!u.eql(u.sqr(f),l))throw new Error("Cannot find square root");return f}}const o=(t+qt)/Oo;return function(c,u){if(c.pow(u,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let l=n,f=c.pow(c.mul(c.ONE,i),t),d=c.pow(u,o),g=c.pow(u,t);for(;!c.eql(g,c.ONE);){if(c.eql(g,c.ZERO))return c.ZERO;let m=1;for(let I=c.sqr(g);m<l&&!c.eql(I,c.ONE);m++)I=c.sqr(I);const b=c.pow(f,qt<<BigInt(l-m-1));f=c.sqr(b),d=c.mul(d,b),g=c.mul(g,f),l=m}return d}}function t4(r){if(r%ay===ZF){const e=(r+qt)/ay;return function(t,n){const i=t.pow(n,e);if(!t.eql(t.sqr(i),n))throw new Error("Cannot find square root");return i}}if(r%z1===H1){const e=(r-H1)/z1;return function(t,n){const i=t.mul(n,Oo),o=t.pow(i,e),c=t.mul(n,o),u=t.mul(t.mul(c,Oo),o),l=t.mul(c,t.sub(u,t.ONE));if(!t.eql(t.sqr(l),n))throw new Error("Cannot find square root");return l}}return e4(r)}const r4=(r,e)=>(er(r,e)&qt)===qt,n4=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function i4(r){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=n4.reduce((n,i)=>(n[i]="function",n),e);return Xy(r,t)}function s4(r,e,t){if(t<lr)throw new Error("invalid exponent, negatives unsupported");if(t===lr)return r.ONE;if(t===qt)return e;let n=r.ONE,i=e;for(;t>lr;)t&qt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=qt;return n}function o4(r,e){const t=new Array(e.length),n=e.reduce((o,c,u)=>r.is0(c)?o:(t[u]=o,r.mul(o,c)),r.ONE),i=r.inv(n);return e.reduceRight((o,c,u)=>r.is0(c)?o:(t[u]=r.mul(o,t[u]),r.mul(o,c)),i),t}function I2(r,e){const t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function x2(r,e,t=!1,n={}){if(r<=lr)throw new Error("invalid field: expected ORDER > 0, got "+r);const{nBitLength:i,nByteLength:o}=I2(r,e);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:r,isLE:t,BITS:i,BYTES:o,MASK:JF(i),ZERO:lr,ONE:qt,create:l=>er(l,r),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return lr<=l&&l<r},is0:l=>l===lr,isOdd:l=>(l&qt)===qt,neg:l=>er(-l,r),eql:(l,f)=>l===f,sqr:l=>er(l*l,r),add:(l,f)=>er(l+f,r),sub:(l,f)=>er(l-f,r),mul:(l,f)=>er(l*f,r),pow:(l,f)=>s4(u,l,f),div:(l,f)=>er(l*G1(f,r),r),sqrN:l=>l*l,addN:(l,f)=>l+f,subN:(l,f)=>l-f,mulN:(l,f)=>l*f,inv:l=>G1(l,r),sqrt:n.sqrt||(l=>(c||(c=t4(r)),c(u,l))),invertBatch:l=>o4(u,l),cmov:(l,f,d)=>d?f:l,toBytes:l=>t?oy(l,o):_2(l,o),fromBytes:l=>{if(l.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+l.length);return t?Lf(l):KF(l)}});return Object.freeze(u)}const q1=BigInt(0),yf=BigInt(1);function n0(r,e){const t=e.negate();return r?t:e}function S2(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function i0(r,e){S2(r,e);const t=Math.ceil(e/r)+1,n=2**(r-1);return{windows:t,windowSize:n}}function a4(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function c4(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const s0=new WeakMap,P2=new WeakMap;function o0(r){return P2.get(r)||1}function u4(r,e){return{constTimeNegate:n0,hasPrecomputes(t){return o0(t)!==1},unsafeLadder(t,n,i=r.ZERO){let o=t;for(;n>q1;)n&yf&&(i=i.add(o)),o=o.double(),n>>=yf;return i},precomputeWindow(t,n){const{windows:i,windowSize:o}=i0(n,e),c=[];let u=t,l=u;for(let f=0;f<i;f++){l=u,c.push(l);for(let d=1;d<o;d++)l=l.add(u),c.push(l);u=l.double()}return c},wNAF(t,n,i){const{windows:o,windowSize:c}=i0(t,e);let u=r.ZERO,l=r.BASE;const f=BigInt(2**t-1),d=2**t,g=BigInt(t);for(let m=0;m<o;m++){const b=m*c;let I=Number(i&f);i>>=g,I>c&&(I-=d,i+=yf);const x=b,B=b+Math.abs(I)-1,M=m%2!==0,R=I<0;I===0?l=l.add(n0(M,n[x])):u=u.add(n0(R,n[B]))}return{p:u,f:l}},wNAFUnsafe(t,n,i,o=r.ZERO){const{windows:c,windowSize:u}=i0(t,e),l=BigInt(2**t-1),f=2**t,d=BigInt(t);for(let g=0;g<c;g++){const m=g*u;if(i===q1)break;let b=Number(i&l);if(i>>=d,b>u&&(b-=f,i+=yf),b===0)continue;let I=n[m+Math.abs(b)-1];b<0&&(I=I.negate()),o=o.add(I)}return o},getPrecomputes(t,n,i){let o=s0.get(n);return o||(o=this.precomputeWindow(n,t),t!==1&&s0.set(n,i(o))),o},wNAFCached(t,n,i){const o=o0(t);return this.wNAF(o,this.getPrecomputes(o,t,i),n)},wNAFCachedUnsafe(t,n,i,o){const c=o0(t);return c===1?this.unsafeLadder(t,n,o):this.wNAFUnsafe(c,this.getPrecomputes(c,t,i),n,o)},setWindowSize(t,n){S2(n,e),P2.set(t,n),s0.delete(t)}}}function l4(r,e,t,n){if(a4(t,r),c4(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=r.ZERO,o=WF(BigInt(t.length)),c=o>12?o-3:o>4?o-2:o?2:1,u=(1<<c)-1,l=new Array(u+1).fill(i),f=Math.floor((e.BITS-1)/c)*c;let d=i;for(let g=f;g>=0;g-=c){l.fill(i);for(let b=0;b<n.length;b++){const I=n[b],x=Number(I>>BigInt(g)&BigInt(u));l[x]=l[x].add(t[b])}let m=i;for(let b=l.length-1,I=i;b>0;b--)I=I.add(l[b]),m=m.add(I);if(d=d.add(m),g!==0)for(let b=0;b<c;b++)d=d.double()}return d}function h4(r){return i4(r.Fp),Xy(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...I2(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}const zn=BigInt(0),zr=BigInt(1),mf=BigInt(2),f4=BigInt(8),d4={zip215:!0};function p4(r){const e=h4(r);return Xy(r,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function g4(r){const e=p4(r),{Fp:t,n,prehash:i,hash:o,randomBytes:c,nByteLength:u,h:l}=e,f=mf<<BigInt(u*8)-zr,d=t.create,g=x2(e.n,e.nBitLength),m=e.uvRatio||((v,w)=>{try{return{isValid:!0,value:t.sqrt(v*t.inv(w))}}catch{return{isValid:!1,value:zn}}}),b=e.adjustScalarBytes||(v=>v),I=e.domain||((v,w,T)=>{if(t0("phflag",T),w.length||T)throw new Error("Contexts/pre-hash are not supported");return v});function x(v,w){ju("coordinate "+v,w,zn,f)}function B(v){if(!(v instanceof C))throw new Error("ExtendedPoint expected")}const M=j1((v,w)=>{const{ex:T,ey:H,ez:Y}=v,K=v.is0();w==null&&(w=K?f4:t.inv(Y));const ue=d(T*w),he=d(H*w),X=d(Y*w);if(K)return{x:zn,y:zr};if(X!==zr)throw new Error("invZ was invalid");return{x:ue,y:he}}),R=j1(v=>{const{a:w,d:T}=e;if(v.is0())throw new Error("bad point: ZERO");const{ex:H,ey:Y,ez:K,et:ue}=v,he=d(H*H),X=d(Y*Y),ne=d(K*K),ee=d(ne*ne),me=d(he*w),Se=d(ne*d(me+X)),_e=d(ee+d(T*d(he*X)));if(Se!==_e)throw new Error("bad point: equation left != right (1)");const Ie=d(H*Y),Ne=d(K*ue);if(Ie!==Ne)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(w,T,H,Y){this.ex=w,this.ey=T,this.ez=H,this.et=Y,x("x",w),x("y",T),x("z",H),x("t",Y),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(w){if(w instanceof C)throw new Error("extended point not allowed");const{x:T,y:H}=w||{};return x("x",T),x("y",H),new C(T,H,zr,d(T*H))}static normalizeZ(w){const T=t.invertBatch(w.map(H=>H.ez));return w.map((H,Y)=>H.toAffine(T[Y])).map(C.fromAffine)}static msm(w,T){return l4(C,g,w,T)}_setWindowSize(w){E.setWindowSize(this,w)}assertValidity(){R(this)}equals(w){B(w);const{ex:T,ey:H,ez:Y}=this,{ex:K,ey:ue,ez:he}=w,X=d(T*he),ne=d(K*Y),ee=d(H*he),me=d(ue*Y);return X===ne&&ee===me}is0(){return this.equals(C.ZERO)}negate(){return new C(d(-this.ex),this.ey,this.ez,d(-this.et))}double(){const{a:w}=e,{ex:T,ey:H,ez:Y}=this,K=d(T*T),ue=d(H*H),he=d(mf*d(Y*Y)),X=d(w*K),ne=T+H,ee=d(d(ne*ne)-K-ue),me=X+ue,Se=me-he,_e=X-ue,Ie=d(ee*Se),Ne=d(me*_e),Te=d(ee*_e),Re=d(Se*me);return new C(Ie,Ne,Re,Te)}add(w){B(w);const{a:T,d:H}=e,{ex:Y,ey:K,ez:ue,et:he}=this,{ex:X,ey:ne,ez:ee,et:me}=w;if(T===BigInt(-1)){const Pi=d((K-Y)*(ne+X)),ht=d((K+Y)*(ne-X)),Xe=d(ht-Pi);if(Xe===zn)return this.double();const ft=d(ue*mf*me),bt=d(he*mf*ee),Pt=bt+ft,dt=ht+Pi,Dt=bt-ft,ot=d(Pt*Xe),at=d(dt*Dt),Et=d(Pt*Dt),et=d(Xe*dt);return new C(ot,at,et,Et)}const Se=d(Y*X),_e=d(K*ne),Ie=d(he*H*me),Ne=d(ue*ee),Te=d((Y+K)*(X+ne)-Se-_e),Re=Ne-Ie,Be=Ne+Ie,tt=d(_e-T*Se),Yt=d(Te*Re),Lr=d(Be*tt),rr=d(Te*tt),ni=d(Re*Be);return new C(Yt,Lr,ni,rr)}subtract(w){return this.add(w.negate())}wNAF(w){return E.wNAFCached(this,w,C.normalizeZ)}multiply(w){const T=w;ju("scalar",T,zr,n);const{p:H,f:Y}=this.wNAF(T);return C.normalizeZ([H,Y])[0]}multiplyUnsafe(w,T=C.ZERO){const H=w;return ju("scalar",H,zn,n),H===zn?D:this.is0()||H===zr?this:E.wNAFCachedUnsafe(this,H,C.normalizeZ,T)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return E.unsafeLadder(this,n).is0()}toAffine(w){return M(this,w)}clearCofactor(){const{h:w}=e;return w===zr?this:this.multiplyUnsafe(w)}static fromHex(w,T=!1){const{d:H,a:Y}=e,K=t.BYTES;w=Hi("pointHex",w,K),t0("zip215",T);const ue=w.slice(),he=w[K-1];ue[K-1]=he&-129;const X=Lf(ue),ne=T?f:t.ORDER;ju("pointHex.y",X,zn,ne);const ee=d(X*X),me=d(ee-zr),Se=d(H*ee-Y);let{isValid:_e,value:Ie}=m(me,Se);if(!_e)throw new Error("Point.fromHex: invalid y coordinate");const Ne=(Ie&zr)===zr,Te=(he&128)!==0;if(!T&&Ie===zn&&Te)throw new Error("Point.fromHex: x=0 and x_0=1");return Te!==Ne&&(Ie=d(-Ie)),C.fromAffine({x:Ie,y:X})}static fromPrivateKey(w){return $(w).point}toRawBytes(){const{x:w,y:T}=this.toAffine(),H=oy(T,t.BYTES);return H[H.length-1]|=w&zr?128:0,H}toHex(){return Zy(this.toRawBytes())}}C.BASE=new C(e.Gx,e.Gy,zr,d(e.Gx*e.Gy)),C.ZERO=new C(zn,zr,zr,zn);const{BASE:S,ZERO:D}=C,E=u4(C,u*8);function p(v){return er(v,n)}function _(v){return p(Lf(v))}function $(v){const w=t.BYTES;v=Hi("private key",v,w);const T=Hi("hashed private key",o(v),2*w),H=b(T.slice(0,w)),Y=T.slice(w,2*w),K=_(H),ue=S.multiply(K),he=ue.toRawBytes();return{head:H,prefix:Y,scalar:K,point:ue,pointBytes:he}}function q(v){return $(v).pointBytes}function Z(v=new Uint8Array,...w){const T=$1(...w);return _(o(I(T,Hi("context",v),!!i)))}function oe(v,w,T={}){v=Hi("message",v),i&&(v=i(v));const{prefix:H,scalar:Y,pointBytes:K}=$(w),ue=Z(T.context,H,v),he=S.multiply(ue).toRawBytes(),X=Z(T.context,he,K,v),ne=p(ue+X*Y);ju("signature.s",ne,zn,n);const ee=$1(he,oy(ne,t.BYTES));return Hi("result",ee,t.BYTES*2)}const fe=d4;function re(v,w,T,H=fe){const{context:Y,zip215:K}=H,ue=t.BYTES;v=Hi("signature",v,2*ue),w=Hi("message",w),T=Hi("publicKey",T,ue),K!==void 0&&t0("zip215",K),i&&(w=i(w));const he=Lf(v.slice(ue,2*ue));let X,ne,ee;try{X=C.fromHex(T,K),ne=C.fromHex(v.slice(0,ue),K),ee=S.multiplyUnsafe(he)}catch{return!1}if(!K&&X.isSmallOrder())return!1;const me=Z(Y,ne.toRawBytes(),X.toRawBytes(),w);return ne.add(X.multiplyUnsafe(me)).subtract(ee).clearCofactor().equals(C.ZERO)}return S._setWindowSize(8),{CURVE:e,getPublicKey:q,sign:oe,verify:re,ExtendedPoint:C,utils:{getExtendedPublicKey:$,randomPrivateKey:()=>c(t.BYTES),precompute(v=8,w=C.BASE){return w._setWindowSize(v),w.multiply(BigInt(3)),w}}}}BigInt(0),BigInt(1);const em=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),V1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const y4=BigInt(1),K1=BigInt(2);BigInt(3);const m4=BigInt(5),w4=BigInt(8);function b4(r){const e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),o=em,c=r*r%o*r%o,u=li(c,K1,o)*c%o,l=li(u,y4,o)*r%o,f=li(l,m4,o)*l%o,d=li(f,e,o)*f%o,g=li(d,t,o)*d%o,m=li(g,n,o)*g%o,b=li(m,i,o)*m%o,I=li(b,i,o)*m%o,x=li(I,e,o)*f%o;return{pow_p_5_8:li(x,K1,o)*r%o,b2:c}}function v4(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}function E4(r,e){const t=em,n=er(e*e*e,t),i=er(n*n*e,t),o=b4(r*i).pow_p_5_8;let c=er(r*n*o,t);const u=er(e*c*c,t),l=c,f=er(c*V1,t),d=u===r,g=u===er(-r,t),m=u===er(-r*V1,t);return d&&(c=l),(g||m)&&(c=f),r4(c,t)&&(c=er(-c,t)),{isValid:d||g,value:c}}const A4=x2(em,void 0,!0),_4={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:A4,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:w4,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:GF,randomBytes:w2,adjustScalarBytes:v4,uvRatio:E4},D2=g4(_4),I4="EdDSA",x4="JWT",O2=".",C2="base64url",S4="utf8",P4="utf8",D4=":",O4="did",C4="key",Q1="base58btc",N4="z",R4="K36",T4=32;function tm(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function N2(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?tm(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function R2(r,e){e||(e=r.reduce((i,o)=>i+o.length,0));const t=N2(e);let n=0;for(const i of r)t.set(i,n),n+=i.length;return tm(t)}function B4(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),c=o.charCodeAt(0);if(t[c]!==255)throw new TypeError(o+" is ambiguous");t[c]=i}var u=r.length,l=r.charAt(0),f=Math.log(u)/Math.log(256),d=Math.log(256)/Math.log(u);function g(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var x=0,B=0,M=0,R=I.length;M!==R&&I[M]===0;)M++,x++;for(var C=(R-M)*d+1>>>0,S=new Uint8Array(C);M!==R;){for(var D=I[M],E=0,p=C-1;(D!==0||E<B)&&p!==-1;p--,E++)D+=256*S[p]>>>0,S[p]=D%u>>>0,D=D/u>>>0;if(D!==0)throw new Error("Non-zero carry");B=E,M++}for(var _=C-B;_!==C&&S[_]===0;)_++;for(var $=l.repeat(x);_<C;++_)$+=r.charAt(S[_]);return $}function m(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var x=0;if(I[x]!==" "){for(var B=0,M=0;I[x]===l;)B++,x++;for(var R=(I.length-x)*f+1>>>0,C=new Uint8Array(R);I[x];){var S=t[I.charCodeAt(x)];if(S===255)return;for(var D=0,E=R-1;(S!==0||D<M)&&E!==-1;E--,D++)S+=u*C[E]>>>0,C[E]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");M=D,x++}if(I[x]!==" "){for(var p=R-M;p!==R&&C[p]===0;)p++;for(var _=new Uint8Array(B+(R-p)),$=B;p!==R;)_[$++]=C[p++];return _}}}function b(I){var x=m(I);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:b}}var U4=B4,F4=U4;const T2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},L4=r=>new TextEncoder().encode(r),M4=r=>new TextDecoder().decode(r);class k4{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class $4{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return B2(this,e)}}class j4{constructor(e){this.decoders=e}or(e){return B2(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const B2=(r,e)=>new j4({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class H4{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new k4(e,t,n),this.decoder=new $4(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Cd=({name:r,prefix:e,encode:t,decode:n})=>new H4(r,e,t,n),jl=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=F4(t,e);return Cd({prefix:r,name:e,encode:n,decode:o=>T2(i(o))})},z4=(r,e,t,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let o=r.length;for(;r[o-1]==="=";)--o;const c=new Uint8Array(o*t/8|0);let u=0,l=0,f=0;for(let d=0;d<o;++d){const g=i[r[d]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|g,u+=t,u>=8&&(u-=8,c[f++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return c},G4=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let o="",c=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],c+=8;c>t;)c-=t,o+=e[i&u>>c];if(c&&(o+=e[i&u<<t-c]),n)for(;o.length*t&7;)o+="=";return o},mr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Cd({prefix:e,name:r,encode(i){return G4(i,n,t)},decode(i){return z4(i,n,t,r)}}),q4=Cd({prefix:"\0",name:"identity",encode:r=>M4(r),decode:r=>L4(r)});var V4=Object.freeze({__proto__:null,identity:q4});const K4=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Q4=Object.freeze({__proto__:null,base2:K4});const W4=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var J4=Object.freeze({__proto__:null,base8:W4});const Y4=jl({prefix:"9",name:"base10",alphabet:"0123456789"});var Z4=Object.freeze({__proto__:null,base10:Y4});const X4=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eL=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var tL=Object.freeze({__proto__:null,base16:X4,base16upper:eL});const rL=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),nL=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iL=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sL=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),oL=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aL=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),cL=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),uL=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lL=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var hL=Object.freeze({__proto__:null,base32:rL,base32upper:nL,base32pad:iL,base32padupper:sL,base32hex:oL,base32hexupper:aL,base32hexpad:cL,base32hexpadupper:uL,base32z:lL});const fL=jl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dL=jl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var pL=Object.freeze({__proto__:null,base36:fL,base36upper:dL});const gL=jl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yL=jl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var mL=Object.freeze({__proto__:null,base58btc:gL,base58flickr:yL});const wL=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),bL=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vL=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),EL=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var AL=Object.freeze({__proto__:null,base64:wL,base64pad:bL,base64url:vL,base64urlpad:EL});const U2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),_L=U2.reduce((r,e,t)=>(r[t]=e,r),[]),IL=U2.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function xL(r){return r.reduce((e,t)=>(e+=_L[t],e),"")}function SL(r){const e=[];for(const t of r){const n=IL[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const PL=Cd({prefix:"🚀",name:"base256emoji",encode:xL,decode:SL});var DL=Object.freeze({__proto__:null,base256emoji:PL}),OL=F2,W1=128,CL=-128,NL=Math.pow(2,31);function F2(r,e,t){e=e||[],t=t||0;for(var n=t;r>=NL;)e[t++]=r&255|W1,r/=128;for(;r&CL;)e[t++]=r&255|W1,r>>>=7;return e[t]=r|0,F2.bytes=t-n+1,e}var RL=cy,TL=128,J1=127;function cy(r,n){var t=0,n=n||0,i=0,o=n,c,u=r.length;do{if(o>=u)throw cy.bytes=0,new RangeError("Could not decode varint");c=r[o++],t+=i<28?(c&J1)<<i:(c&J1)*Math.pow(2,i),i+=7}while(c>=TL);return cy.bytes=o-n,t}var BL=Math.pow(2,7),UL=Math.pow(2,14),FL=Math.pow(2,21),LL=Math.pow(2,28),ML=Math.pow(2,35),kL=Math.pow(2,42),$L=Math.pow(2,49),jL=Math.pow(2,56),HL=Math.pow(2,63),zL=function(r){return r<BL?1:r<UL?2:r<FL?3:r<LL?4:r<ML?5:r<kL?6:r<$L?7:r<jL?8:r<HL?9:10},GL={encode:OL,decode:RL,encodingLength:zL},L2=GL;const Y1=(r,e,t=0)=>(L2.encode(r,e,t),e),Z1=r=>L2.encodingLength(r),uy=(r,e)=>{const t=e.byteLength,n=Z1(r),i=n+Z1(t),o=new Uint8Array(i+t);return Y1(r,o,0),Y1(t,o,n),o.set(e,i),new qL(r,t,e,o)};class qL{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const M2=({name:r,code:e,encode:t})=>new VL(r,e,t);class VL{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?uy(this.code,t):t.then(n=>uy(this.code,n))}else throw Error("Unknown type, must be binary type")}}const k2=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),KL=M2({name:"sha2-256",code:18,encode:k2("SHA-256")}),QL=M2({name:"sha2-512",code:19,encode:k2("SHA-512")});var WL=Object.freeze({__proto__:null,sha256:KL,sha512:QL});const $2=0,JL="identity",j2=T2,YL=r=>uy($2,j2(r)),ZL={code:$2,name:JL,encode:j2,digest:YL};var XL=Object.freeze({__proto__:null,identity:ZL});new TextEncoder,new TextDecoder;const X1={...V4,...Q4,...J4,...Z4,...tL,...hL,...pL,...mL,...AL,...DL};({...WL,...XL});function H2(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const eE=H2("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),a0=H2("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=N2(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),z2={utf8:eE,"utf-8":eE,hex:X1.base16,latin1:a0,ascii:a0,binary:a0,...X1};function rm(r,e="utf8"){const t=z2[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("utf8"):t.encoder.encode(r).substring(1)}function nm(r,e="utf8"){const t=z2[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?tm(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}function td(r){return rm(nm(ua(r),S4),C2)}function G2(r){const e=nm(R4,Q1),t=N4+rm(R2([e,r]),Q1);return[O4,C4,t].join(D4)}function eM(r){return rm(r,C2)}function tM(r){return nm([td(r.header),td(r.payload)].join(O2),P4)}function rM(r){return[td(r.header),td(r.payload),eM(r.signature)].join(O2)}function tE(r=w2(T4)){const e=D2.getPublicKey(r);return{secretKey:R2([r,e]),publicKey:e}}async function nM(r,e,t,n,i=xe.fromMiliseconds(Date.now())){const o={alg:I4,typ:x4},c=G2(n.publicKey),u=i+t,l={iss:c,sub:r,aud:e,iat:i,exp:u},f=tM({header:o,payload:l}),d=D2.sign(f,n.secretKey.slice(0,32));return rM({header:o,payload:l,signature:d})}const iM="PARSE_ERROR",sM="INVALID_REQUEST",oM="METHOD_NOT_FOUND",aM="INVALID_PARAMS",q2="INTERNAL_ERROR",im="SERVER_ERROR",cM=[-32700,-32600,-32601,-32602,-32603],il={[iM]:{code:-32700,message:"Parse error"},[sM]:{code:-32600,message:"Invalid Request"},[oM]:{code:-32601,message:"Method not found"},[aM]:{code:-32602,message:"Invalid params"},[q2]:{code:-32603,message:"Internal error"},[im]:{code:-32e3,message:"Server error"}},V2=im;function uM(r){return cM.includes(r)}function rE(r){return Object.keys(il).includes(r)?il[r]:il[V2]}function lM(r){const e=Object.values(il).find(t=>t.code===r);return e||il[V2]}function K2(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var c0={},zi={},nE;function hM(){if(nE)return zi;nE=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.isBrowserCryptoAvailable=zi.getSubtleCrypto=zi.getBrowerCrypto=void 0;function r(){return(Jr==null?void 0:Jr.crypto)||(Jr==null?void 0:Jr.msCrypto)||{}}zi.getBrowerCrypto=r;function e(){const n=r();return n.subtle||n.webkitSubtle}zi.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return zi.isBrowserCryptoAvailable=t,zi}var Gi={},iE;function fM(){if(iE)return Gi;iE=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.isBrowser=Gi.isNode=Gi.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Gi.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Gi.isNode=e;function t(){return!r()&&!e()}return Gi.isBrowser=t,Gi}var sE;function dM(){return sE||(sE=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=ps;e.__exportStar(hM(),r),e.__exportStar(fM(),r)}(c0)),c0}var pM=dM();function Q2(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function Nd(r=6){return BigInt(Q2(r))}function Hl(r,e,t){return{id:t||Q2(),jsonrpc:"2.0",method:r,params:e}}function sm(r,e){return{id:r,jsonrpc:"2.0",result:e}}function Rd(r,e,t){return{id:r,jsonrpc:"2.0",error:gM(e)}}function gM(r,e){return typeof r>"u"?rE(q2):(typeof r=="string"&&(r=Object.assign(Object.assign({},rE(im)),{message:r})),uM(r.code)&&(r=lM(r.code)),r)}class yM{}class mM extends yM{constructor(){super()}}class W2 extends mM{constructor(e){super()}}const wM="^https?:",bM="^wss?:";function vM(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function J2(r,e){const t=vM(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function oE(r){return J2(r,wM)}function aE(r){return J2(r,bM)}function EM(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function Y2(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function om(r){return Y2(r)&&"method"in r}function zl(r){return Y2(r)&&(Vi(r)||Bn(r))}function Vi(r){return"result"in r}function Bn(r){return"error"in r}let AM=class extends W2{constructor(e){super(e),this.events=new dn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Hl(e.method,e.params||[],e.id||Nd().toString()),t)}async requestStrict(e,t){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(o){i(o)}this.events.on(`${e.id}`,o=>{Bn(o)?i(o.error):n(o.result)});try{await this.connection.send(e,t)}catch(o){i(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),zl(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const _M=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),IM=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",cE=r=>r.split("?")[0],uE=10,xM=_M();class SM{constructor(e){if(this.url=e,this.events=new dn.EventEmitter,this.registering=!1,!aE(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,t){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(ua(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!aE(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,n)=>{const i=pM.isReactNative()?void 0:{rejectUnauthorized:!EM(e)},o=new xM(e,[],i);IM()?o.onerror=c=>{const u=c;n(this.emitError(u.error))}:o.on("error",c=>{n(this.emitError(c))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ml(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),i=n.message||n.toString(),o=Rd(e,i);this.events.emit("payload",o)}parseError(e,t=this.url){return K2(e,cE(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>uE&&this.events.setMaxListeners(uE)}emitError(e){const t=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${cE(this.url)}`));return this.events.emit("register_error",t),t}}var el={exports:{}};el.exports;var lE;function PM(){return lE||(lE=1,function(r,e){var t=200,n="__lodash_hash_undefined__",i=1,o=2,c=9007199254740991,u="[object Arguments]",l="[object Array]",f="[object AsyncFunction]",d="[object Boolean]",g="[object Date]",m="[object Error]",b="[object Function]",I="[object GeneratorFunction]",x="[object Map]",B="[object Number]",M="[object Null]",R="[object Object]",C="[object Promise]",S="[object Proxy]",D="[object RegExp]",E="[object Set]",p="[object String]",_="[object Symbol]",$="[object Undefined]",q="[object WeakMap]",Z="[object ArrayBuffer]",oe="[object DataView]",fe="[object Float32Array]",re="[object Float64Array]",v="[object Int8Array]",w="[object Int16Array]",T="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",K="[object Uint16Array]",ue="[object Uint32Array]",he=/[\\^$.*+?()[\]{}|]/g,X=/^\[object .+?Constructor\]$/,ne=/^(?:0|[1-9]\d*)$/,ee={};ee[fe]=ee[re]=ee[v]=ee[w]=ee[T]=ee[H]=ee[Y]=ee[K]=ee[ue]=!0,ee[u]=ee[l]=ee[Z]=ee[d]=ee[oe]=ee[g]=ee[m]=ee[b]=ee[x]=ee[B]=ee[R]=ee[D]=ee[E]=ee[p]=ee[q]=!1;var me=typeof Jr=="object"&&Jr&&Jr.Object===Object&&Jr,Se=typeof self=="object"&&self&&self.Object===Object&&self,_e=me||Se||Function("return this")(),Ie=e&&!e.nodeType&&e,Ne=Ie&&!0&&r&&!r.nodeType&&r,Te=Ne&&Ne.exports===Ie,Re=Te&&me.process,Be=function(){try{return Re&&Re.binding&&Re.binding("util")}catch{}}(),tt=Be&&Be.isTypedArray;function Yt(U,z){for(var ae=-1,we=U==null?0:U.length,gt=0,Fe=[];++ae<we;){var _t=U[ae];z(_t,ae,U)&&(Fe[gt++]=_t)}return Fe}function Lr(U,z){for(var ae=-1,we=z.length,gt=U.length;++ae<we;)U[gt+ae]=z[ae];return U}function rr(U,z){for(var ae=-1,we=U==null?0:U.length;++ae<we;)if(z(U[ae],ae,U))return!0;return!1}function ni(U,z){for(var ae=-1,we=Array(U);++ae<U;)we[ae]=z(ae);return we}function Pi(U){return function(z){return U(z)}}function ht(U,z){return U.has(z)}function Xe(U,z){return U==null?void 0:U[z]}function ft(U){var z=-1,ae=Array(U.size);return U.forEach(function(we,gt){ae[++z]=[gt,we]}),ae}function bt(U,z){return function(ae){return U(z(ae))}}function Pt(U){var z=-1,ae=Array(U.size);return U.forEach(function(we){ae[++z]=we}),ae}var dt=Array.prototype,Dt=Function.prototype,ot=Object.prototype,at=_e["__core-js_shared__"],Et=Dt.toString,et=ot.hasOwnProperty,Ot=function(){var U=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return U?"Symbol(src)_1."+U:""}(),Ct=ot.toString,Bt=RegExp("^"+Et.call(et).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nt=Te?_e.Buffer:void 0,At=_e.Symbol,wa=_e.Uint8Array,ba=ot.propertyIsEnumerable,Ud=dt.splice,Di=At?At.toStringTag:void 0,ql=Object.getOwnPropertySymbols,Vl=Nt?Nt.isBuffer:void 0,Kl=bt(Object.keys,Object),iu=en(_e,"DataView"),so=en(_e,"Map"),su=en(_e,"Promise"),ou=en(_e,"Set"),va=en(_e,"WeakMap"),oo=en(Object,"create"),Fd=Ni(iu),Ld=Ni(so),au=Ni(su),Md=Ni(ou),cu=Ni(va),Ql=At?At.prototype:void 0,uu=Ql?Ql.valueOf:void 0;function Oi(U){var z=-1,ae=U==null?0:U.length;for(this.clear();++z<ae;){var we=U[z];this.set(we[0],we[1])}}function kd(){this.__data__=oo?oo(null):{},this.size=0}function $d(U){var z=this.has(U)&&delete this.__data__[U];return this.size-=z?1:0,z}function jd(U){var z=this.__data__;if(oo){var ae=z[U];return ae===n?void 0:ae}return et.call(z,U)?z[U]:void 0}function Hd(U){var z=this.__data__;return oo?z[U]!==void 0:et.call(z,U)}function zd(U,z){var ae=this.__data__;return this.size+=this.has(U)?0:1,ae[U]=oo&&z===void 0?n:z,this}Oi.prototype.clear=kd,Oi.prototype.delete=$d,Oi.prototype.get=jd,Oi.prototype.has=Hd,Oi.prototype.set=zd;function gn(U){var z=-1,ae=U==null?0:U.length;for(this.clear();++z<ae;){var we=U[z];this.set(we[0],we[1])}}function Gd(){this.__data__=[],this.size=0}function qd(U){var z=this.__data__,ae=ao(z,U);if(ae<0)return!1;var we=z.length-1;return ae==we?z.pop():Ud.call(z,ae,1),--this.size,!0}function Vd(U){var z=this.__data__,ae=ao(z,U);return ae<0?void 0:z[ae][1]}function Kd(U){return ao(this.__data__,U)>-1}function Qd(U,z){var ae=this.__data__,we=ao(ae,U);return we<0?(++this.size,ae.push([U,z])):ae[we][1]=z,this}gn.prototype.clear=Gd,gn.prototype.delete=qd,gn.prototype.get=Vd,gn.prototype.has=Kd,gn.prototype.set=Qd;function Ci(U){var z=-1,ae=U==null?0:U.length;for(this.clear();++z<ae;){var we=U[z];this.set(we[0],we[1])}}function Ea(){this.size=0,this.__data__={hash:new Oi,map:new(so||gn),string:new Oi}}function Wd(U){var z=gs(this,U).delete(U);return this.size-=z?1:0,z}function Aa(U){return gs(this,U).get(U)}function Jd(U){return gs(this,U).has(U)}function Yd(U,z){var ae=gs(this,U),we=ae.size;return ae.set(U,z),this.size+=ae.size==we?0:1,this}Ci.prototype.clear=Ea,Ci.prototype.delete=Wd,Ci.prototype.get=Aa,Ci.prototype.has=Jd,Ci.prototype.set=Yd;function _a(U){var z=-1,ae=U==null?0:U.length;for(this.__data__=new Ci;++z<ae;)this.add(U[z])}function Wl(U){return this.__data__.set(U,n),this}function Jl(U){return this.__data__.has(U)}_a.prototype.add=_a.prototype.push=Wl,_a.prototype.has=Jl;function Ln(U){var z=this.__data__=new gn(U);this.size=z.size}function Zd(){this.__data__=new gn,this.size=0}function Xd(U){var z=this.__data__,ae=z.delete(U);return this.size=z.size,ae}function ep(U){return this.__data__.get(U)}function tp(U){return this.__data__.has(U)}function Yl(U,z){var ae=this.__data__;if(ae instanceof gn){var we=ae.__data__;if(!so||we.length<t-1)return we.push([U,z]),this.size=++ae.size,this;ae=this.__data__=new Ci(we)}return ae.set(U,z),this.size=ae.size,this}Ln.prototype.clear=Zd,Ln.prototype.delete=Xd,Ln.prototype.get=ep,Ln.prototype.has=tp,Ln.prototype.set=Yl;function Zl(U,z){var ae=Sa(U),we=!ae&&lh(U),gt=!ae&&!we&&fu(U),Fe=!ae&&!we&&!gt&&dh(U),_t=ae||we||gt||Fe,Kt=_t?ni(U.length,String):[],We=Kt.length;for(var yt in U)et.call(U,yt)&&!(_t&&(yt=="length"||gt&&(yt=="offset"||yt=="parent")||Fe&&(yt=="buffer"||yt=="byteLength"||yt=="byteOffset")||sh(yt,We)))&&Kt.push(yt);return Kt}function ao(U,z){for(var ae=U.length;ae--;)if(uh(U[ae][0],z))return ae;return-1}function lu(U,z,ae){var we=z(U);return Sa(U)?we:Lr(we,ae(U))}function co(U){return U==null?U===void 0?$:M:Di&&Di in Object(U)?nh(U):ip(U)}function hu(U){return lo(U)&&co(U)==u}function uo(U,z,ae,we,gt){return U===z?!0:U==null||z==null||!lo(U)&&!lo(z)?U!==U&&z!==z:Xl(U,z,ae,we,uo,gt)}function Xl(U,z,ae,we,gt,Fe){var _t=Sa(U),Kt=Sa(z),We=_t?l:ii(U),yt=Kt?l:ii(z);We=We==u?R:We,yt=yt==u?R:yt;var kt=We==R,Mr=yt==R,Qt=We==yt;if(Qt&&fu(U)){if(!fu(z))return!1;_t=!0,kt=!1}if(Qt&&!kt)return Fe||(Fe=new Ln),_t||dh(U)?Ia(U,z,ae,we,gt,Fe):np(U,z,We,ae,we,gt,Fe);if(!(ae&i)){var It=kt&&et.call(U,"__wrapped__"),xr=Mr&&et.call(z,"__wrapped__");if(It||xr){var Mn=It?U.value():U,yn=xr?z.value():z;return Fe||(Fe=new Ln),gt(Mn,yn,ae,we,Fe)}}return Qt?(Fe||(Fe=new Ln),rh(U,z,ae,we,gt,Fe)):!1}function rp(U){if(!fh(U)||ah(U))return!1;var z=Pa(U)?Bt:X;return z.test(Ni(U))}function eh(U){return lo(U)&&hh(U.length)&&!!ee[co(U)]}function th(U){if(!ch(U))return Kl(U);var z=[];for(var ae in Object(U))et.call(U,ae)&&ae!="constructor"&&z.push(ae);return z}function Ia(U,z,ae,we,gt,Fe){var _t=ae&i,Kt=U.length,We=z.length;if(Kt!=We&&!(_t&&We>Kt))return!1;var yt=Fe.get(U);if(yt&&Fe.get(z))return yt==z;var kt=-1,Mr=!0,Qt=ae&o?new _a:void 0;for(Fe.set(U,z),Fe.set(z,U);++kt<Kt;){var It=U[kt],xr=z[kt];if(we)var Mn=_t?we(xr,It,kt,z,U,Fe):we(It,xr,kt,U,z,Fe);if(Mn!==void 0){if(Mn)continue;Mr=!1;break}if(Qt){if(!rr(z,function(yn,si){if(!ht(Qt,si)&&(It===yn||gt(It,yn,ae,we,Fe)))return Qt.push(si)})){Mr=!1;break}}else if(!(It===xr||gt(It,xr,ae,we,Fe))){Mr=!1;break}}return Fe.delete(U),Fe.delete(z),Mr}function np(U,z,ae,we,gt,Fe,_t){switch(ae){case oe:if(U.byteLength!=z.byteLength||U.byteOffset!=z.byteOffset)return!1;U=U.buffer,z=z.buffer;case Z:return!(U.byteLength!=z.byteLength||!Fe(new wa(U),new wa(z)));case d:case g:case B:return uh(+U,+z);case m:return U.name==z.name&&U.message==z.message;case D:case p:return U==z+"";case x:var Kt=ft;case E:var We=we&i;if(Kt||(Kt=Pt),U.size!=z.size&&!We)return!1;var yt=_t.get(U);if(yt)return yt==z;we|=o,_t.set(U,z);var kt=Ia(Kt(U),Kt(z),we,gt,Fe,_t);return _t.delete(U),kt;case _:if(uu)return uu.call(U)==uu.call(z)}return!1}function rh(U,z,ae,we,gt,Fe){var _t=ae&i,Kt=xa(U),We=Kt.length,yt=xa(z),kt=yt.length;if(We!=kt&&!_t)return!1;for(var Mr=We;Mr--;){var Qt=Kt[Mr];if(!(_t?Qt in z:et.call(z,Qt)))return!1}var It=Fe.get(U);if(It&&Fe.get(z))return It==z;var xr=!0;Fe.set(U,z),Fe.set(z,U);for(var Mn=_t;++Mr<We;){Qt=Kt[Mr];var yn=U[Qt],si=z[Qt];if(we)var du=_t?we(si,yn,Qt,z,U,Fe):we(yn,si,Qt,U,z,Fe);if(!(du===void 0?yn===si||gt(yn,si,ae,we,Fe):du)){xr=!1;break}Mn||(Mn=Qt=="constructor")}if(xr&&!Mn){var ho=U.constructor,nr=z.constructor;ho!=nr&&"constructor"in U&&"constructor"in z&&!(typeof ho=="function"&&ho instanceof ho&&typeof nr=="function"&&nr instanceof nr)&&(xr=!1)}return Fe.delete(U),Fe.delete(z),xr}function xa(U){return lu(U,ap,ih)}function gs(U,z){var ae=U.__data__;return oh(z)?ae[typeof z=="string"?"string":"hash"]:ae.map}function en(U,z){var ae=Xe(U,z);return rp(ae)?ae:void 0}function nh(U){var z=et.call(U,Di),ae=U[Di];try{U[Di]=void 0;var we=!0}catch{}var gt=Ct.call(U);return we&&(z?U[Di]=ae:delete U[Di]),gt}var ih=ql?function(U){return U==null?[]:(U=Object(U),Yt(ql(U),function(z){return ba.call(U,z)}))}:pt,ii=co;(iu&&ii(new iu(new ArrayBuffer(1)))!=oe||so&&ii(new so)!=x||su&&ii(su.resolve())!=C||ou&&ii(new ou)!=E||va&&ii(new va)!=q)&&(ii=function(U){var z=co(U),ae=z==R?U.constructor:void 0,we=ae?Ni(ae):"";if(we)switch(we){case Fd:return oe;case Ld:return x;case au:return C;case Md:return E;case cu:return q}return z});function sh(U,z){return z=z??c,!!z&&(typeof U=="number"||ne.test(U))&&U>-1&&U%1==0&&U<z}function oh(U){var z=typeof U;return z=="string"||z=="number"||z=="symbol"||z=="boolean"?U!=="__proto__":U===null}function ah(U){return!!Ot&&Ot in U}function ch(U){var z=U&&U.constructor,ae=typeof z=="function"&&z.prototype||ot;return U===ae}function ip(U){return Ct.call(U)}function Ni(U){if(U!=null){try{return Et.call(U)}catch{}try{return U+""}catch{}}return""}function uh(U,z){return U===z||U!==U&&z!==z}var lh=hu(function(){return arguments}())?hu:function(U){return lo(U)&&et.call(U,"callee")&&!ba.call(U,"callee")},Sa=Array.isArray;function sp(U){return U!=null&&hh(U.length)&&!Pa(U)}var fu=Vl||ut;function op(U,z){return uo(U,z)}function Pa(U){if(!fh(U))return!1;var z=co(U);return z==b||z==I||z==f||z==S}function hh(U){return typeof U=="number"&&U>-1&&U%1==0&&U<=c}function fh(U){var z=typeof U;return U!=null&&(z=="object"||z=="function")}function lo(U){return U!=null&&typeof U=="object"}var dh=tt?Pi(tt):eh;function ap(U){return sp(U)?Zl(U):th(U)}function pt(){return[]}function ut(){return!1}r.exports=op}(el,el.exports)),el.exports}var DM=PM();const OM=xd(DM);var CM={};function NM(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),c=o.charCodeAt(0);if(t[c]!==255)throw new TypeError(o+" is ambiguous");t[c]=i}var u=r.length,l=r.charAt(0),f=Math.log(u)/Math.log(256),d=Math.log(256)/Math.log(u);function g(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var x=0,B=0,M=0,R=I.length;M!==R&&I[M]===0;)M++,x++;for(var C=(R-M)*d+1>>>0,S=new Uint8Array(C);M!==R;){for(var D=I[M],E=0,p=C-1;(D!==0||E<B)&&p!==-1;p--,E++)D+=256*S[p]>>>0,S[p]=D%u>>>0,D=D/u>>>0;if(D!==0)throw new Error("Non-zero carry");B=E,M++}for(var _=C-B;_!==C&&S[_]===0;)_++;for(var $=l.repeat(x);_<C;++_)$+=r.charAt(S[_]);return $}function m(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var x=0;if(I[x]!==" "){for(var B=0,M=0;I[x]===l;)B++,x++;for(var R=(I.length-x)*f+1>>>0,C=new Uint8Array(R);I[x];){var S=t[I.charCodeAt(x)];if(S===255)return;for(var D=0,E=R-1;(S!==0||D<M)&&E!==-1;E--,D++)S+=u*C[E]>>>0,C[E]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");M=D,x++}if(I[x]!==" "){for(var p=R-M;p!==R&&C[p]===0;)p++;for(var _=new Uint8Array(B+(R-p)),$=B;p!==R;)_[$++]=C[p++];return _}}}function b(I){var x=m(I);if(x)return x;throw new Error(`Non-${e} character`)}return{encode:g,decodeUnsafe:m,decode:b}}var RM=NM,TM=RM;const Z2=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},BM=r=>new TextEncoder().encode(r),UM=r=>new TextDecoder().decode(r);class FM{constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class LM{constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return X2(this,e)}}class MM{constructor(e){this.decoders=e}or(e){return X2(this,e)}decode(e){const t=e[0],n=this.decoders[t];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const X2=(r,e)=>new MM({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class kM{constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new FM(e,t,n),this.decoder=new LM(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Td=({name:r,prefix:e,encode:t,decode:n})=>new kM(r,e,t,n),Gl=({prefix:r,name:e,alphabet:t})=>{const{encode:n,decode:i}=TM(t,e);return Td({prefix:r,name:e,encode:n,decode:o=>Z2(i(o))})},$M=(r,e,t,n)=>{const i={};for(let d=0;d<e.length;++d)i[e[d]]=d;let o=r.length;for(;r[o-1]==="=";)--o;const c=new Uint8Array(o*t/8|0);let u=0,l=0,f=0;for(let d=0;d<o;++d){const g=i[r[d]];if(g===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<t|g,u+=t,u>=8&&(u-=8,c[f++]=255&l>>u)}if(u>=t||255&l<<8-u)throw new SyntaxError("Unexpected end of data");return c},jM=(r,e,t)=>{const n=e[e.length-1]==="=",i=(1<<t)-1;let o="",c=0,u=0;for(let l=0;l<r.length;++l)for(u=u<<8|r[l],c+=8;c>t;)c-=t,o+=e[i&u>>c];if(c&&(o+=e[i&u<<t-c]),n)for(;o.length*t&7;)o+="=";return o},wr=({name:r,prefix:e,bitsPerChar:t,alphabet:n})=>Td({prefix:e,name:r,encode(i){return jM(i,n,t)},decode(i){return $M(i,n,t,r)}}),HM=Td({prefix:"\0",name:"identity",encode:r=>UM(r),decode:r=>BM(r)});var zM=Object.freeze({__proto__:null,identity:HM});const GM=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var qM=Object.freeze({__proto__:null,base2:GM});const VM=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var KM=Object.freeze({__proto__:null,base8:VM});const QM=Gl({prefix:"9",name:"base10",alphabet:"0123456789"});var WM=Object.freeze({__proto__:null,base10:QM});const JM=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),YM=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ZM=Object.freeze({__proto__:null,base16:JM,base16upper:YM});const XM=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ek=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),tk=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),rk=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nk=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ik=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),sk=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ok=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ak=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ck=Object.freeze({__proto__:null,base32:XM,base32upper:ek,base32pad:tk,base32padupper:rk,base32hex:nk,base32hexupper:ik,base32hexpad:sk,base32hexpadupper:ok,base32z:ak});const uk=Gl({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lk=Gl({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var hk=Object.freeze({__proto__:null,base36:uk,base36upper:lk});const fk=Gl({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dk=Gl({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var pk=Object.freeze({__proto__:null,base58btc:fk,base58flickr:dk});const gk=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yk=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),mk=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wk=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var bk=Object.freeze({__proto__:null,base64:gk,base64pad:yk,base64url:mk,base64urlpad:wk});const eI=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),vk=eI.reduce((r,e,t)=>(r[t]=e,r),[]),Ek=eI.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function Ak(r){return r.reduce((e,t)=>(e+=vk[t],e),"")}function _k(r){const e=[];for(const t of r){const n=Ek[t.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(n)}return new Uint8Array(e)}const Ik=Td({prefix:"🚀",name:"base256emoji",encode:Ak,decode:_k});var xk=Object.freeze({__proto__:null,base256emoji:Ik}),Sk=tI,hE=128,Pk=-128,Dk=Math.pow(2,31);function tI(r,e,t){e=e||[],t=t||0;for(var n=t;r>=Dk;)e[t++]=r&255|hE,r/=128;for(;r&Pk;)e[t++]=r&255|hE,r>>>=7;return e[t]=r|0,tI.bytes=t-n+1,e}var Ok=ly,Ck=128,fE=127;function ly(r,n){var t=0,n=n||0,i=0,o=n,c,u=r.length;do{if(o>=u)throw ly.bytes=0,new RangeError("Could not decode varint");c=r[o++],t+=i<28?(c&fE)<<i:(c&fE)*Math.pow(2,i),i+=7}while(c>=Ck);return ly.bytes=o-n,t}var Nk=Math.pow(2,7),Rk=Math.pow(2,14),Tk=Math.pow(2,21),Bk=Math.pow(2,28),Uk=Math.pow(2,35),Fk=Math.pow(2,42),Lk=Math.pow(2,49),Mk=Math.pow(2,56),kk=Math.pow(2,63),$k=function(r){return r<Nk?1:r<Rk?2:r<Tk?3:r<Bk?4:r<Uk?5:r<Fk?6:r<Lk?7:r<Mk?8:r<kk?9:10},jk={encode:Sk,decode:Ok,encodingLength:$k},rI=jk;const dE=(r,e,t=0)=>(rI.encode(r,e,t),e),pE=r=>rI.encodingLength(r),hy=(r,e)=>{const t=e.byteLength,n=pE(r),i=n+pE(t),o=new Uint8Array(i+t);return dE(r,o,0),dE(t,o,n),o.set(e,i),new Hk(r,t,e,o)};class Hk{constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}}const nI=({name:r,code:e,encode:t})=>new zk(r,e,t);class zk{constructor(e,t,n){this.name=e,this.code=t,this.encode=n}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?hy(this.code,t):t.then(n=>hy(this.code,n))}else throw Error("Unknown type, must be binary type")}}const iI=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),Gk=nI({name:"sha2-256",code:18,encode:iI("SHA-256")}),qk=nI({name:"sha2-512",code:19,encode:iI("SHA-512")});var Vk=Object.freeze({__proto__:null,sha256:Gk,sha512:qk});const sI=0,Kk="identity",oI=Z2,Qk=r=>hy(sI,oI(r)),Wk={code:sI,name:Kk,encode:oI,digest:Qk};var Jk=Object.freeze({__proto__:null,identity:Wk});new TextEncoder,new TextDecoder;const gE={...zM,...qM,...KM,...WM,...ZM,...ck,...hk,...pk,...bk,...xk};({...Vk,...Jk});function aI(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function Yk(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?aI(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function cI(r,e,t,n){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:n}}}const yE=cI("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),u0=cI("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=Yk(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),Zk={utf8:yE,"utf-8":yE,hex:gE.base16,latin1:u0,ascii:u0,binary:u0,...gE};function Xk(r,e="utf8"){const t=Zk[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?aI(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const uI="wc",e9=2,lI="core",to=`${uI}@2:${lI}:`,t9={logger:"error"},r9={database:":memory:"},n9="crypto",mE="client_ed25519_seed",i9=xe.ONE_DAY,s9="keychain",o9="0.3",a9="messages",c9="0.3",u9=xe.SIX_HOURS,l9="publisher",hI="irn",h9="error",fI="wss://relay.walletconnect.com",wE="wss://relay.walletconnect.org",f9="relayer",Lt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},d9="_subscription",Hu={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},p9=xe.ONE_SECOND/2,g9="2.9.1",y9=1e4,m9="0.3",w9="WALLETCONNECT_CLIENT_ID",fi={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},b9="subscription",v9="0.3",E9=xe.FIVE_SECONDS*1e3,A9="pairing",_9="0.3",zu={wc_pairingDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:0},res:{ttl:xe.ONE_DAY,prompt:!1,tag:0}}},hi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},I9="history",x9="0.3",S9="expirer",Sn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},P9="0.3",l0="verify-api",bE="https://verify.walletconnect.com";class D9{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=s9,this.version=o9,this.initialized=!1,this.storagePrefix=to,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:o}=ge("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=pn(t,this.name)}get context(){return Xr(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,a2(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?c2(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class O9{constructor(e,t,n){this.core=e,this.logger=t,this.name=n9,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),o=tE(i);return G2(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=K6();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const o=await this.getClientSeed(),c=tE(o),u=ry();return await nM(u,i,i9,c)},this.generateSharedKey=(i,o,c)=>{this.isInitialized();const u=this.getPrivateKey(i),l=Q6(u,o);return this.setSymKey(l,c)},this.setSymKey=async(i,o)=>{this.isInitialized();const c=o||W6(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,o,c)=>{this.isInitialized();const u=s2(c),l=ua(o);if(p1(u)){const m=u.senderPublicKey,b=u.receiverPublicKey;i=await this.generateSharedKey(m,b)}const f=this.getSymKey(i),{type:d,senderPublicKey:g}=u;return Y6({type:d,symKey:f,message:l,senderPublicKey:g})},this.decode=async(i,o,c)=>{this.isInitialized();const u=e5(o,c);if(p1(u)){const l=u.receiverPublicKey,f=u.senderPublicKey;i=await this.generateSharedKey(l,f)}try{const l=this.getSymKey(i),f=Z6({symKey:l,encoded:o});return Ml(f)}catch(l){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=i=>{const o=Zf(i);return Fl(o.type)},this.getPayloadSenderPublicKey=i=>{const o=Zf(i);return o.senderPublicKey?Un(o.senderPublicKey,Fr):void 0},this.core=e,this.logger=pn(t,this.name),this.keychain=n||new D9(this.core,this.logger)}get context(){return Xr(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(mE)}catch{e=ry(),await this.keychain.set(mE,e)}return Xk(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class C9 extends iF{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=a9,this.version=c9,this.initialized=!1,this.storagePrefix=to,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const o=ic(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[o]<"u"||(c[o]=i,this.messages.set(n,c),await this.persist()),o},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const o=this.get(n),c=ic(i);return typeof o[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=pn(e,this.name),this.core=t}get context(){return Xr(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,a2(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?c2(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class N9 extends sF{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new dn.EventEmitter,this.name=l9,this.queue=new Map,this.publishTimeout=xe.toMiliseconds(xe.TEN_SECONDS),this.queueTimeout=xe.toMiliseconds(xe.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}});try{const c=(o==null?void 0:o.ttl)||u9,u=ny(o),l=(o==null?void 0:o.prompt)||!1,f=(o==null?void 0:o.tag)||0,d=(o==null?void 0:o.id)||Nd().toString(),g={topic:n,message:i,opts:{ttl:c,relay:u,prompt:l,tag:f,id:d}},m=setTimeout(()=>this.queue.set(d,g),this.queueTimeout);try{await await Xf(this.rpcPublish(n,i,c,u,l,f,d),this.publishTimeout),clearTimeout(m),this.relayer.events.emit(Lt.publish,g)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=pn(t,this.name),this.registerEventListeners()}get context(){return Xr(this.logger)}rpcPublish(e,t,n,i,o,c,u){var l,f,d,g;const m={method:Rf(i.protocol).publish,params:{topic:e,message:t,ttl:n,prompt:o,tag:c},id:u};return Rr((l=m.params)==null?void 0:l.prompt)&&((f=m.params)==null||delete f.prompt),Rr((d=m.params)==null?void 0:d.tag)&&((g=m.params)==null||delete g.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:m}),this.relayer.request(m)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:n,opts:i}=e;await this.publish(t,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(kl.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Lt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Lt.message_ack,e=>{this.onPublish(e.id.toString())})}}class R9{constructor(){this.map=new Map,this.set=(e,t)=>{const n=this.get(e);this.exists(e,t)||this.map.set(e,[...n,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,t))return;const i=n.filter(o=>o!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var T9=Object.defineProperty,B9=Object.defineProperties,U9=Object.getOwnPropertyDescriptors,vE=Object.getOwnPropertySymbols,F9=Object.prototype.hasOwnProperty,L9=Object.prototype.propertyIsEnumerable,EE=(r,e,t)=>e in r?T9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Gu=(r,e)=>{for(var t in e||(e={}))F9.call(e,t)&&EE(r,t,e[t]);if(vE)for(var t of vE(e))L9.call(e,t)&&EE(r,t,e[t]);return r},h0=(r,e)=>B9(r,U9(e));class M9 extends cF{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new R9,this.events=new dn.EventEmitter,this.name=b9,this.version=v9,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=to,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=ny(i),c={topic:n,relay:o};this.pending.set(n,c);const u=await this.rpcSubscribe(n,o);return this.onSubscribe(u,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),u}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,o)=>{const c=new xe.Watch;c.start(this.pendingSubscriptionWatchLabel);const u=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(u),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=E9&&(clearInterval(u),c.stop(this.pendingSubscriptionWatchLabel),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=pn(t,this.name),this.clientId=""}get context(){return Xr(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let n=!1;try{n=this.getSubscription(e).topic===t}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}});try{const i=ny(n);await this.rpcUnsubscribe(e,t,i);const o=zt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t){const n={method:Rf(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Xf(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Lt.connection_stalled)}return ic(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,n={method:Rf(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Xf(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Lt.connection_stalled)}}rpcUnsubscribe(e,t,n){const i={method:Rf(n.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,h0(Gu({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Gu({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,n){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Gu({},t)),this.topicMap.set(t.topic,e),this.events.emit(fi.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(fi.deleted,h0(Gu({},n),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(fi.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(fi.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Si(t)&&this.onBatchSubscribe(t.map((n,i)=>h0(Gu({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(kl.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Lt.connect,async()=>{await this.onConnect()}),this.relayer.on(Lt.disconnect,()=>{this.onDisconnect()}),this.events.on(fi.created,async e=>{const t=fi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(fi.deleted,async e=>{const t=fi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var k9=Object.defineProperty,AE=Object.getOwnPropertySymbols,$9=Object.prototype.hasOwnProperty,j9=Object.prototype.propertyIsEnumerable,_E=(r,e,t)=>e in r?k9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,H9=(r,e)=>{for(var t in e||(e={}))$9.call(e,t)&&_E(r,t,e[t]);if(AE)for(var t of AE(e))j9.call(e,t)&&_E(r,t,e[t]);return r};class z9 extends oF{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new dn.EventEmitter,this.name=f9,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?pn(e.logger,this.name):Dd(Od({level:e.logger||h9})),this.messages=new C9(this.logger,e.core),this.subscriber=new M9(this,this.logger),this.publisher=new N9(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||fI,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${wE}...`),await this.restartTransport(wE)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},y9)}get context(){return Xr(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,n){this.isInitialized(),await this.publisher.publish(e,t,n),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(o=>{this.subscriber.once(fi.created,c=>{c.topic===e&&o()})}),new Promise(async o=>{i=await this.subscriber.subscribe(e,t),o()})]),i)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(Lt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(t=>{this.initialized||t(),this.subscriber.once(fi.resubscribed,()=>{t()})}),await Promise.race([new Promise(async(t,n)=>{await Xf(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(i=>n(i)).then(()=>t()).finally(()=>this.removeListener(Lt.transport_closed,this.rejectTransportOpen))}),new Promise(t=>this.once(Lt.transport_closed,this.rejectTransportOpen))])])}catch(t){this.logger.error(t);const n=t;if(!this.isConnectionStalled(n.message))throw t;this.events.emit(Lt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(t=>{this.provider.once(Hu.disconnect,()=>{t()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new AM(new SM(h5({sdkVersion:g9,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:n}=e;await this.messages.set(t,n)}async shouldIgnoreMessageEvent(e){const{topic:t,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const i=this.messages.has(t,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),om(e)){if(!e.method.endsWith(d9))return;const t=e.params,{topic:n,message:i,publishedAt:o}=t.data,c={topic:n,message:i,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(H9({type:"event",event:t.id},c)),this.events.emit(t.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else zl(e)&&this.events.emit(Lt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Lt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=sm(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(Hu.payload,e=>this.onProviderPayload(e)),this.provider.on(Hu.connect,()=>{this.events.emit(Lt.connect)}),this.provider.on(Hu.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Hu.error,e=>{this.logger.error(e),this.events.emit(Lt.error,e)})}registerEventListeners(){this.events.on(Lt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(Lt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},xe.toMiliseconds(p9))}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var G9=Object.defineProperty,IE=Object.getOwnPropertySymbols,q9=Object.prototype.hasOwnProperty,V9=Object.prototype.propertyIsEnumerable,xE=(r,e,t)=>e in r?G9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,SE=(r,e)=>{for(var t in e||(e={}))q9.call(e,t)&&xE(r,t,e[t]);if(IE)for(var t of IE(e))V9.call(e,t)&&xE(r,t,e[t]);return r};class Bd extends aF{constructor(e,t,n,i=to,o=void 0){super(e,t,n,i),this.core=e,this.logger=t,this.name=n,this.map=new Map,this.version=m9,this.cached=[],this.initialized=!1,this.storagePrefix=to,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Rr(c)?this.map.set(this.getKey(c),c):B5(c)?this.map.set(c.id,c):U5(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,u)=>{this.isInitialized(),this.map.has(c)?await this.update(c,u):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:u}),this.map.set(c,u),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(u=>Object.keys(c).every(l=>OM(u[l],c[l]))):this.values),this.update=async(c,u)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:u});const l=SE(SE({},this.getData(c)),u);this.map.set(c,l),await this.persist()},this.delete=async(c,u)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:u}),this.map.delete(c),await this.persist())},this.logger=pn(t,this.name),this.storagePrefix=i,this.getKey=o}get context(){return Xr(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class K9{constructor(e,t){this.core=e,this.logger=t,this.name=A9,this.version=_9,this.events=new Ly,this.initialized=!1,this.storagePrefix=to,this.ignoredPayloadTypes=[da],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=ry(),i=await this.core.crypto.setSymKey(n),o=Yn(xe.FIVE_MINUTES),c={protocol:hI},u={topic:i,expiry:o,relay:c,active:!1},l=I5({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,u),await this.core.relayer.subscribe(i),this.core.expirer.set(i,o),{topic:i,uri:l}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:o,relay:c}=E5(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const u=Yn(xe.FIVE_MINUTES),l={topic:i,relay:c,expiry:u,active:!1};return await this.pairings.set(i,l),await this.core.crypto.setSymKey(o,i),await this.core.relayer.subscribe(i,{relay:c}),this.core.expirer.set(i,u),n.activatePairing&&await this.activate({topic:i}),l},this.activate=async({topic:n})=>{this.isInitialized();const i=Yn(xe.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const o=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:u,reject:l}=Wa();this.events.once(Wt("pairing_ping",o),({error:f})=>{f?l(f):u()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",zt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,o)=>{const c=Hl(i,o),u=await this.core.crypto.encode(n,c),l=zu[i].req;return this.core.history.set(n,c),this.core.relayer.publish(n,u,l),c.id},this.sendResult=async(n,i,o)=>{const c=sm(n,o),u=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),f=zu[l.request.method].res;await this.core.relayer.publish(i,u,f),await this.core.history.resolve(c)},this.sendError=async(n,i,o)=>{const c=Rd(n,o),u=await this.core.crypto.encode(i,c),l=await this.core.history.get(i,n),f=zu[l.request.method]?zu[l.request.method].res:zu.unregistered_method.res;await this.core.relayer.publish(i,u,f),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,zt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Rs(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n;switch(o.method){case"wc_pairingPing":return this.onPairingPingRequest(i,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,o);default:return this.onUnknownRpcMethodRequest(i,o)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:o}=n,c=(await this.core.history.get(i,o.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,o);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:o}=i;try{this.isValidPing({topic:n}),await this.sendResult(o,n,!0),this.events.emit("pairing_ping",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{Vi(i)?this.events.emit(Wt("pairing_ping",o),{}):Bn(i)&&this.events.emit(Wt("pairing_ping",o),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:o,method:c}=i;try{if(this.registeredMethods.includes(c))return;const u=zt("WC_METHOD_UNSUPPORTED",c);await this.sendError(o,n,u),this.logger.error(u)}catch(u){await this.sendError(o,n,u),this.logger.error(u)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(zt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!qr(n)){const{message:i}=ge("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!T5(n.uri)){const{message:i}=ge("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!qr(n)){const{message:o}=ge("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!qr(n)){const{message:o}=ge("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!cr(n,!1)){const{message:i}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Rs(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ge("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=pn(t,this.name),this.pairings=new Bd(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Xr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Lt.message,async e=>{const{topic:t,message:n}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(t,n);om(i)?(this.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):zl(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id))})}registerExpirerEvents(){this.core.expirer.on(Sn.expired,async e=>{const{topic:t}=l2(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class Q9 extends nF{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new dn.EventEmitter,this.name=I9,this.version=x9,this.cached=[],this.initialized=!1,this.storagePrefix=to,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:o}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:o,expiry:Yn(xe.THIRTY_DAYS)};this.records.set(c.id,c),this.events.emit(hi.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Bn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(hi.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(o=>{if(o.topic===n){if(typeof i<"u"&&o.id!==i)return;this.records.delete(o.id),this.events.emit(hi.deleted,o)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=pn(t,this.name)}get context(){return Xr(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const n={topic:t.topic,request:Hl(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(hi.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(hi.created,e=>{const t=hi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(hi.updated,e=>{const t=hi.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(hi.deleted,e=>{const t=hi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(kl.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{xe.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class W9 extends uF{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new dn.EventEmitter,this.name=S9,this.version=P9,this.cached=[],this.initialized=!1,this.storagePrefix=to,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const o=this.formatTarget(n),c={target:o,expiry:i};this.expirations.set(o,c),this.checkExpiry(o,c),this.events.emit(Sn.created,{target:o,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),o=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Sn.deleted,{target:i,expiration:o})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=pn(t,this.name)}get context(){return Xr(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return f5(e);if(typeof e=="number")return d5(e);const{message:t}=ge("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Sn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=ge("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:n}=ge("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return t}checkExpiry(e,t){const{expiry:n}=t;xe.toMiliseconds(n)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Sn.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(kl.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Sn.created,e=>{const t=Sn.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Sn.expired,e=>{const t=Sn.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Sn.deleted,e=>{const t=Sn.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}}class J9 extends lF{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=l0,this.initialized=!1,this.init=async n=>{o2()||!qy()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||bE,await this.createIframe())},this.register=async n=>{var i;if(this.initialized||await this.init(),!!this.iframe)try{(i=this.iframe.contentWindow)==null||i.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var i;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const o=this.startAbortTimer(xe.FIVE_SECONDS),c=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(o),c.status===200?(i=await c.json())==null?void 0:i.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,i)=>{if(document.getElementById(l0))return n();const o=document.createElement("iframe");o.setAttribute("id",l0),o.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),o.style.display="none",o.addEventListener("load",()=>{this.initialized=!0,n()}),o.addEventListener("error",c=>{i(c)}),document.body.append(o),this.iframe=o}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),xe.toMiliseconds(xe.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=pn(t,this.name),this.verifyUrl=bE,this.abortController=new AbortController,this.isDevEnv=Gy()&&CM.IS_VITEST}get context(){return Xr(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),xe.toMiliseconds(e))}}var Y9=Object.defineProperty,PE=Object.getOwnPropertySymbols,Z9=Object.prototype.hasOwnProperty,X9=Object.prototype.propertyIsEnumerable,DE=(r,e,t)=>e in r?Y9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,OE=(r,e)=>{for(var t in e||(e={}))Z9.call(e,t)&&DE(r,t,e[t]);if(PE)for(var t of PE(e))X9.call(e,t)&&DE(r,t,e[t]);return r};class am extends rF{constructor(e){super(e),this.protocol=uI,this.version=e9,this.name=lI,this.events=new dn.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||fI;const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Dd(Od({level:(e==null?void 0:e.logger)||t9.logger}));this.logger=pn(t,this.name),this.heartbeat=new kl.HeartBeat,this.crypto=new O9(this,this.logger,e==null?void 0:e.keychain),this.history=new Q9(this,this.logger),this.expirer=new W9(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new UU(OE(OE({},r9),e==null?void 0:e.storageOptions)),this.relayer=new z9({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new K9(this,this.logger),this.verify=new J9(this.projectId||"",this.logger)}static async init(e){const t=new am(e);await t.initialize();const n=await t.crypto.getClientId();return await t.storage.setItem(w9,n),t}get context(){return Xr(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const e$=am,dI="wc",pI=2,gI="client",cm=`${dI}@${pI}:${gI}:`,f0={name:gI,logger:"error"},t$="WALLETCONNECT_DEEPLINK_CHOICE",r$="proposal",yI="Proposal expired",n$="session",wf=xe.SEVEN_DAYS,i$="engine",qu={wc_sessionPropose:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:xe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:xe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:xe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:xe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:xe.THIRTY_SECONDS,prompt:!1,tag:1115}}},d0={min:xe.FIVE_MINUTES,max:xe.SEVEN_DAYS},Vu={idle:"idle",active:"active"},s$="request",o$=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var a$=Object.defineProperty,c$=Object.defineProperties,u$=Object.getOwnPropertyDescriptors,CE=Object.getOwnPropertySymbols,l$=Object.prototype.hasOwnProperty,h$=Object.prototype.propertyIsEnumerable,NE=(r,e,t)=>e in r?a$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xn=(r,e)=>{for(var t in e||(e={}))l$.call(e,t)&&NE(r,t,e[t]);if(CE)for(var t of CE(e))h$.call(e,t)&&NE(r,t,e[t]);return r},p0=(r,e)=>c$(r,u$(e));class f$ extends fF{constructor(e){super(e),this.name=i$,this.events=new Ly,this.initialized=!1,this.ignoredPayloadTypes=[da],this.requestQueue={state:Vu.idle,requests:[]},this.requestQueueDelay=xe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(qu)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},xe.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{this.isInitialized();const n=p0(xn({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:u,relays:l}=n;let f=i,d,g=!1;if(f&&(g=this.client.core.pairing.pairings.get(f).active),!f||!g){const{topic:C,uri:S}=await this.client.core.pairing.create();f=C,d=S}const m=await this.client.core.crypto.generateKeyPair(),b=xn({requiredNamespaces:o,optionalNamespaces:c,relays:l??[{protocol:hI}],proposer:{publicKey:m,metadata:this.client.metadata}},u&&{sessionProperties:u}),{reject:I,resolve:x,done:B}=Wa(xe.FIVE_MINUTES,yI);if(this.events.once(Wt("session_connect"),async({error:C,session:S})=>{if(C)I(C);else if(S){S.self.publicKey=m;const D=p0(xn({},S),{requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces});await this.client.session.set(S.topic,D),await this.setExpiry(S.topic,S.expiry),f&&await this.client.core.pairing.updateMetadata({topic:f,metadata:S.peer.metadata}),x(D)}}),!f){const{message:C}=ge("NO_MATCHING_KEY",`connect() pairing topic: ${f}`);throw new Error(C)}const M=await this.sendRequest(f,"wc_sessionPropose",b),R=Yn(xe.FIVE_MINUTES);return await this.setProposal(M,xn({id:M,expiry:R},b)),{uri:d,approval:B}},this.pair=async t=>(this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{this.isInitialized(),await this.isValidApprove(t);const{id:n,relayProtocol:i,namespaces:o,sessionProperties:c}=t,u=this.client.proposal.get(n);let{pairingTopic:l,proposer:f,requiredNamespaces:d,optionalNamespaces:g}=u;l=l||"",sc(d)||(d=D5(o,"approve()"));const m=await this.client.core.crypto.generateKeyPair(),b=f.publicKey,I=await this.client.core.crypto.generateSharedKey(m,b);l&&n&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:f.metadata}),await this.sendResult(n,l,{relay:{protocol:i??"irn"},responderPublicKey:m}),await this.client.proposal.delete(n,zt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const x=xn({relay:{protocol:i??"irn"},namespaces:o,requiredNamespaces:d,optionalNamespaces:g,pairingTopic:l,controller:{publicKey:m,metadata:this.client.metadata},expiry:Yn(wf)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(I),await this.sendRequest(I,"wc_sessionSettle",x);const B=p0(xn({},x),{topic:I,pairingTopic:l,acknowledged:!1,self:x.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:m});return await this.client.session.set(I,B),await this.setExpiry(I,Yn(wf)),{topic:I,acknowledged:()=>new Promise(M=>setTimeout(()=>M(this.client.session.get(I)),500))}},this.reject=async t=>{this.isInitialized(),await this.isValidReject(t);const{id:n,reason:i}=t,{pairingTopic:o}=this.client.proposal.get(n);o&&(await this.sendError(n,o,i),await this.client.proposal.delete(n,zt("USER_DISCONNECTED")))},this.update=async t=>{this.isInitialized(),await this.isValidUpdate(t);const{topic:n,namespaces:i}=t,o=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:c,resolve:u,reject:l}=Wa();return this.events.once(Wt("session_update",o),({error:f})=>{f?l(f):u()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async t=>{this.isInitialized(),await this.isValidExtend(t);const{topic:n}=t,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:o,resolve:c,reject:u}=Wa();return this.events.once(Wt("session_extend",i),({error:l})=>{l?u(l):c()}),await this.setExpiry(n,Yn(wf)),{acknowledged:o}},this.request=async t=>{this.isInitialized(),await this.isValidRequest(t);const{chainId:n,request:i,topic:o,expiry:c}=t,u=await this.sendRequest(o,"wc_sessionRequest",{request:i,chainId:n},c),{done:l,resolve:f,reject:d}=Wa(c);this.events.once(Wt("session_request",u),({error:m,result:b})=>{m?d(m):f(b)}),this.client.events.emit("session_request_sent",{topic:o,request:i,chainId:n,id:u});const g=await this.client.core.storage.getItem(t$);return p5({id:u,topic:o,wcDeepLink:g}),await l()},this.respond=async t=>{this.isInitialized(),await this.isValidRespond(t);const{topic:n,response:i}=t,{id:o}=i;Vi(i)?await this.sendResult(o,n,i.result):Bn(i)&&await this.sendError(o,n,i.error),this.cleanupAfterResponse(t)},this.ping=async t=>{this.isInitialized(),await this.isValidPing(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:o,resolve:c,reject:u}=Wa();this.events.once(Wt("session_ping",i),({error:l})=>{l?u(l):c()}),await o()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async t=>{this.isInitialized(),await this.isValidEmit(t);const{topic:n,event:i,chainId:o}=t;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:o})},this.disconnect=async t=>{this.isInitialized(),await this.isValidDisconnect(t);const{topic:n}=t;if(this.client.session.keys.includes(n)){const i=Nd().toString();let o;const c=u=>{(u==null?void 0:u.id.toString())===i&&(this.client.core.relayer.events.removeListener(Lt.message_ack,c),o())};await Promise.all([new Promise(u=>{o=u,this.client.core.relayer.on(Lt.message_ack,c)}),this.sendRequest(n,"wc_sessionDelete",zt("USER_DISCONNECTED"),void 0,i)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(n=>N5(n,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const n=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(o=>{var c,u;return((c=o.peerMetadata)==null?void 0:c.url)&&((u=o.peerMetadata)==null?void 0:u.url)===t.peer.metadata.url&&o.topic&&o.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(t,n)=>{const{self:i}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,zt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),n||this.client.core.expirer.del(t)},this.deleteProposal=async(t,n)=>{await Promise.all([this.client.proposal.delete(t,zt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,n),i?Promise.resolve():this.client.core.expirer.del(t)]),this.requestQueue.requests=this.requestQueue.requests.filter(o=>o.id!==t),i&&(this.requestQueue.state=Vu.idle)},this.setExpiry=async(t,n)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:n}),this.client.core.expirer.set(t,n)},this.setProposal=async(t,n)=>{await this.client.proposal.set(t,n),this.client.core.expirer.set(t,n.expiry)},this.setPendingSessionRequest=async t=>{const n=qu.wc_sessionRequest.req.ttl,{id:i,topic:o,params:c}=t;await this.client.pendingRequest.set(i,{id:i,topic:o,params:c}),n&&this.client.core.expirer.set(i,Yn(n))},this.sendRequest=async(t,n,i,o,c)=>{const u=Hl(n,i);if(qy()&&o$.includes(n)){const d=ic(JSON.stringify(u));await this.client.core.verify.register({attestationId:d})}const l=await this.client.core.crypto.encode(t,u),f=qu[n].req;return o&&(f.ttl=o),c&&(f.id=c),this.client.core.history.set(t,u),this.client.core.relayer.publish(t,l,f),u.id},this.sendResult=async(t,n,i)=>{const o=sm(t,i),c=await this.client.core.crypto.encode(n,o),u=await this.client.core.history.get(n,t),l=qu[u.request.method].res;this.client.core.relayer.publish(n,c,l),await this.client.core.history.resolve(o)},this.sendError=async(t,n,i)=>{const o=Rd(t,i),c=await this.client.core.crypto.encode(n,o),u=await this.client.core.history.get(n,t),l=qu[u.request.method].res;this.client.core.relayer.publish(n,c,l),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const t=[],n=[];this.client.session.getAll().forEach(i=>{Rs(i.expiry)&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Rs(i.expiry)&&n.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=t=>{const{topic:n,payload:i}=t,o=i.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async t=>{const{topic:n,payload:i}=t,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:n}=t,{message:i}=ge("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(t,n)=>{const{params:i,id:o}=n;try{this.isValidConnect(xn({},n.params));const c=Yn(xe.FIVE_MINUTES),u=xn({id:o,pairingTopic:t,expiry:c},i);await this.setProposal(o,u);const l=ic(JSON.stringify(n)),f=await this.getVerifyContext(l,u.proposer.metadata);this.client.events.emit("session_proposal",{id:o,params:u,verifyContext:f})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(t,n)=>{const{id:i}=n;if(Vi(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const u=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:u});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const f=await this.client.core.crypto.generateSharedKey(u,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:f});const d=await this.client.core.relayer.subscribe(f);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:t})}else Bn(n)&&(await this.client.proposal.delete(i,zt("USER_DISCONNECTED")),this.events.emit(Wt("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(t,n)=>{const{id:i,params:o}=n;try{this.isValidSessionSettleRequest(o);const{relay:c,controller:u,expiry:l,namespaces:f,requiredNamespaces:d,optionalNamespaces:g,sessionProperties:m,pairingTopic:b}=n.params,I=xn({topic:t,relay:c,expiry:l,namespaces:f,acknowledged:!0,pairingTopic:b,requiredNamespaces:d,optionalNamespaces:g,controller:u.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:u.publicKey,metadata:u.metadata}},m&&{sessionProperties:m});await this.sendResult(n.id,t,!0),this.events.emit(Wt("session_connect"),{session:I}),this.cleanupDuplicatePairings(I)}catch(c){await this.sendError(i,t,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(t,n)=>{const{id:i}=n;Vi(n)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Wt("session_approve",i),{})):Bn(n)&&(await this.client.session.delete(t,zt("USER_DISCONNECTED")),this.events.emit(Wt("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(t,n)=>{const{params:i,id:o}=n;try{this.isValidUpdate(xn({topic:t},i)),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult(o,t,!0),this.client.events.emit("session_update",{id:o,topic:t,params:i})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionUpdateResponse=(t,n)=>{const{id:i}=n;Vi(n)?this.events.emit(Wt("session_update",i),{}):Bn(n)&&this.events.emit(Wt("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(t,n)=>{const{id:i}=n;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Yn(wf)),await this.sendResult(i,t,!0),this.client.events.emit("session_extend",{id:i,topic:t})}catch(o){await this.sendError(i,t,o),this.client.logger.error(o)}},this.onSessionExtendResponse=(t,n)=>{const{id:i}=n;Vi(n)?this.events.emit(Wt("session_extend",i),{}):Bn(n)&&this.events.emit(Wt("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(t,n)=>{const{id:i}=n;try{this.isValidPing({topic:t}),await this.sendResult(i,t,!0),this.client.events.emit("session_ping",{id:i,topic:t})}catch(o){await this.sendError(i,t,o),this.client.logger.error(o)}},this.onSessionPingResponse=(t,n)=>{const{id:i}=n;setTimeout(()=>{Vi(n)?this.events.emit(Wt("session_ping",i),{}):Bn(n)&&this.events.emit(Wt("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(t,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:t,reason:n.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(Lt.publish,async()=>{o(await this.deleteSession(t))})}),this.sendResult(i,t,!0)]),this.client.events.emit("session_delete",{id:i,topic:t})}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async(t,n)=>{const{id:i,params:o}=n;try{this.isValidRequest(xn({topic:t},o)),await this.setPendingSessionRequest({id:i,topic:t,params:o}),this.addRequestToQueue({id:i,topic:t,params:o}),await this.processRequestQueue()}catch(c){await this.sendError(i,t,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(t,n)=>{const{id:i}=n;Vi(n)?this.events.emit(Wt("session_request",i),{result:n.result}):Bn(n)&&this.events.emit(Wt("session_request",i),{error:n.error})},this.onSessionEventRequest=async(t,n)=>{const{id:i,params:o}=n;try{this.isValidEmit(xn({topic:t},o)),this.client.events.emit("session_event",{id:i,topic:t,params:o})}catch(c){await this.sendError(i,t,c),this.client.logger.error(c)}},this.addRequestToQueue=t=>{this.requestQueue.requests.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=Vu.idle,this.processRequestQueue()},xe.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===Vu.active){this.client.logger.info("session request queue is already active.");return}const t=this.requestQueue.requests[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:o}=t,c=ic(JSON.stringify({id:n,params:o})),u=this.client.session.get(i),l=await this.getVerifyContext(c,u.peer.metadata);this.requestQueue.state=Vu.active,this.client.events.emit("session_request",{id:n,topic:i,params:o,verifyContext:l})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async t=>{if(!qr(t)){const{message:l}=ge("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(l)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:c,relays:u}=t;if(Rr(n)||await this.isValidPairingTopic(n),!z5(u)){const{message:l}=ge("MISSING_OR_INVALID",`connect() relays: ${u}`);throw new Error(l)}!Rr(i)&&sc(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Rr(o)&&sc(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),Rr(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(t,n)=>{const i=H5(t,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async t=>{if(!qr(t))throw new Error(ge("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:n,namespaces:i,relayProtocol:o,sessionProperties:c}=t;await this.isValidProposalId(n);const u=this.client.proposal.get(n),l=Bf(i,"approve()");if(l)throw new Error(l.message);const f=A1(u.requiredNamespaces,i,"approve()");if(f)throw new Error(f.message);if(!cr(o,!0)){const{message:d}=ge("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(d)}Rr(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async t=>{if(!qr(t)){const{message:o}=ge("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(o)}const{id:n,reason:i}=t;if(await this.isValidProposalId(n),!q5(i)){const{message:o}=ge("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidSessionSettleRequest=t=>{if(!qr(t)){const{message:f}=ge("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(f)}const{relay:n,controller:i,namespaces:o,expiry:c}=t;if(!f2(n)){const{message:f}=ge("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const u=F5(i,"onSessionSettleRequest()");if(u)throw new Error(u.message);const l=Bf(o,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Rs(c)){const{message:f}=ge("EXPIRED","onSessionSettleRequest()");throw new Error(f)}},this.isValidUpdate=async t=>{if(!qr(t)){const{message:l}=ge("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(l)}const{topic:n,namespaces:i}=t;await this.isValidSessionTopic(n);const o=this.client.session.get(n),c=Bf(i,"update()");if(c)throw new Error(c.message);const u=A1(o.requiredNamespaces,i,"update()");if(u)throw new Error(u.message)},this.isValidExtend=async t=>{if(!qr(t)){const{message:i}=ge("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:n}=t;await this.isValidSessionTopic(n)},this.isValidRequest=async t=>{if(!qr(t)){const{message:l}=ge("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(l)}const{topic:n,request:i,chainId:o,expiry:c}=t;await this.isValidSessionTopic(n);const{namespaces:u}=this.client.session.get(n);if(!E1(u,o)){const{message:l}=ge("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(l)}if(!V5(i)){const{message:l}=ge("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!W5(u,o,i.method)){const{message:l}=ge("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}if(c&&!X5(c,d0)){const{message:l}=ge("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${d0.min} and ${d0.max}`);throw new Error(l)}},this.isValidRespond=async t=>{if(!qr(t)){const{message:o}=ge("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:n,response:i}=t;if(await this.isValidSessionTopic(n),!K5(i)){const{message:o}=ge("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidPing=async t=>{if(!qr(t)){const{message:i}=ge("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async t=>{if(!qr(t)){const{message:u}=ge("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(u)}const{topic:n,event:i,chainId:o}=t;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!E1(c,o)){const{message:u}=ge("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(u)}if(!Q5(i)){const{message:u}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}if(!J5(c,o,i.name)){const{message:u}=ge("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(u)}},this.isValidDisconnect=async t=>{if(!qr(t)){const{message:i}=ge("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:n}=t;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(t,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const o=await this.client.core.verify.resolve({attestationId:t,verifyUrl:n.verifyUrl});o&&(i.verified.origin=o,i.verified.validation=o===n.url?"VALID":"INVALID")}catch(o){this.client.logger.error(o)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(t,n)=>{Object.values(t).forEach(i=>{if(!cr(i,!1)){const{message:o}=ge("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(o)}})}}isInitialized(){if(!this.initialized){const{message:e}=ge("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(Lt.message,async e=>{const{topic:t,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(t,n);om(i)?(this.client.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):zl(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.client.core.history.delete(t,i.id)):this.onRelayEventUnknownPayload({topic:t,payload:i})})}registerExpirerEvents(){this.client.core.expirer.on(Sn.expired,async e=>{const{topic:t,id:n}=l2(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ge("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!cr(e,!1)){const{message:t}=ge("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=ge("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=ge("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!cr(e,!1)){const{message:t}=ge("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=ge("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=ge("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(cr(e,!1)){const{message:t}=ge("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=ge("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!G5(e)){const{message:t}=ge("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=ge("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Rs(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=ge("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class d$ extends Bd{constructor(e,t){super(e,t,r$,cm),this.core=e,this.logger=t}}class p$ extends Bd{constructor(e,t){super(e,t,n$,cm),this.core=e,this.logger=t}}class g$ extends Bd{constructor(e,t){super(e,t,s$,cm,n=>n.id),this.core=e,this.logger=t}}let y$=class mI extends hF{constructor(e){super(e),this.protocol=dI,this.version=pI,this.name=f0.name,this.events=new dn.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(e==null?void 0:e.name)||f0.name,this.metadata=(e==null?void 0:e.metadata)||a5();const t=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Dd(Od({level:(e==null?void 0:e.logger)||f0.logger}));this.core=(e==null?void 0:e.core)||new e$(e),this.logger=pn(t,this.name),this.session=new p$(this.core,this.logger),this.proposal=new d$(this.core,this.logger),this.pendingRequest=new g$(this.core,this.logger),this.engine=new f$(this)}static async init(e){const t=new mI(e);return await t.initialize(),t}get context(){return Xr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var bf={exports:{}},RE;function m$(){return RE||(RE=1,function(r,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Jr<"u"&&Jr,n=function(){function o(){this.fetch=!1,this.DOMException=t.DOMException}return o.prototype=t,new o}();(function(o){(function(c){var u=typeof o<"u"&&o||typeof self<"u"&&self||typeof Jr<"u"&&Jr||{},l={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function f(v){return v&&DataView.prototype.isPrototypeOf(v)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(v){return v&&d.indexOf(Object.prototype.toString.call(v))>-1};function m(v){if(typeof v!="string"&&(v=String(v)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(v)||v==="")throw new TypeError('Invalid character in header field name: "'+v+'"');return v.toLowerCase()}function b(v){return typeof v!="string"&&(v=String(v)),v}function I(v){var w={next:function(){var T=v.shift();return{done:T===void 0,value:T}}};return l.iterable&&(w[Symbol.iterator]=function(){return w}),w}function x(v){this.map={},v instanceof x?v.forEach(function(w,T){this.append(T,w)},this):Array.isArray(v)?v.forEach(function(w){if(w.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+w.length);this.append(w[0],w[1])},this):v&&Object.getOwnPropertyNames(v).forEach(function(w){this.append(w,v[w])},this)}x.prototype.append=function(v,w){v=m(v),w=b(w);var T=this.map[v];this.map[v]=T?T+", "+w:w},x.prototype.delete=function(v){delete this.map[m(v)]},x.prototype.get=function(v){return v=m(v),this.has(v)?this.map[v]:null},x.prototype.has=function(v){return this.map.hasOwnProperty(m(v))},x.prototype.set=function(v,w){this.map[m(v)]=b(w)},x.prototype.forEach=function(v,w){for(var T in this.map)this.map.hasOwnProperty(T)&&v.call(w,this.map[T],T,this)},x.prototype.keys=function(){var v=[];return this.forEach(function(w,T){v.push(T)}),I(v)},x.prototype.values=function(){var v=[];return this.forEach(function(w){v.push(w)}),I(v)},x.prototype.entries=function(){var v=[];return this.forEach(function(w,T){v.push([T,w])}),I(v)},l.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function B(v){if(!v._noBody){if(v.bodyUsed)return Promise.reject(new TypeError("Already read"));v.bodyUsed=!0}}function M(v){return new Promise(function(w,T){v.onload=function(){w(v.result)},v.onerror=function(){T(v.error)}})}function R(v){var w=new FileReader,T=M(w);return w.readAsArrayBuffer(v),T}function C(v){var w=new FileReader,T=M(w),H=/charset=([A-Za-z0-9_-]+)/.exec(v.type),Y=H?H[1]:"utf-8";return w.readAsText(v,Y),T}function S(v){for(var w=new Uint8Array(v),T=new Array(w.length),H=0;H<w.length;H++)T[H]=String.fromCharCode(w[H]);return T.join("")}function D(v){if(v.slice)return v.slice(0);var w=new Uint8Array(v.byteLength);return w.set(new Uint8Array(v)),w.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(v){this.bodyUsed=this.bodyUsed,this._bodyInit=v,v?typeof v=="string"?this._bodyText=v:l.blob&&Blob.prototype.isPrototypeOf(v)?this._bodyBlob=v:l.formData&&FormData.prototype.isPrototypeOf(v)?this._bodyFormData=v:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)?this._bodyText=v.toString():l.arrayBuffer&&l.blob&&f(v)?(this._bodyArrayBuffer=D(v.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(v)||g(v))?this._bodyArrayBuffer=D(v):this._bodyText=v=Object.prototype.toString.call(v):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof v=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(v)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var v=B(this);if(v)return v;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var v=B(this);return v||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(R);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var v=B(this);if(v)return v;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(S(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var p=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _(v){var w=v.toUpperCase();return p.indexOf(w)>-1?w:v}function $(v,w){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');w=w||{};var T=w.body;if(v instanceof $){if(v.bodyUsed)throw new TypeError("Already read");this.url=v.url,this.credentials=v.credentials,w.headers||(this.headers=new x(v.headers)),this.method=v.method,this.mode=v.mode,this.signal=v.signal,!T&&v._bodyInit!=null&&(T=v._bodyInit,v.bodyUsed=!0)}else this.url=String(v);if(this.credentials=w.credentials||this.credentials||"same-origin",(w.headers||!this.headers)&&(this.headers=new x(w.headers)),this.method=_(w.method||this.method||"GET"),this.mode=w.mode||this.mode||null,this.signal=w.signal||this.signal||function(){if("AbortController"in u){var K=new AbortController;return K.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&T)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(T),(this.method==="GET"||this.method==="HEAD")&&(w.cache==="no-store"||w.cache==="no-cache")){var H=/([?&])_=[^&]*/;if(H.test(this.url))this.url=this.url.replace(H,"$1_="+new Date().getTime());else{var Y=/\?/;this.url+=(Y.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}$.prototype.clone=function(){return new $(this,{body:this._bodyInit})};function q(v){var w=new FormData;return v.trim().split("&").forEach(function(T){if(T){var H=T.split("="),Y=H.shift().replace(/\+/g," "),K=H.join("=").replace(/\+/g," ");w.append(decodeURIComponent(Y),decodeURIComponent(K))}}),w}function Z(v){var w=new x,T=v.replace(/\r?\n[\t ]+/g," ");return T.split("\r").map(function(H){return H.indexOf(`
`)===0?H.substr(1,H.length):H}).forEach(function(H){var Y=H.split(":"),K=Y.shift().trim();if(K){var ue=Y.join(":").trim();try{w.append(K,ue)}catch(he){console.warn("Response "+he.message)}}}),w}E.call($.prototype);function oe(v,w){if(!(this instanceof oe))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(w||(w={}),this.type="default",this.status=w.status===void 0?200:w.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=w.statusText===void 0?"":""+w.statusText,this.headers=new x(w.headers),this.url=w.url||"",this._initBody(v)}E.call(oe.prototype),oe.prototype.clone=function(){return new oe(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},oe.error=function(){var v=new oe(null,{status:200,statusText:""});return v.ok=!1,v.status=0,v.type="error",v};var fe=[301,302,303,307,308];oe.redirect=function(v,w){if(fe.indexOf(w)===-1)throw new RangeError("Invalid status code");return new oe(null,{status:w,headers:{location:v}})},c.DOMException=u.DOMException;try{new c.DOMException}catch{c.DOMException=function(w,T){this.message=w,this.name=T;var H=Error(w);this.stack=H.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function re(v,w){return new Promise(function(T,H){var Y=new $(v,w);if(Y.signal&&Y.signal.aborted)return H(new c.DOMException("Aborted","AbortError"));var K=new XMLHttpRequest;function ue(){K.abort()}K.onload=function(){var ne={statusText:K.statusText,headers:Z(K.getAllResponseHeaders()||"")};Y.url.indexOf("file://")===0&&(K.status<200||K.status>599)?ne.status=200:ne.status=K.status,ne.url="responseURL"in K?K.responseURL:ne.headers.get("X-Request-URL");var ee="response"in K?K.response:K.responseText;setTimeout(function(){T(new oe(ee,ne))},0)},K.onerror=function(){setTimeout(function(){H(new TypeError("Network request failed"))},0)},K.ontimeout=function(){setTimeout(function(){H(new TypeError("Network request timed out"))},0)},K.onabort=function(){setTimeout(function(){H(new c.DOMException("Aborted","AbortError"))},0)};function he(ne){try{return ne===""&&u.location.href?u.location.href:ne}catch{return ne}}if(K.open(Y.method,he(Y.url),!0),Y.credentials==="include"?K.withCredentials=!0:Y.credentials==="omit"&&(K.withCredentials=!1),"responseType"in K&&(l.blob?K.responseType="blob":l.arrayBuffer&&(K.responseType="arraybuffer")),w&&typeof w.headers=="object"&&!(w.headers instanceof x||u.Headers&&w.headers instanceof u.Headers)){var X=[];Object.getOwnPropertyNames(w.headers).forEach(function(ne){X.push(m(ne)),K.setRequestHeader(ne,b(w.headers[ne]))}),Y.headers.forEach(function(ne,ee){X.indexOf(ee)===-1&&K.setRequestHeader(ee,ne)})}else Y.headers.forEach(function(ne,ee){K.setRequestHeader(ee,ne)});Y.signal&&(Y.signal.addEventListener("abort",ue),K.onreadystatechange=function(){K.readyState===4&&Y.signal.removeEventListener("abort",ue)}),K.send(typeof Y._bodyInit>"u"?null:Y._bodyInit)})}return re.polyfill=!0,u.fetch||(u.fetch=re,u.Headers=x,u.Request=$,u.Response=oe),c.Headers=x,c.Request=$,c.Response=oe,c.fetch=re,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=t.fetch?t:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e}(bf,bf.exports)),bf.exports}var w$=m$();const TE=xd(w$);var b$=Object.defineProperty,v$=Object.defineProperties,E$=Object.getOwnPropertyDescriptors,BE=Object.getOwnPropertySymbols,A$=Object.prototype.hasOwnProperty,_$=Object.prototype.propertyIsEnumerable,UE=(r,e,t)=>e in r?b$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,FE=(r,e)=>{for(var t in e||(e={}))A$.call(e,t)&&UE(r,t,e[t]);if(BE)for(var t of BE(e))_$.call(e,t)&&UE(r,t,e[t]);return r},LE=(r,e)=>v$(r,E$(e));const I$={Accept:"application/json","Content-Type":"application/json"},x$="POST",ME={headers:I$,method:x$},kE=10;let ya=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new dn.EventEmitter,this.isAvailable=!1,this.registering=!1,!oE(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=ua(e),n=await(await TE(this.url,LE(FE({},ME),{body:t}))).json();this.onPayload({data:n})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!oE(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=ua({id:1,jsonrpc:"2.0",method:"test",params:[]});await TE(e,LE(FE({},ME),{body:t}))}this.onOpen()}catch(t){const n=this.parseError(t);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ml(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const n=this.parseError(t),i=n.message||n.toString(),o=Rd(e,i);this.events.emit("payload",o)}parseError(e,t=this.url){return K2(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>kE&&this.events.setMaxListeners(kE)}};class ma extends W2{constructor(e){super(e),this.events=new dn.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Hl(e.method,e.params||[],e.id||Nd().toString()),t)}async requestStrict(e,t){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(o){i(o)}this.events.on(`${e.id}`,o=>{Bn(o)?i(o.error):n(o.result)});try{await this.connection.send(e,t)}catch(o){i(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),zl(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const $E="error",S$="wss://relay.walletconnect.com",P$="wc",D$="universal_provider",jE=`${P$}@2:${D$}:`,O$="https://rpc.walletconnect.com/v1",io={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fy={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",u="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",f=500,d="__lodash_placeholder__",g=1,m=2,b=4,I=1,x=2,B=1,M=2,R=4,C=8,S=16,D=32,E=64,p=128,_=256,$=512,q=30,Z="...",oe=800,fe=16,re=1,v=2,w=3,T=1/0,H=9007199254740991,Y=17976931348623157e292,K=NaN,ue=4294967295,he=ue-1,X=ue>>>1,ne=[["ary",p],["bind",B],["bindKey",M],["curry",C],["curryRight",S],["flip",$],["partial",D],["partialRight",E],["rearg",_]],ee="[object Arguments]",me="[object Array]",Se="[object AsyncFunction]",_e="[object Boolean]",Ie="[object Date]",Ne="[object DOMException]",Te="[object Error]",Re="[object Function]",Be="[object GeneratorFunction]",tt="[object Map]",Yt="[object Number]",Lr="[object Null]",rr="[object Object]",ni="[object Promise]",Pi="[object Proxy]",ht="[object RegExp]",Xe="[object Set]",ft="[object String]",bt="[object Symbol]",Pt="[object Undefined]",dt="[object WeakMap]",Dt="[object WeakSet]",ot="[object ArrayBuffer]",at="[object DataView]",Et="[object Float32Array]",et="[object Float64Array]",Ot="[object Int8Array]",Ct="[object Int16Array]",Bt="[object Int32Array]",Nt="[object Uint8Array]",At="[object Uint8ClampedArray]",wa="[object Uint16Array]",ba="[object Uint32Array]",Ud=/\b__p \+= '';/g,Di=/\b(__p \+=) '' \+/g,ql=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vl=/&(?:amp|lt|gt|quot|#39);/g,Kl=/[&<>"']/g,iu=RegExp(Vl.source),so=RegExp(Kl.source),su=/<%-([\s\S]+?)%>/g,ou=/<%([\s\S]+?)%>/g,va=/<%=([\s\S]+?)%>/g,oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fd=/^\w*$/,Ld=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,au=/[\\^$.*+?()[\]{}|]/g,Md=RegExp(au.source),cu=/^\s+/,Ql=/\s/,uu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Oi=/\{\n\/\* \[wrapped with (.+)\] \*/,kd=/,? & /,$d=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jd=/[()=,{}\[\]\/\s]/,Hd=/\\(\\)?/g,zd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gn=/\w*$/,Gd=/^[-+]0x[0-9a-f]+$/i,qd=/^0b[01]+$/i,Vd=/^\[object .+?Constructor\]$/,Kd=/^0o[0-7]+$/i,Qd=/^(?:0|[1-9]\d*)$/,Ci=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ea=/($^)/,Wd=/['\n\r\u2028\u2029\\]/g,Aa="\\ud800-\\udfff",Jd="\\u0300-\\u036f",Yd="\\ufe20-\\ufe2f",_a="\\u20d0-\\u20ff",Wl=Jd+Yd+_a,Jl="\\u2700-\\u27bf",Ln="a-z\\xdf-\\xf6\\xf8-\\xff",Zd="\\xac\\xb1\\xd7\\xf7",Xd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ep="\\u2000-\\u206f",tp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yl="A-Z\\xc0-\\xd6\\xd8-\\xde",Zl="\\ufe0e\\ufe0f",ao=Zd+Xd+ep+tp,lu="['’]",co="["+Aa+"]",hu="["+ao+"]",uo="["+Wl+"]",Xl="\\d+",rp="["+Jl+"]",eh="["+Ln+"]",th="[^"+Aa+ao+Xl+Jl+Ln+Yl+"]",Ia="\\ud83c[\\udffb-\\udfff]",np="(?:"+uo+"|"+Ia+")",rh="[^"+Aa+"]",xa="(?:\\ud83c[\\udde6-\\uddff]){2}",gs="[\\ud800-\\udbff][\\udc00-\\udfff]",en="["+Yl+"]",nh="\\u200d",ih="(?:"+eh+"|"+th+")",ii="(?:"+en+"|"+th+")",sh="(?:"+lu+"(?:d|ll|m|re|s|t|ve))?",oh="(?:"+lu+"(?:D|LL|M|RE|S|T|VE))?",ah=np+"?",ch="["+Zl+"]?",ip="(?:"+nh+"(?:"+[rh,xa,gs].join("|")+")"+ch+ah+")*",Ni="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",uh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lh=ch+ah+ip,Sa="(?:"+[rp,xa,gs].join("|")+")"+lh,sp="(?:"+[rh+uo+"?",uo,xa,gs,co].join("|")+")",fu=RegExp(lu,"g"),op=RegExp(uo,"g"),Pa=RegExp(Ia+"(?="+Ia+")|"+sp+lh,"g"),hh=RegExp([en+"?"+eh+"+"+sh+"(?="+[hu,en,"$"].join("|")+")",ii+"+"+oh+"(?="+[hu,en+ih,"$"].join("|")+")",en+"?"+ih+"+"+sh,en+"+"+oh,uh,Ni,Xl,Sa].join("|"),"g"),fh=RegExp("["+nh+Aa+Wl+Zl+"]"),lo=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,dh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ap=-1,pt={};pt[Et]=pt[et]=pt[Ot]=pt[Ct]=pt[Bt]=pt[Nt]=pt[At]=pt[wa]=pt[ba]=!0,pt[ee]=pt[me]=pt[ot]=pt[_e]=pt[at]=pt[Ie]=pt[Te]=pt[Re]=pt[tt]=pt[Yt]=pt[rr]=pt[ht]=pt[Xe]=pt[ft]=pt[dt]=!1;var ut={};ut[ee]=ut[me]=ut[ot]=ut[at]=ut[_e]=ut[Ie]=ut[Et]=ut[et]=ut[Ot]=ut[Ct]=ut[Bt]=ut[tt]=ut[Yt]=ut[rr]=ut[ht]=ut[Xe]=ut[ft]=ut[bt]=ut[Nt]=ut[At]=ut[wa]=ut[ba]=!0,ut[Te]=ut[Re]=ut[dt]=!1;var U={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},z={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},we={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gt=parseFloat,Fe=parseInt,_t=typeof Ku=="object"&&Ku&&Ku.Object===Object&&Ku,Kt=typeof self=="object"&&self&&self.Object===Object&&self,We=_t||Kt||Function("return this")(),yt=e&&!e.nodeType&&e,kt=yt&&!0&&r&&!r.nodeType&&r,Mr=kt&&kt.exports===yt,Qt=Mr&&_t.process,It=function(){try{var G=kt&&kt.require&&kt.require("util").types;return G||Qt&&Qt.binding&&Qt.binding("util")}catch{}}(),xr=It&&It.isArrayBuffer,Mn=It&&It.isDate,yn=It&&It.isMap,si=It&&It.isRegExp,du=It&&It.isSet,ho=It&&It.isTypedArray;function nr(G,te,W){switch(W.length){case 0:return G.call(te);case 1:return G.call(te,W[0]);case 2:return G.call(te,W[0],W[1]);case 3:return G.call(te,W[0],W[1],W[2])}return G.apply(te,W)}function EI(G,te,W,be){for(var Ue=-1,nt=G==null?0:G.length;++Ue<nt;){var Zt=G[Ue];te(be,Zt,W(Zt),G)}return be}function mn(G,te){for(var W=-1,be=G==null?0:G.length;++W<be&&te(G[W],W,G)!==!1;);return G}function AI(G,te){for(var W=G==null?0:G.length;W--&&te(G[W],W,G)!==!1;);return G}function pm(G,te){for(var W=-1,be=G==null?0:G.length;++W<be;)if(!te(G[W],W,G))return!1;return!0}function ys(G,te){for(var W=-1,be=G==null?0:G.length,Ue=0,nt=[];++W<be;){var Zt=G[W];te(Zt,W,G)&&(nt[Ue++]=Zt)}return nt}function ph(G,te){var W=G==null?0:G.length;return!!W&&Da(G,te,0)>-1}function cp(G,te,W){for(var be=-1,Ue=G==null?0:G.length;++be<Ue;)if(W(te,G[be]))return!0;return!1}function xt(G,te){for(var W=-1,be=G==null?0:G.length,Ue=Array(be);++W<be;)Ue[W]=te(G[W],W,G);return Ue}function ms(G,te){for(var W=-1,be=te.length,Ue=G.length;++W<be;)G[Ue+W]=te[W];return G}function up(G,te,W,be){var Ue=-1,nt=G==null?0:G.length;for(be&&nt&&(W=G[++Ue]);++Ue<nt;)W=te(W,G[Ue],Ue,G);return W}function _I(G,te,W,be){var Ue=G==null?0:G.length;for(be&&Ue&&(W=G[--Ue]);Ue--;)W=te(W,G[Ue],Ue,G);return W}function lp(G,te){for(var W=-1,be=G==null?0:G.length;++W<be;)if(te(G[W],W,G))return!0;return!1}var II=hp("length");function xI(G){return G.split("")}function SI(G){return G.match($d)||[]}function gm(G,te,W){var be;return W(G,function(Ue,nt,Zt){if(te(Ue,nt,Zt))return be=nt,!1}),be}function gh(G,te,W,be){for(var Ue=G.length,nt=W+(be?1:-1);be?nt--:++nt<Ue;)if(te(G[nt],nt,G))return nt;return-1}function Da(G,te,W){return te===te?MI(G,te,W):gh(G,ym,W)}function PI(G,te,W,be){for(var Ue=W-1,nt=G.length;++Ue<nt;)if(be(G[Ue],te))return Ue;return-1}function ym(G){return G!==G}function mm(G,te){var W=G==null?0:G.length;return W?dp(G,te)/W:K}function hp(G){return function(te){return te==null?t:te[G]}}function fp(G){return function(te){return G==null?t:G[te]}}function wm(G,te,W,be,Ue){return Ue(G,function(nt,Zt,mt){W=be?(be=!1,nt):te(W,nt,Zt,mt)}),W}function DI(G,te){var W=G.length;for(G.sort(te);W--;)G[W]=G[W].value;return G}function dp(G,te){for(var W,be=-1,Ue=G.length;++be<Ue;){var nt=te(G[be]);nt!==t&&(W=W===t?nt:W+nt)}return W}function pp(G,te){for(var W=-1,be=Array(G);++W<G;)be[W]=te(W);return be}function OI(G,te){return xt(te,function(W){return[W,G[W]]})}function bm(G){return G&&G.slice(0,_m(G)+1).replace(cu,"")}function tn(G){return function(te){return G(te)}}function gp(G,te){return xt(te,function(W){return G[W]})}function pu(G,te){return G.has(te)}function vm(G,te){for(var W=-1,be=G.length;++W<be&&Da(te,G[W],0)>-1;);return W}function Em(G,te){for(var W=G.length;W--&&Da(te,G[W],0)>-1;);return W}function CI(G,te){for(var W=G.length,be=0;W--;)G[W]===te&&++be;return be}var NI=fp(U),RI=fp(z);function TI(G){return"\\"+we[G]}function BI(G,te){return G==null?t:G[te]}function Oa(G){return fh.test(G)}function UI(G){return lo.test(G)}function FI(G){for(var te,W=[];!(te=G.next()).done;)W.push(te.value);return W}function yp(G){var te=-1,W=Array(G.size);return G.forEach(function(be,Ue){W[++te]=[Ue,be]}),W}function Am(G,te){return function(W){return G(te(W))}}function ws(G,te){for(var W=-1,be=G.length,Ue=0,nt=[];++W<be;){var Zt=G[W];(Zt===te||Zt===d)&&(G[W]=d,nt[Ue++]=W)}return nt}function yh(G){var te=-1,W=Array(G.size);return G.forEach(function(be){W[++te]=be}),W}function LI(G){var te=-1,W=Array(G.size);return G.forEach(function(be){W[++te]=[be,be]}),W}function MI(G,te,W){for(var be=W-1,Ue=G.length;++be<Ue;)if(G[be]===te)return be;return-1}function kI(G,te,W){for(var be=W+1;be--;)if(G[be]===te)return be;return be}function Ca(G){return Oa(G)?jI(G):II(G)}function kn(G){return Oa(G)?HI(G):xI(G)}function _m(G){for(var te=G.length;te--&&Ql.test(G.charAt(te)););return te}var $I=fp(ae);function jI(G){for(var te=Pa.lastIndex=0;Pa.test(G);)++te;return te}function HI(G){return G.match(Pa)||[]}function zI(G){return G.match(hh)||[]}var GI=function G(te){te=te==null?We:Na.defaults(We.Object(),te,Na.pick(We,dh));var W=te.Array,be=te.Date,Ue=te.Error,nt=te.Function,Zt=te.Math,mt=te.Object,mp=te.RegExp,qI=te.String,wn=te.TypeError,mh=W.prototype,VI=nt.prototype,Ra=mt.prototype,wh=te["__core-js_shared__"],bh=VI.toString,ct=Ra.hasOwnProperty,KI=0,Im=function(){var s=/[^.]+$/.exec(wh&&wh.keys&&wh.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),vh=Ra.toString,QI=bh.call(mt),WI=We._,JI=mp("^"+bh.call(ct).replace(au,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Eh=Mr?te.Buffer:t,bs=te.Symbol,Ah=te.Uint8Array,xm=Eh?Eh.allocUnsafe:t,_h=Am(mt.getPrototypeOf,mt),Sm=mt.create,Pm=Ra.propertyIsEnumerable,Ih=mh.splice,Dm=bs?bs.isConcatSpreadable:t,gu=bs?bs.iterator:t,fo=bs?bs.toStringTag:t,xh=function(){try{var s=wo(mt,"defineProperty");return s({},"",{}),s}catch{}}(),YI=te.clearTimeout!==We.clearTimeout&&te.clearTimeout,ZI=be&&be.now!==We.Date.now&&be.now,XI=te.setTimeout!==We.setTimeout&&te.setTimeout,Sh=Zt.ceil,Ph=Zt.floor,wp=mt.getOwnPropertySymbols,ex=Eh?Eh.isBuffer:t,Om=te.isFinite,tx=mh.join,rx=Am(mt.keys,mt),Xt=Zt.max,br=Zt.min,nx=be.now,ix=te.parseInt,Cm=Zt.random,sx=mh.reverse,bp=wo(te,"DataView"),yu=wo(te,"Map"),vp=wo(te,"Promise"),Ta=wo(te,"Set"),mu=wo(te,"WeakMap"),wu=wo(mt,"create"),Dh=mu&&new mu,Ba={},ox=bo(bp),ax=bo(yu),cx=bo(vp),ux=bo(Ta),lx=bo(mu),Oh=bs?bs.prototype:t,bu=Oh?Oh.valueOf:t,Nm=Oh?Oh.toString:t;function O(s){if(Ut(s)&&!Le(s)&&!(s instanceof Qe)){if(s instanceof bn)return s;if(ct.call(s,"__wrapped__"))return Rw(s)}return new bn(s)}var Ua=function(){function s(){}return function(a){if(!Rt(a))return{};if(Sm)return Sm(a);s.prototype=a;var h=new s;return s.prototype=t,h}}();function Ch(){}function bn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=t}O.templateSettings={escape:su,evaluate:ou,interpolate:va,variable:"",imports:{_:O}},O.prototype=Ch.prototype,O.prototype.constructor=O,bn.prototype=Ua(Ch.prototype),bn.prototype.constructor=bn;function Qe(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ue,this.__views__=[]}function hx(){var s=new Qe(this.__wrapped__);return s.__actions__=kr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=kr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=kr(this.__views__),s}function fx(){if(this.__filtered__){var s=new Qe(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function dx(){var s=this.__wrapped__.value(),a=this.__dir__,h=Le(s),y=a<0,A=h?s.length:0,N=x3(0,A,this.__views__),L=N.start,k=N.end,V=k-L,ie=y?k:L-1,se=this.__iteratees__,ce=se.length,pe=0,Ae=br(V,this.__takeCount__);if(!h||!y&&A==V&&Ae==V)return tw(s,this.__actions__);var De=[];e:for(;V--&&pe<Ae;){ie+=a;for(var ke=-1,Oe=s[ie];++ke<ce;){var Ke=se[ke],Je=Ke.iteratee,sn=Ke.type,Dr=Je(Oe);if(sn==v)Oe=Dr;else if(!Dr){if(sn==re)continue e;break e}}De[pe++]=Oe}return De}Qe.prototype=Ua(Ch.prototype),Qe.prototype.constructor=Qe;function po(s){var a=-1,h=s==null?0:s.length;for(this.clear();++a<h;){var y=s[a];this.set(y[0],y[1])}}function px(){this.__data__=wu?wu(null):{},this.size=0}function gx(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function yx(s){var a=this.__data__;if(wu){var h=a[s];return h===l?t:h}return ct.call(a,s)?a[s]:t}function mx(s){var a=this.__data__;return wu?a[s]!==t:ct.call(a,s)}function wx(s,a){var h=this.__data__;return this.size+=this.has(s)?0:1,h[s]=wu&&a===t?l:a,this}po.prototype.clear=px,po.prototype.delete=gx,po.prototype.get=yx,po.prototype.has=mx,po.prototype.set=wx;function Ri(s){var a=-1,h=s==null?0:s.length;for(this.clear();++a<h;){var y=s[a];this.set(y[0],y[1])}}function bx(){this.__data__=[],this.size=0}function vx(s){var a=this.__data__,h=Nh(a,s);if(h<0)return!1;var y=a.length-1;return h==y?a.pop():Ih.call(a,h,1),--this.size,!0}function Ex(s){var a=this.__data__,h=Nh(a,s);return h<0?t:a[h][1]}function Ax(s){return Nh(this.__data__,s)>-1}function _x(s,a){var h=this.__data__,y=Nh(h,s);return y<0?(++this.size,h.push([s,a])):h[y][1]=a,this}Ri.prototype.clear=bx,Ri.prototype.delete=vx,Ri.prototype.get=Ex,Ri.prototype.has=Ax,Ri.prototype.set=_x;function Ti(s){var a=-1,h=s==null?0:s.length;for(this.clear();++a<h;){var y=s[a];this.set(y[0],y[1])}}function Ix(){this.size=0,this.__data__={hash:new po,map:new(yu||Ri),string:new po}}function xx(s){var a=zh(this,s).delete(s);return this.size-=a?1:0,a}function Sx(s){return zh(this,s).get(s)}function Px(s){return zh(this,s).has(s)}function Dx(s,a){var h=zh(this,s),y=h.size;return h.set(s,a),this.size+=h.size==y?0:1,this}Ti.prototype.clear=Ix,Ti.prototype.delete=xx,Ti.prototype.get=Sx,Ti.prototype.has=Px,Ti.prototype.set=Dx;function go(s){var a=-1,h=s==null?0:s.length;for(this.__data__=new Ti;++a<h;)this.add(s[a])}function Ox(s){return this.__data__.set(s,l),this}function Cx(s){return this.__data__.has(s)}go.prototype.add=go.prototype.push=Ox,go.prototype.has=Cx;function $n(s){var a=this.__data__=new Ri(s);this.size=a.size}function Nx(){this.__data__=new Ri,this.size=0}function Rx(s){var a=this.__data__,h=a.delete(s);return this.size=a.size,h}function Tx(s){return this.__data__.get(s)}function Bx(s){return this.__data__.has(s)}function Ux(s,a){var h=this.__data__;if(h instanceof Ri){var y=h.__data__;if(!yu||y.length<i-1)return y.push([s,a]),this.size=++h.size,this;h=this.__data__=new Ti(y)}return h.set(s,a),this.size=h.size,this}$n.prototype.clear=Nx,$n.prototype.delete=Rx,$n.prototype.get=Tx,$n.prototype.has=Bx,$n.prototype.set=Ux;function Rm(s,a){var h=Le(s),y=!h&&vo(s),A=!h&&!y&&Is(s),N=!h&&!y&&!A&&ka(s),L=h||y||A||N,k=L?pp(s.length,qI):[],V=k.length;for(var ie in s)(a||ct.call(s,ie))&&!(L&&(ie=="length"||A&&(ie=="offset"||ie=="parent")||N&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||Li(ie,V)))&&k.push(ie);return k}function Tm(s){var a=s.length;return a?s[Np(0,a-1)]:t}function Fx(s,a){return Gh(kr(s),yo(a,0,s.length))}function Lx(s){return Gh(kr(s))}function Ep(s,a,h){(h!==t&&!jn(s[a],h)||h===t&&!(a in s))&&Bi(s,a,h)}function vu(s,a,h){var y=s[a];(!(ct.call(s,a)&&jn(y,h))||h===t&&!(a in s))&&Bi(s,a,h)}function Nh(s,a){for(var h=s.length;h--;)if(jn(s[h][0],a))return h;return-1}function Mx(s,a,h,y){return vs(s,function(A,N,L){a(y,A,h(A),L)}),y}function Bm(s,a){return s&&ai(a,ir(a),s)}function kx(s,a){return s&&ai(a,jr(a),s)}function Bi(s,a,h){a=="__proto__"&&xh?xh(s,a,{configurable:!0,enumerable:!0,value:h,writable:!0}):s[a]=h}function Ap(s,a){for(var h=-1,y=a.length,A=W(y),N=s==null;++h<y;)A[h]=N?t:rg(s,a[h]);return A}function yo(s,a,h){return s===s&&(h!==t&&(s=s<=h?s:h),a!==t&&(s=s>=a?s:a)),s}function vn(s,a,h,y,A,N){var L,k=a&g,V=a&m,ie=a&b;if(h&&(L=A?h(s,y,A,N):h(s)),L!==t)return L;if(!Rt(s))return s;var se=Le(s);if(se){if(L=P3(s),!k)return kr(s,L)}else{var ce=vr(s),pe=ce==Re||ce==Be;if(Is(s))return iw(s,k);if(ce==rr||ce==ee||pe&&!A){if(L=V||pe?{}:_w(s),!k)return V?y3(s,kx(L,s)):g3(s,Bm(L,s))}else{if(!ut[ce])return A?s:{};L=D3(s,ce,k)}}N||(N=new $n);var Ae=N.get(s);if(Ae)return Ae;N.set(s,L),Zw(s)?s.forEach(function(Oe){L.add(vn(Oe,a,h,Oe,s,N))}):Jw(s)&&s.forEach(function(Oe,Ke){L.set(Ke,vn(Oe,a,h,Ke,s,N))});var De=ie?V?Hp:jp:V?jr:ir,ke=se?t:De(s);return mn(ke||s,function(Oe,Ke){ke&&(Ke=Oe,Oe=s[Ke]),vu(L,Ke,vn(Oe,a,h,Ke,s,N))}),L}function $x(s){var a=ir(s);return function(h){return Um(h,s,a)}}function Um(s,a,h){var y=h.length;if(s==null)return!y;for(s=mt(s);y--;){var A=h[y],N=a[A],L=s[A];if(L===t&&!(A in s)||!N(L))return!1}return!0}function Fm(s,a,h){if(typeof s!="function")throw new wn(c);return Pu(function(){s.apply(t,h)},a)}function Eu(s,a,h,y){var A=-1,N=ph,L=!0,k=s.length,V=[],ie=a.length;if(!k)return V;h&&(a=xt(a,tn(h))),y?(N=cp,L=!1):a.length>=i&&(N=pu,L=!1,a=new go(a));e:for(;++A<k;){var se=s[A],ce=h==null?se:h(se);if(se=y||se!==0?se:0,L&&ce===ce){for(var pe=ie;pe--;)if(a[pe]===ce)continue e;V.push(se)}else N(a,ce,y)||V.push(se)}return V}var vs=uw(oi),Lm=uw(Ip,!0);function jx(s,a){var h=!0;return vs(s,function(y,A,N){return h=!!a(y,A,N),h}),h}function Rh(s,a,h){for(var y=-1,A=s.length;++y<A;){var N=s[y],L=a(N);if(L!=null&&(k===t?L===L&&!nn(L):h(L,k)))var k=L,V=N}return V}function Hx(s,a,h,y){var A=s.length;for(h=Me(h),h<0&&(h=-h>A?0:A+h),y=y===t||y>A?A:Me(y),y<0&&(y+=A),y=h>y?0:eb(y);h<y;)s[h++]=a;return s}function Mm(s,a){var h=[];return vs(s,function(y,A,N){a(y,A,N)&&h.push(y)}),h}function hr(s,a,h,y,A){var N=-1,L=s.length;for(h||(h=C3),A||(A=[]);++N<L;){var k=s[N];a>0&&h(k)?a>1?hr(k,a-1,h,y,A):ms(A,k):y||(A[A.length]=k)}return A}var _p=lw(),km=lw(!0);function oi(s,a){return s&&_p(s,a,ir)}function Ip(s,a){return s&&km(s,a,ir)}function Th(s,a){return ys(a,function(h){return Mi(s[h])})}function mo(s,a){a=As(a,s);for(var h=0,y=a.length;s!=null&&h<y;)s=s[ci(a[h++])];return h&&h==y?s:t}function $m(s,a,h){var y=a(s);return Le(s)?y:ms(y,h(s))}function Sr(s){return s==null?s===t?Pt:Lr:fo&&fo in mt(s)?I3(s):L3(s)}function xp(s,a){return s>a}function zx(s,a){return s!=null&&ct.call(s,a)}function Gx(s,a){return s!=null&&a in mt(s)}function qx(s,a,h){return s>=br(a,h)&&s<Xt(a,h)}function Sp(s,a,h){for(var y=h?cp:ph,A=s[0].length,N=s.length,L=N,k=W(N),V=1/0,ie=[];L--;){var se=s[L];L&&a&&(se=xt(se,tn(a))),V=br(se.length,V),k[L]=!h&&(a||A>=120&&se.length>=120)?new go(L&&se):t}se=s[0];var ce=-1,pe=k[0];e:for(;++ce<A&&ie.length<V;){var Ae=se[ce],De=a?a(Ae):Ae;if(Ae=h||Ae!==0?Ae:0,!(pe?pu(pe,De):y(ie,De,h))){for(L=N;--L;){var ke=k[L];if(!(ke?pu(ke,De):y(s[L],De,h)))continue e}pe&&pe.push(De),ie.push(Ae)}}return ie}function Vx(s,a,h,y){return oi(s,function(A,N,L){a(y,h(A),N,L)}),y}function Au(s,a,h){a=As(a,s),s=Pw(s,a);var y=s==null?s:s[ci(An(a))];return y==null?t:nr(y,s,h)}function jm(s){return Ut(s)&&Sr(s)==ee}function Kx(s){return Ut(s)&&Sr(s)==ot}function Qx(s){return Ut(s)&&Sr(s)==Ie}function _u(s,a,h,y,A){return s===a?!0:s==null||a==null||!Ut(s)&&!Ut(a)?s!==s&&a!==a:Wx(s,a,h,y,_u,A)}function Wx(s,a,h,y,A,N){var L=Le(s),k=Le(a),V=L?me:vr(s),ie=k?me:vr(a);V=V==ee?rr:V,ie=ie==ee?rr:ie;var se=V==rr,ce=ie==rr,pe=V==ie;if(pe&&Is(s)){if(!Is(a))return!1;L=!0,se=!1}if(pe&&!se)return N||(N=new $n),L||ka(s)?vw(s,a,h,y,A,N):A3(s,a,V,h,y,A,N);if(!(h&I)){var Ae=se&&ct.call(s,"__wrapped__"),De=ce&&ct.call(a,"__wrapped__");if(Ae||De){var ke=Ae?s.value():s,Oe=De?a.value():a;return N||(N=new $n),A(ke,Oe,h,y,N)}}return pe?(N||(N=new $n),_3(s,a,h,y,A,N)):!1}function Jx(s){return Ut(s)&&vr(s)==tt}function Pp(s,a,h,y){var A=h.length,N=A,L=!y;if(s==null)return!N;for(s=mt(s);A--;){var k=h[A];if(L&&k[2]?k[1]!==s[k[0]]:!(k[0]in s))return!1}for(;++A<N;){k=h[A];var V=k[0],ie=s[V],se=k[1];if(L&&k[2]){if(ie===t&&!(V in s))return!1}else{var ce=new $n;if(y)var pe=y(ie,se,V,s,a,ce);if(!(pe===t?_u(se,ie,I|x,y,ce):pe))return!1}}return!0}function Hm(s){if(!Rt(s)||R3(s))return!1;var a=Mi(s)?JI:Vd;return a.test(bo(s))}function Yx(s){return Ut(s)&&Sr(s)==ht}function Zx(s){return Ut(s)&&vr(s)==Xe}function Xx(s){return Ut(s)&&Jh(s.length)&&!!pt[Sr(s)]}function zm(s){return typeof s=="function"?s:s==null?Hr:typeof s=="object"?Le(s)?Vm(s[0],s[1]):qm(s):hb(s)}function Dp(s){if(!Su(s))return rx(s);var a=[];for(var h in mt(s))ct.call(s,h)&&h!="constructor"&&a.push(h);return a}function e3(s){if(!Rt(s))return F3(s);var a=Su(s),h=[];for(var y in s)y=="constructor"&&(a||!ct.call(s,y))||h.push(y);return h}function Op(s,a){return s<a}function Gm(s,a){var h=-1,y=$r(s)?W(s.length):[];return vs(s,function(A,N,L){y[++h]=a(A,N,L)}),y}function qm(s){var a=Gp(s);return a.length==1&&a[0][2]?xw(a[0][0],a[0][1]):function(h){return h===s||Pp(h,s,a)}}function Vm(s,a){return Vp(s)&&Iw(a)?xw(ci(s),a):function(h){var y=rg(h,s);return y===t&&y===a?ng(h,s):_u(a,y,I|x)}}function Bh(s,a,h,y,A){s!==a&&_p(a,function(N,L){if(A||(A=new $n),Rt(N))t3(s,a,L,h,Bh,y,A);else{var k=y?y(Qp(s,L),N,L+"",s,a,A):t;k===t&&(k=N),Ep(s,L,k)}},jr)}function t3(s,a,h,y,A,N,L){var k=Qp(s,h),V=Qp(a,h),ie=L.get(V);if(ie){Ep(s,h,ie);return}var se=N?N(k,V,h+"",s,a,L):t,ce=se===t;if(ce){var pe=Le(V),Ae=!pe&&Is(V),De=!pe&&!Ae&&ka(V);se=V,pe||Ae||De?Le(k)?se=k:$t(k)?se=kr(k):Ae?(ce=!1,se=iw(V,!0)):De?(ce=!1,se=sw(V,!0)):se=[]:Du(V)||vo(V)?(se=k,vo(k)?se=tb(k):(!Rt(k)||Mi(k))&&(se=_w(V))):ce=!1}ce&&(L.set(V,se),A(se,V,y,N,L),L.delete(V)),Ep(s,h,se)}function Km(s,a){var h=s.length;if(h)return a+=a<0?h:0,Li(a,h)?s[a]:t}function Qm(s,a,h){a.length?a=xt(a,function(N){return Le(N)?function(L){return mo(L,N.length===1?N[0]:N)}:N}):a=[Hr];var y=-1;a=xt(a,tn(Pe()));var A=Gm(s,function(N,L,k){var V=xt(a,function(ie){return ie(N)});return{criteria:V,index:++y,value:N}});return DI(A,function(N,L){return p3(N,L,h)})}function r3(s,a){return Wm(s,a,function(h,y){return ng(s,y)})}function Wm(s,a,h){for(var y=-1,A=a.length,N={};++y<A;){var L=a[y],k=mo(s,L);h(k,L)&&Iu(N,As(L,s),k)}return N}function n3(s){return function(a){return mo(a,s)}}function Cp(s,a,h,y){var A=y?PI:Da,N=-1,L=a.length,k=s;for(s===a&&(a=kr(a)),h&&(k=xt(s,tn(h)));++N<L;)for(var V=0,ie=a[N],se=h?h(ie):ie;(V=A(k,se,V,y))>-1;)k!==s&&Ih.call(k,V,1),Ih.call(s,V,1);return s}function Jm(s,a){for(var h=s?a.length:0,y=h-1;h--;){var A=a[h];if(h==y||A!==N){var N=A;Li(A)?Ih.call(s,A,1):Bp(s,A)}}return s}function Np(s,a){return s+Ph(Cm()*(a-s+1))}function i3(s,a,h,y){for(var A=-1,N=Xt(Sh((a-s)/(h||1)),0),L=W(N);N--;)L[y?N:++A]=s,s+=h;return L}function Rp(s,a){var h="";if(!s||a<1||a>H)return h;do a%2&&(h+=s),a=Ph(a/2),a&&(s+=s);while(a);return h}function He(s,a){return Wp(Sw(s,a,Hr),s+"")}function s3(s){return Tm($a(s))}function o3(s,a){var h=$a(s);return Gh(h,yo(a,0,h.length))}function Iu(s,a,h,y){if(!Rt(s))return s;a=As(a,s);for(var A=-1,N=a.length,L=N-1,k=s;k!=null&&++A<N;){var V=ci(a[A]),ie=h;if(V==="__proto__"||V==="constructor"||V==="prototype")return s;if(A!=L){var se=k[V];ie=y?y(se,V,k):t,ie===t&&(ie=Rt(se)?se:Li(a[A+1])?[]:{})}vu(k,V,ie),k=k[V]}return s}var Ym=Dh?function(s,a){return Dh.set(s,a),s}:Hr,a3=xh?function(s,a){return xh(s,"toString",{configurable:!0,enumerable:!1,value:sg(a),writable:!0})}:Hr;function c3(s){return Gh($a(s))}function En(s,a,h){var y=-1,A=s.length;a<0&&(a=-a>A?0:A+a),h=h>A?A:h,h<0&&(h+=A),A=a>h?0:h-a>>>0,a>>>=0;for(var N=W(A);++y<A;)N[y]=s[y+a];return N}function u3(s,a){var h;return vs(s,function(y,A,N){return h=a(y,A,N),!h}),!!h}function Uh(s,a,h){var y=0,A=s==null?y:s.length;if(typeof a=="number"&&a===a&&A<=X){for(;y<A;){var N=y+A>>>1,L=s[N];L!==null&&!nn(L)&&(h?L<=a:L<a)?y=N+1:A=N}return A}return Tp(s,a,Hr,h)}function Tp(s,a,h,y){var A=0,N=s==null?0:s.length;if(N===0)return 0;a=h(a);for(var L=a!==a,k=a===null,V=nn(a),ie=a===t;A<N;){var se=Ph((A+N)/2),ce=h(s[se]),pe=ce!==t,Ae=ce===null,De=ce===ce,ke=nn(ce);if(L)var Oe=y||De;else ie?Oe=De&&(y||pe):k?Oe=De&&pe&&(y||!Ae):V?Oe=De&&pe&&!Ae&&(y||!ke):Ae||ke?Oe=!1:Oe=y?ce<=a:ce<a;Oe?A=se+1:N=se}return br(N,he)}function Zm(s,a){for(var h=-1,y=s.length,A=0,N=[];++h<y;){var L=s[h],k=a?a(L):L;if(!h||!jn(k,V)){var V=k;N[A++]=L===0?0:L}}return N}function Xm(s){return typeof s=="number"?s:nn(s)?K:+s}function rn(s){if(typeof s=="string")return s;if(Le(s))return xt(s,rn)+"";if(nn(s))return Nm?Nm.call(s):"";var a=s+"";return a=="0"&&1/s==-T?"-0":a}function Es(s,a,h){var y=-1,A=ph,N=s.length,L=!0,k=[],V=k;if(h)L=!1,A=cp;else if(N>=i){var ie=a?null:v3(s);if(ie)return yh(ie);L=!1,A=pu,V=new go}else V=a?[]:k;e:for(;++y<N;){var se=s[y],ce=a?a(se):se;if(se=h||se!==0?se:0,L&&ce===ce){for(var pe=V.length;pe--;)if(V[pe]===ce)continue e;a&&V.push(ce),k.push(se)}else A(V,ce,h)||(V!==k&&V.push(ce),k.push(se))}return k}function Bp(s,a){return a=As(a,s),s=Pw(s,a),s==null||delete s[ci(An(a))]}function ew(s,a,h,y){return Iu(s,a,h(mo(s,a)),y)}function Fh(s,a,h,y){for(var A=s.length,N=y?A:-1;(y?N--:++N<A)&&a(s[N],N,s););return h?En(s,y?0:N,y?N+1:A):En(s,y?N+1:0,y?A:N)}function tw(s,a){var h=s;return h instanceof Qe&&(h=h.value()),up(a,function(y,A){return A.func.apply(A.thisArg,ms([y],A.args))},h)}function Up(s,a,h){var y=s.length;if(y<2)return y?Es(s[0]):[];for(var A=-1,N=W(y);++A<y;)for(var L=s[A],k=-1;++k<y;)k!=A&&(N[A]=Eu(N[A]||L,s[k],a,h));return Es(hr(N,1),a,h)}function rw(s,a,h){for(var y=-1,A=s.length,N=a.length,L={};++y<A;){var k=y<N?a[y]:t;h(L,s[y],k)}return L}function Fp(s){return $t(s)?s:[]}function Lp(s){return typeof s=="function"?s:Hr}function As(s,a){return Le(s)?s:Vp(s,a)?[s]:Nw(it(s))}var l3=He;function _s(s,a,h){var y=s.length;return h=h===t?y:h,!a&&h>=y?s:En(s,a,h)}var nw=YI||function(s){return We.clearTimeout(s)};function iw(s,a){if(a)return s.slice();var h=s.length,y=xm?xm(h):new s.constructor(h);return s.copy(y),y}function Mp(s){var a=new s.constructor(s.byteLength);return new Ah(a).set(new Ah(s)),a}function h3(s,a){var h=a?Mp(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.byteLength)}function f3(s){var a=new s.constructor(s.source,gn.exec(s));return a.lastIndex=s.lastIndex,a}function d3(s){return bu?mt(bu.call(s)):{}}function sw(s,a){var h=a?Mp(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.length)}function ow(s,a){if(s!==a){var h=s!==t,y=s===null,A=s===s,N=nn(s),L=a!==t,k=a===null,V=a===a,ie=nn(a);if(!k&&!ie&&!N&&s>a||N&&L&&V&&!k&&!ie||y&&L&&V||!h&&V||!A)return 1;if(!y&&!N&&!ie&&s<a||ie&&h&&A&&!y&&!N||k&&h&&A||!L&&A||!V)return-1}return 0}function p3(s,a,h){for(var y=-1,A=s.criteria,N=a.criteria,L=A.length,k=h.length;++y<L;){var V=ow(A[y],N[y]);if(V){if(y>=k)return V;var ie=h[y];return V*(ie=="desc"?-1:1)}}return s.index-a.index}function aw(s,a,h,y){for(var A=-1,N=s.length,L=h.length,k=-1,V=a.length,ie=Xt(N-L,0),se=W(V+ie),ce=!y;++k<V;)se[k]=a[k];for(;++A<L;)(ce||A<N)&&(se[h[A]]=s[A]);for(;ie--;)se[k++]=s[A++];return se}function cw(s,a,h,y){for(var A=-1,N=s.length,L=-1,k=h.length,V=-1,ie=a.length,se=Xt(N-k,0),ce=W(se+ie),pe=!y;++A<se;)ce[A]=s[A];for(var Ae=A;++V<ie;)ce[Ae+V]=a[V];for(;++L<k;)(pe||A<N)&&(ce[Ae+h[L]]=s[A++]);return ce}function kr(s,a){var h=-1,y=s.length;for(a||(a=W(y));++h<y;)a[h]=s[h];return a}function ai(s,a,h,y){var A=!h;h||(h={});for(var N=-1,L=a.length;++N<L;){var k=a[N],V=y?y(h[k],s[k],k,h,s):t;V===t&&(V=s[k]),A?Bi(h,k,V):vu(h,k,V)}return h}function g3(s,a){return ai(s,qp(s),a)}function y3(s,a){return ai(s,Ew(s),a)}function Lh(s,a){return function(h,y){var A=Le(h)?EI:Mx,N=a?a():{};return A(h,s,Pe(y,2),N)}}function Fa(s){return He(function(a,h){var y=-1,A=h.length,N=A>1?h[A-1]:t,L=A>2?h[2]:t;for(N=s.length>3&&typeof N=="function"?(A--,N):t,L&&Pr(h[0],h[1],L)&&(N=A<3?t:N,A=1),a=mt(a);++y<A;){var k=h[y];k&&s(a,k,y,N)}return a})}function uw(s,a){return function(h,y){if(h==null)return h;if(!$r(h))return s(h,y);for(var A=h.length,N=a?A:-1,L=mt(h);(a?N--:++N<A)&&y(L[N],N,L)!==!1;);return h}}function lw(s){return function(a,h,y){for(var A=-1,N=mt(a),L=y(a),k=L.length;k--;){var V=L[s?k:++A];if(h(N[V],V,N)===!1)break}return a}}function m3(s,a,h){var y=a&B,A=xu(s);function N(){var L=this&&this!==We&&this instanceof N?A:s;return L.apply(y?h:this,arguments)}return N}function hw(s){return function(a){a=it(a);var h=Oa(a)?kn(a):t,y=h?h[0]:a.charAt(0),A=h?_s(h,1).join(""):a.slice(1);return y[s]()+A}}function La(s){return function(a){return up(ub(cb(a).replace(fu,"")),s,"")}}function xu(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var h=Ua(s.prototype),y=s.apply(h,a);return Rt(y)?y:h}}function w3(s,a,h){var y=xu(s);function A(){for(var N=arguments.length,L=W(N),k=N,V=Ma(A);k--;)L[k]=arguments[k];var ie=N<3&&L[0]!==V&&L[N-1]!==V?[]:ws(L,V);if(N-=ie.length,N<h)return yw(s,a,Mh,A.placeholder,t,L,ie,t,t,h-N);var se=this&&this!==We&&this instanceof A?y:s;return nr(se,this,L)}return A}function fw(s){return function(a,h,y){var A=mt(a);if(!$r(a)){var N=Pe(h,3);a=ir(a),h=function(k){return N(A[k],k,A)}}var L=s(a,h,y);return L>-1?A[N?a[L]:L]:t}}function dw(s){return Fi(function(a){var h=a.length,y=h,A=bn.prototype.thru;for(s&&a.reverse();y--;){var N=a[y];if(typeof N!="function")throw new wn(c);if(A&&!L&&Hh(N)=="wrapper")var L=new bn([],!0)}for(y=L?y:h;++y<h;){N=a[y];var k=Hh(N),V=k=="wrapper"?zp(N):t;V&&Kp(V[0])&&V[1]==(p|C|D|_)&&!V[4].length&&V[9]==1?L=L[Hh(V[0])].apply(L,V[3]):L=N.length==1&&Kp(N)?L[k]():L.thru(N)}return function(){var ie=arguments,se=ie[0];if(L&&ie.length==1&&Le(se))return L.plant(se).value();for(var ce=0,pe=h?a[ce].apply(this,ie):se;++ce<h;)pe=a[ce].call(this,pe);return pe}})}function Mh(s,a,h,y,A,N,L,k,V,ie){var se=a&p,ce=a&B,pe=a&M,Ae=a&(C|S),De=a&$,ke=pe?t:xu(s);function Oe(){for(var Ke=arguments.length,Je=W(Ke),sn=Ke;sn--;)Je[sn]=arguments[sn];if(Ae)var Dr=Ma(Oe),on=CI(Je,Dr);if(y&&(Je=aw(Je,y,A,Ae)),N&&(Je=cw(Je,N,L,Ae)),Ke-=on,Ae&&Ke<ie){var jt=ws(Je,Dr);return yw(s,a,Mh,Oe.placeholder,h,Je,jt,k,V,ie-Ke)}var Hn=ce?h:this,$i=pe?Hn[s]:s;return Ke=Je.length,k?Je=M3(Je,k):De&&Ke>1&&Je.reverse(),se&&V<Ke&&(Je.length=V),this&&this!==We&&this instanceof Oe&&($i=ke||xu($i)),$i.apply(Hn,Je)}return Oe}function pw(s,a){return function(h,y){return Vx(h,s,a(y),{})}}function kh(s,a){return function(h,y){var A;if(h===t&&y===t)return a;if(h!==t&&(A=h),y!==t){if(A===t)return y;typeof h=="string"||typeof y=="string"?(h=rn(h),y=rn(y)):(h=Xm(h),y=Xm(y)),A=s(h,y)}return A}}function kp(s){return Fi(function(a){return a=xt(a,tn(Pe())),He(function(h){var y=this;return s(a,function(A){return nr(A,y,h)})})})}function $h(s,a){a=a===t?" ":rn(a);var h=a.length;if(h<2)return h?Rp(a,s):a;var y=Rp(a,Sh(s/Ca(a)));return Oa(a)?_s(kn(y),0,s).join(""):y.slice(0,s)}function b3(s,a,h,y){var A=a&B,N=xu(s);function L(){for(var k=-1,V=arguments.length,ie=-1,se=y.length,ce=W(se+V),pe=this&&this!==We&&this instanceof L?N:s;++ie<se;)ce[ie]=y[ie];for(;V--;)ce[ie++]=arguments[++k];return nr(pe,A?h:this,ce)}return L}function gw(s){return function(a,h,y){return y&&typeof y!="number"&&Pr(a,h,y)&&(h=y=t),a=ki(a),h===t?(h=a,a=0):h=ki(h),y=y===t?a<h?1:-1:ki(y),i3(a,h,y,s)}}function jh(s){return function(a,h){return typeof a=="string"&&typeof h=="string"||(a=_n(a),h=_n(h)),s(a,h)}}function yw(s,a,h,y,A,N,L,k,V,ie){var se=a&C,ce=se?L:t,pe=se?t:L,Ae=se?N:t,De=se?t:N;a|=se?D:E,a&=~(se?E:D),a&R||(a&=-4);var ke=[s,a,A,Ae,ce,De,pe,k,V,ie],Oe=h.apply(t,ke);return Kp(s)&&Dw(Oe,ke),Oe.placeholder=y,Ow(Oe,s,a)}function $p(s){var a=Zt[s];return function(h,y){if(h=_n(h),y=y==null?0:br(Me(y),292),y&&Om(h)){var A=(it(h)+"e").split("e"),N=a(A[0]+"e"+(+A[1]+y));return A=(it(N)+"e").split("e"),+(A[0]+"e"+(+A[1]-y))}return a(h)}}var v3=Ta&&1/yh(new Ta([,-0]))[1]==T?function(s){return new Ta(s)}:cg;function mw(s){return function(a){var h=vr(a);return h==tt?yp(a):h==Xe?LI(a):OI(a,s(a))}}function Ui(s,a,h,y,A,N,L,k){var V=a&M;if(!V&&typeof s!="function")throw new wn(c);var ie=y?y.length:0;if(ie||(a&=-97,y=A=t),L=L===t?L:Xt(Me(L),0),k=k===t?k:Me(k),ie-=A?A.length:0,a&E){var se=y,ce=A;y=A=t}var pe=V?t:zp(s),Ae=[s,a,h,y,A,se,ce,N,L,k];if(pe&&U3(Ae,pe),s=Ae[0],a=Ae[1],h=Ae[2],y=Ae[3],A=Ae[4],k=Ae[9]=Ae[9]===t?V?0:s.length:Xt(Ae[9]-ie,0),!k&&a&(C|S)&&(a&=-25),!a||a==B)var De=m3(s,a,h);else a==C||a==S?De=w3(s,a,k):(a==D||a==(B|D))&&!A.length?De=b3(s,a,h,y):De=Mh.apply(t,Ae);var ke=pe?Ym:Dw;return Ow(ke(De,Ae),s,a)}function ww(s,a,h,y){return s===t||jn(s,Ra[h])&&!ct.call(y,h)?a:s}function bw(s,a,h,y,A,N){return Rt(s)&&Rt(a)&&(N.set(a,s),Bh(s,a,t,bw,N),N.delete(a)),s}function E3(s){return Du(s)?t:s}function vw(s,a,h,y,A,N){var L=h&I,k=s.length,V=a.length;if(k!=V&&!(L&&V>k))return!1;var ie=N.get(s),se=N.get(a);if(ie&&se)return ie==a&&se==s;var ce=-1,pe=!0,Ae=h&x?new go:t;for(N.set(s,a),N.set(a,s);++ce<k;){var De=s[ce],ke=a[ce];if(y)var Oe=L?y(ke,De,ce,a,s,N):y(De,ke,ce,s,a,N);if(Oe!==t){if(Oe)continue;pe=!1;break}if(Ae){if(!lp(a,function(Ke,Je){if(!pu(Ae,Je)&&(De===Ke||A(De,Ke,h,y,N)))return Ae.push(Je)})){pe=!1;break}}else if(!(De===ke||A(De,ke,h,y,N))){pe=!1;break}}return N.delete(s),N.delete(a),pe}function A3(s,a,h,y,A,N,L){switch(h){case at:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case ot:return!(s.byteLength!=a.byteLength||!N(new Ah(s),new Ah(a)));case _e:case Ie:case Yt:return jn(+s,+a);case Te:return s.name==a.name&&s.message==a.message;case ht:case ft:return s==a+"";case tt:var k=yp;case Xe:var V=y&I;if(k||(k=yh),s.size!=a.size&&!V)return!1;var ie=L.get(s);if(ie)return ie==a;y|=x,L.set(s,a);var se=vw(k(s),k(a),y,A,N,L);return L.delete(s),se;case bt:if(bu)return bu.call(s)==bu.call(a)}return!1}function _3(s,a,h,y,A,N){var L=h&I,k=jp(s),V=k.length,ie=jp(a),se=ie.length;if(V!=se&&!L)return!1;for(var ce=V;ce--;){var pe=k[ce];if(!(L?pe in a:ct.call(a,pe)))return!1}var Ae=N.get(s),De=N.get(a);if(Ae&&De)return Ae==a&&De==s;var ke=!0;N.set(s,a),N.set(a,s);for(var Oe=L;++ce<V;){pe=k[ce];var Ke=s[pe],Je=a[pe];if(y)var sn=L?y(Je,Ke,pe,a,s,N):y(Ke,Je,pe,s,a,N);if(!(sn===t?Ke===Je||A(Ke,Je,h,y,N):sn)){ke=!1;break}Oe||(Oe=pe=="constructor")}if(ke&&!Oe){var Dr=s.constructor,on=a.constructor;Dr!=on&&"constructor"in s&&"constructor"in a&&!(typeof Dr=="function"&&Dr instanceof Dr&&typeof on=="function"&&on instanceof on)&&(ke=!1)}return N.delete(s),N.delete(a),ke}function Fi(s){return Wp(Sw(s,t,Uw),s+"")}function jp(s){return $m(s,ir,qp)}function Hp(s){return $m(s,jr,Ew)}var zp=Dh?function(s){return Dh.get(s)}:cg;function Hh(s){for(var a=s.name+"",h=Ba[a],y=ct.call(Ba,a)?h.length:0;y--;){var A=h[y],N=A.func;if(N==null||N==s)return A.name}return a}function Ma(s){var a=ct.call(O,"placeholder")?O:s;return a.placeholder}function Pe(){var s=O.iteratee||og;return s=s===og?zm:s,arguments.length?s(arguments[0],arguments[1]):s}function zh(s,a){var h=s.__data__;return N3(a)?h[typeof a=="string"?"string":"hash"]:h.map}function Gp(s){for(var a=ir(s),h=a.length;h--;){var y=a[h],A=s[y];a[h]=[y,A,Iw(A)]}return a}function wo(s,a){var h=BI(s,a);return Hm(h)?h:t}function I3(s){var a=ct.call(s,fo),h=s[fo];try{s[fo]=t;var y=!0}catch{}var A=vh.call(s);return y&&(a?s[fo]=h:delete s[fo]),A}var qp=wp?function(s){return s==null?[]:(s=mt(s),ys(wp(s),function(a){return Pm.call(s,a)}))}:ug,Ew=wp?function(s){for(var a=[];s;)ms(a,qp(s)),s=_h(s);return a}:ug,vr=Sr;(bp&&vr(new bp(new ArrayBuffer(1)))!=at||yu&&vr(new yu)!=tt||vp&&vr(vp.resolve())!=ni||Ta&&vr(new Ta)!=Xe||mu&&vr(new mu)!=dt)&&(vr=function(s){var a=Sr(s),h=a==rr?s.constructor:t,y=h?bo(h):"";if(y)switch(y){case ox:return at;case ax:return tt;case cx:return ni;case ux:return Xe;case lx:return dt}return a});function x3(s,a,h){for(var y=-1,A=h.length;++y<A;){var N=h[y],L=N.size;switch(N.type){case"drop":s+=L;break;case"dropRight":a-=L;break;case"take":a=br(a,s+L);break;case"takeRight":s=Xt(s,a-L);break}}return{start:s,end:a}}function S3(s){var a=s.match(Oi);return a?a[1].split(kd):[]}function Aw(s,a,h){a=As(a,s);for(var y=-1,A=a.length,N=!1;++y<A;){var L=ci(a[y]);if(!(N=s!=null&&h(s,L)))break;s=s[L]}return N||++y!=A?N:(A=s==null?0:s.length,!!A&&Jh(A)&&Li(L,A)&&(Le(s)||vo(s)))}function P3(s){var a=s.length,h=new s.constructor(a);return a&&typeof s[0]=="string"&&ct.call(s,"index")&&(h.index=s.index,h.input=s.input),h}function _w(s){return typeof s.constructor=="function"&&!Su(s)?Ua(_h(s)):{}}function D3(s,a,h){var y=s.constructor;switch(a){case ot:return Mp(s);case _e:case Ie:return new y(+s);case at:return h3(s,h);case Et:case et:case Ot:case Ct:case Bt:case Nt:case At:case wa:case ba:return sw(s,h);case tt:return new y;case Yt:case ft:return new y(s);case ht:return f3(s);case Xe:return new y;case bt:return d3(s)}}function O3(s,a){var h=a.length;if(!h)return s;var y=h-1;return a[y]=(h>1?"& ":"")+a[y],a=a.join(h>2?", ":" "),s.replace(uu,`{
/* [wrapped with `+a+`] */
`)}function C3(s){return Le(s)||vo(s)||!!(Dm&&s&&s[Dm])}function Li(s,a){var h=typeof s;return a=a??H,!!a&&(h=="number"||h!="symbol"&&Qd.test(s))&&s>-1&&s%1==0&&s<a}function Pr(s,a,h){if(!Rt(h))return!1;var y=typeof a;return(y=="number"?$r(h)&&Li(a,h.length):y=="string"&&a in h)?jn(h[a],s):!1}function Vp(s,a){if(Le(s))return!1;var h=typeof s;return h=="number"||h=="symbol"||h=="boolean"||s==null||nn(s)?!0:Fd.test(s)||!oo.test(s)||a!=null&&s in mt(a)}function N3(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function Kp(s){var a=Hh(s),h=O[a];if(typeof h!="function"||!(a in Qe.prototype))return!1;if(s===h)return!0;var y=zp(h);return!!y&&s===y[0]}function R3(s){return!!Im&&Im in s}var T3=wh?Mi:lg;function Su(s){var a=s&&s.constructor,h=typeof a=="function"&&a.prototype||Ra;return s===h}function Iw(s){return s===s&&!Rt(s)}function xw(s,a){return function(h){return h==null?!1:h[s]===a&&(a!==t||s in mt(h))}}function B3(s){var a=Qh(s,function(y){return h.size===f&&h.clear(),y}),h=a.cache;return a}function U3(s,a){var h=s[1],y=a[1],A=h|y,N=A<(B|M|p),L=y==p&&h==C||y==p&&h==_&&s[7].length<=a[8]||y==(p|_)&&a[7].length<=a[8]&&h==C;if(!(N||L))return s;y&B&&(s[2]=a[2],A|=h&B?0:R);var k=a[3];if(k){var V=s[3];s[3]=V?aw(V,k,a[4]):k,s[4]=V?ws(s[3],d):a[4]}return k=a[5],k&&(V=s[5],s[5]=V?cw(V,k,a[6]):k,s[6]=V?ws(s[5],d):a[6]),k=a[7],k&&(s[7]=k),y&p&&(s[8]=s[8]==null?a[8]:br(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=A,s}function F3(s){var a=[];if(s!=null)for(var h in mt(s))a.push(h);return a}function L3(s){return vh.call(s)}function Sw(s,a,h){return a=Xt(a===t?s.length-1:a,0),function(){for(var y=arguments,A=-1,N=Xt(y.length-a,0),L=W(N);++A<N;)L[A]=y[a+A];A=-1;for(var k=W(a+1);++A<a;)k[A]=y[A];return k[a]=h(L),nr(s,this,k)}}function Pw(s,a){return a.length<2?s:mo(s,En(a,0,-1))}function M3(s,a){for(var h=s.length,y=br(a.length,h),A=kr(s);y--;){var N=a[y];s[y]=Li(N,h)?A[N]:t}return s}function Qp(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var Dw=Cw(Ym),Pu=XI||function(s,a){return We.setTimeout(s,a)},Wp=Cw(a3);function Ow(s,a,h){var y=a+"";return Wp(s,O3(y,k3(S3(y),h)))}function Cw(s){var a=0,h=0;return function(){var y=nx(),A=fe-(y-h);if(h=y,A>0){if(++a>=oe)return arguments[0]}else a=0;return s.apply(t,arguments)}}function Gh(s,a){var h=-1,y=s.length,A=y-1;for(a=a===t?y:a;++h<a;){var N=Np(h,A),L=s[N];s[N]=s[h],s[h]=L}return s.length=a,s}var Nw=B3(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Ld,function(h,y,A,N){a.push(A?N.replace(Hd,"$1"):y||h)}),a});function ci(s){if(typeof s=="string"||nn(s))return s;var a=s+"";return a=="0"&&1/s==-T?"-0":a}function bo(s){if(s!=null){try{return bh.call(s)}catch{}try{return s+""}catch{}}return""}function k3(s,a){return mn(ne,function(h){var y="_."+h[0];a&h[1]&&!ph(s,y)&&s.push(y)}),s.sort()}function Rw(s){if(s instanceof Qe)return s.clone();var a=new bn(s.__wrapped__,s.__chain__);return a.__actions__=kr(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function $3(s,a,h){(h?Pr(s,a,h):a===t)?a=1:a=Xt(Me(a),0);var y=s==null?0:s.length;if(!y||a<1)return[];for(var A=0,N=0,L=W(Sh(y/a));A<y;)L[N++]=En(s,A,A+=a);return L}function j3(s){for(var a=-1,h=s==null?0:s.length,y=0,A=[];++a<h;){var N=s[a];N&&(A[y++]=N)}return A}function H3(){var s=arguments.length;if(!s)return[];for(var a=W(s-1),h=arguments[0],y=s;y--;)a[y-1]=arguments[y];return ms(Le(h)?kr(h):[h],hr(a,1))}var z3=He(function(s,a){return $t(s)?Eu(s,hr(a,1,$t,!0)):[]}),G3=He(function(s,a){var h=An(a);return $t(h)&&(h=t),$t(s)?Eu(s,hr(a,1,$t,!0),Pe(h,2)):[]}),q3=He(function(s,a){var h=An(a);return $t(h)&&(h=t),$t(s)?Eu(s,hr(a,1,$t,!0),t,h):[]});function V3(s,a,h){var y=s==null?0:s.length;return y?(a=h||a===t?1:Me(a),En(s,a<0?0:a,y)):[]}function K3(s,a,h){var y=s==null?0:s.length;return y?(a=h||a===t?1:Me(a),a=y-a,En(s,0,a<0?0:a)):[]}function Q3(s,a){return s&&s.length?Fh(s,Pe(a,3),!0,!0):[]}function W3(s,a){return s&&s.length?Fh(s,Pe(a,3),!0):[]}function J3(s,a,h,y){var A=s==null?0:s.length;return A?(h&&typeof h!="number"&&Pr(s,a,h)&&(h=0,y=A),Hx(s,a,h,y)):[]}function Tw(s,a,h){var y=s==null?0:s.length;if(!y)return-1;var A=h==null?0:Me(h);return A<0&&(A=Xt(y+A,0)),gh(s,Pe(a,3),A)}function Bw(s,a,h){var y=s==null?0:s.length;if(!y)return-1;var A=y-1;return h!==t&&(A=Me(h),A=h<0?Xt(y+A,0):br(A,y-1)),gh(s,Pe(a,3),A,!0)}function Uw(s){var a=s==null?0:s.length;return a?hr(s,1):[]}function Y3(s){var a=s==null?0:s.length;return a?hr(s,T):[]}function Z3(s,a){var h=s==null?0:s.length;return h?(a=a===t?1:Me(a),hr(s,a)):[]}function X3(s){for(var a=-1,h=s==null?0:s.length,y={};++a<h;){var A=s[a];y[A[0]]=A[1]}return y}function Fw(s){return s&&s.length?s[0]:t}function eS(s,a,h){var y=s==null?0:s.length;if(!y)return-1;var A=h==null?0:Me(h);return A<0&&(A=Xt(y+A,0)),Da(s,a,A)}function tS(s){var a=s==null?0:s.length;return a?En(s,0,-1):[]}var rS=He(function(s){var a=xt(s,Fp);return a.length&&a[0]===s[0]?Sp(a):[]}),nS=He(function(s){var a=An(s),h=xt(s,Fp);return a===An(h)?a=t:h.pop(),h.length&&h[0]===s[0]?Sp(h,Pe(a,2)):[]}),iS=He(function(s){var a=An(s),h=xt(s,Fp);return a=typeof a=="function"?a:t,a&&h.pop(),h.length&&h[0]===s[0]?Sp(h,t,a):[]});function sS(s,a){return s==null?"":tx.call(s,a)}function An(s){var a=s==null?0:s.length;return a?s[a-1]:t}function oS(s,a,h){var y=s==null?0:s.length;if(!y)return-1;var A=y;return h!==t&&(A=Me(h),A=A<0?Xt(y+A,0):br(A,y-1)),a===a?kI(s,a,A):gh(s,ym,A,!0)}function aS(s,a){return s&&s.length?Km(s,Me(a)):t}var cS=He(Lw);function Lw(s,a){return s&&s.length&&a&&a.length?Cp(s,a):s}function uS(s,a,h){return s&&s.length&&a&&a.length?Cp(s,a,Pe(h,2)):s}function lS(s,a,h){return s&&s.length&&a&&a.length?Cp(s,a,t,h):s}var hS=Fi(function(s,a){var h=s==null?0:s.length,y=Ap(s,a);return Jm(s,xt(a,function(A){return Li(A,h)?+A:A}).sort(ow)),y});function fS(s,a){var h=[];if(!(s&&s.length))return h;var y=-1,A=[],N=s.length;for(a=Pe(a,3);++y<N;){var L=s[y];a(L,y,s)&&(h.push(L),A.push(y))}return Jm(s,A),h}function Jp(s){return s==null?s:sx.call(s)}function dS(s,a,h){var y=s==null?0:s.length;return y?(h&&typeof h!="number"&&Pr(s,a,h)?(a=0,h=y):(a=a==null?0:Me(a),h=h===t?y:Me(h)),En(s,a,h)):[]}function pS(s,a){return Uh(s,a)}function gS(s,a,h){return Tp(s,a,Pe(h,2))}function yS(s,a){var h=s==null?0:s.length;if(h){var y=Uh(s,a);if(y<h&&jn(s[y],a))return y}return-1}function mS(s,a){return Uh(s,a,!0)}function wS(s,a,h){return Tp(s,a,Pe(h,2),!0)}function bS(s,a){var h=s==null?0:s.length;if(h){var y=Uh(s,a,!0)-1;if(jn(s[y],a))return y}return-1}function vS(s){return s&&s.length?Zm(s):[]}function ES(s,a){return s&&s.length?Zm(s,Pe(a,2)):[]}function AS(s){var a=s==null?0:s.length;return a?En(s,1,a):[]}function _S(s,a,h){return s&&s.length?(a=h||a===t?1:Me(a),En(s,0,a<0?0:a)):[]}function IS(s,a,h){var y=s==null?0:s.length;return y?(a=h||a===t?1:Me(a),a=y-a,En(s,a<0?0:a,y)):[]}function xS(s,a){return s&&s.length?Fh(s,Pe(a,3),!1,!0):[]}function SS(s,a){return s&&s.length?Fh(s,Pe(a,3)):[]}var PS=He(function(s){return Es(hr(s,1,$t,!0))}),DS=He(function(s){var a=An(s);return $t(a)&&(a=t),Es(hr(s,1,$t,!0),Pe(a,2))}),OS=He(function(s){var a=An(s);return a=typeof a=="function"?a:t,Es(hr(s,1,$t,!0),t,a)});function CS(s){return s&&s.length?Es(s):[]}function NS(s,a){return s&&s.length?Es(s,Pe(a,2)):[]}function RS(s,a){return a=typeof a=="function"?a:t,s&&s.length?Es(s,t,a):[]}function Yp(s){if(!(s&&s.length))return[];var a=0;return s=ys(s,function(h){if($t(h))return a=Xt(h.length,a),!0}),pp(a,function(h){return xt(s,hp(h))})}function Mw(s,a){if(!(s&&s.length))return[];var h=Yp(s);return a==null?h:xt(h,function(y){return nr(a,t,y)})}var TS=He(function(s,a){return $t(s)?Eu(s,a):[]}),BS=He(function(s){return Up(ys(s,$t))}),US=He(function(s){var a=An(s);return $t(a)&&(a=t),Up(ys(s,$t),Pe(a,2))}),FS=He(function(s){var a=An(s);return a=typeof a=="function"?a:t,Up(ys(s,$t),t,a)}),LS=He(Yp);function MS(s,a){return rw(s||[],a||[],vu)}function kS(s,a){return rw(s||[],a||[],Iu)}var $S=He(function(s){var a=s.length,h=a>1?s[a-1]:t;return h=typeof h=="function"?(s.pop(),h):t,Mw(s,h)});function kw(s){var a=O(s);return a.__chain__=!0,a}function jS(s,a){return a(s),s}function qh(s,a){return a(s)}var HS=Fi(function(s){var a=s.length,h=a?s[0]:0,y=this.__wrapped__,A=function(N){return Ap(N,s)};return a>1||this.__actions__.length||!(y instanceof Qe)||!Li(h)?this.thru(A):(y=y.slice(h,+h+(a?1:0)),y.__actions__.push({func:qh,args:[A],thisArg:t}),new bn(y,this.__chain__).thru(function(N){return a&&!N.length&&N.push(t),N}))});function zS(){return kw(this)}function GS(){return new bn(this.value(),this.__chain__)}function qS(){this.__values__===t&&(this.__values__=Xw(this.value()));var s=this.__index__>=this.__values__.length,a=s?t:this.__values__[this.__index__++];return{done:s,value:a}}function VS(){return this}function KS(s){for(var a,h=this;h instanceof Ch;){var y=Rw(h);y.__index__=0,y.__values__=t,a?A.__wrapped__=y:a=y;var A=y;h=h.__wrapped__}return A.__wrapped__=s,a}function QS(){var s=this.__wrapped__;if(s instanceof Qe){var a=s;return this.__actions__.length&&(a=new Qe(this)),a=a.reverse(),a.__actions__.push({func:qh,args:[Jp],thisArg:t}),new bn(a,this.__chain__)}return this.thru(Jp)}function WS(){return tw(this.__wrapped__,this.__actions__)}var JS=Lh(function(s,a,h){ct.call(s,h)?++s[h]:Bi(s,h,1)});function YS(s,a,h){var y=Le(s)?pm:jx;return h&&Pr(s,a,h)&&(a=t),y(s,Pe(a,3))}function ZS(s,a){var h=Le(s)?ys:Mm;return h(s,Pe(a,3))}var XS=fw(Tw),eP=fw(Bw);function tP(s,a){return hr(Vh(s,a),1)}function rP(s,a){return hr(Vh(s,a),T)}function nP(s,a,h){return h=h===t?1:Me(h),hr(Vh(s,a),h)}function $w(s,a){var h=Le(s)?mn:vs;return h(s,Pe(a,3))}function jw(s,a){var h=Le(s)?AI:Lm;return h(s,Pe(a,3))}var iP=Lh(function(s,a,h){ct.call(s,h)?s[h].push(a):Bi(s,h,[a])});function sP(s,a,h,y){s=$r(s)?s:$a(s),h=h&&!y?Me(h):0;var A=s.length;return h<0&&(h=Xt(A+h,0)),Yh(s)?h<=A&&s.indexOf(a,h)>-1:!!A&&Da(s,a,h)>-1}var oP=He(function(s,a,h){var y=-1,A=typeof a=="function",N=$r(s)?W(s.length):[];return vs(s,function(L){N[++y]=A?nr(a,L,h):Au(L,a,h)}),N}),aP=Lh(function(s,a,h){Bi(s,h,a)});function Vh(s,a){var h=Le(s)?xt:Gm;return h(s,Pe(a,3))}function cP(s,a,h,y){return s==null?[]:(Le(a)||(a=a==null?[]:[a]),h=y?t:h,Le(h)||(h=h==null?[]:[h]),Qm(s,a,h))}var uP=Lh(function(s,a,h){s[h?0:1].push(a)},function(){return[[],[]]});function lP(s,a,h){var y=Le(s)?up:wm,A=arguments.length<3;return y(s,Pe(a,4),h,A,vs)}function hP(s,a,h){var y=Le(s)?_I:wm,A=arguments.length<3;return y(s,Pe(a,4),h,A,Lm)}function fP(s,a){var h=Le(s)?ys:Mm;return h(s,Wh(Pe(a,3)))}function dP(s){var a=Le(s)?Tm:s3;return a(s)}function pP(s,a,h){(h?Pr(s,a,h):a===t)?a=1:a=Me(a);var y=Le(s)?Fx:o3;return y(s,a)}function gP(s){var a=Le(s)?Lx:c3;return a(s)}function yP(s){if(s==null)return 0;if($r(s))return Yh(s)?Ca(s):s.length;var a=vr(s);return a==tt||a==Xe?s.size:Dp(s).length}function mP(s,a,h){var y=Le(s)?lp:u3;return h&&Pr(s,a,h)&&(a=t),y(s,Pe(a,3))}var wP=He(function(s,a){if(s==null)return[];var h=a.length;return h>1&&Pr(s,a[0],a[1])?a=[]:h>2&&Pr(a[0],a[1],a[2])&&(a=[a[0]]),Qm(s,hr(a,1),[])}),Kh=ZI||function(){return We.Date.now()};function bP(s,a){if(typeof a!="function")throw new wn(c);return s=Me(s),function(){if(--s<1)return a.apply(this,arguments)}}function Hw(s,a,h){return a=h?t:a,a=s&&a==null?s.length:a,Ui(s,p,t,t,t,t,a)}function zw(s,a){var h;if(typeof a!="function")throw new wn(c);return s=Me(s),function(){return--s>0&&(h=a.apply(this,arguments)),s<=1&&(a=t),h}}var Zp=He(function(s,a,h){var y=B;if(h.length){var A=ws(h,Ma(Zp));y|=D}return Ui(s,y,a,h,A)}),Gw=He(function(s,a,h){var y=B|M;if(h.length){var A=ws(h,Ma(Gw));y|=D}return Ui(a,y,s,h,A)});function qw(s,a,h){a=h?t:a;var y=Ui(s,C,t,t,t,t,t,a);return y.placeholder=qw.placeholder,y}function Vw(s,a,h){a=h?t:a;var y=Ui(s,S,t,t,t,t,t,a);return y.placeholder=Vw.placeholder,y}function Kw(s,a,h){var y,A,N,L,k,V,ie=0,se=!1,ce=!1,pe=!0;if(typeof s!="function")throw new wn(c);a=_n(a)||0,Rt(h)&&(se=!!h.leading,ce="maxWait"in h,N=ce?Xt(_n(h.maxWait)||0,a):N,pe="trailing"in h?!!h.trailing:pe);function Ae(jt){var Hn=y,$i=A;return y=A=t,ie=jt,L=s.apply($i,Hn),L}function De(jt){return ie=jt,k=Pu(Ke,a),se?Ae(jt):L}function ke(jt){var Hn=jt-V,$i=jt-ie,fb=a-Hn;return ce?br(fb,N-$i):fb}function Oe(jt){var Hn=jt-V,$i=jt-ie;return V===t||Hn>=a||Hn<0||ce&&$i>=N}function Ke(){var jt=Kh();if(Oe(jt))return Je(jt);k=Pu(Ke,ke(jt))}function Je(jt){return k=t,pe&&y?Ae(jt):(y=A=t,L)}function sn(){k!==t&&nw(k),ie=0,y=V=A=k=t}function Dr(){return k===t?L:Je(Kh())}function on(){var jt=Kh(),Hn=Oe(jt);if(y=arguments,A=this,V=jt,Hn){if(k===t)return De(V);if(ce)return nw(k),k=Pu(Ke,a),Ae(V)}return k===t&&(k=Pu(Ke,a)),L}return on.cancel=sn,on.flush=Dr,on}var vP=He(function(s,a){return Fm(s,1,a)}),EP=He(function(s,a,h){return Fm(s,_n(a)||0,h)});function AP(s){return Ui(s,$)}function Qh(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new wn(c);var h=function(){var y=arguments,A=a?a.apply(this,y):y[0],N=h.cache;if(N.has(A))return N.get(A);var L=s.apply(this,y);return h.cache=N.set(A,L)||N,L};return h.cache=new(Qh.Cache||Ti),h}Qh.Cache=Ti;function Wh(s){if(typeof s!="function")throw new wn(c);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function _P(s){return zw(2,s)}var IP=l3(function(s,a){a=a.length==1&&Le(a[0])?xt(a[0],tn(Pe())):xt(hr(a,1),tn(Pe()));var h=a.length;return He(function(y){for(var A=-1,N=br(y.length,h);++A<N;)y[A]=a[A].call(this,y[A]);return nr(s,this,y)})}),Xp=He(function(s,a){var h=ws(a,Ma(Xp));return Ui(s,D,t,a,h)}),Qw=He(function(s,a){var h=ws(a,Ma(Qw));return Ui(s,E,t,a,h)}),xP=Fi(function(s,a){return Ui(s,_,t,t,t,a)});function SP(s,a){if(typeof s!="function")throw new wn(c);return a=a===t?a:Me(a),He(s,a)}function PP(s,a){if(typeof s!="function")throw new wn(c);return a=a==null?0:Xt(Me(a),0),He(function(h){var y=h[a],A=_s(h,0,a);return y&&ms(A,y),nr(s,this,A)})}function DP(s,a,h){var y=!0,A=!0;if(typeof s!="function")throw new wn(c);return Rt(h)&&(y="leading"in h?!!h.leading:y,A="trailing"in h?!!h.trailing:A),Kw(s,a,{leading:y,maxWait:a,trailing:A})}function OP(s){return Hw(s,1)}function CP(s,a){return Xp(Lp(a),s)}function NP(){if(!arguments.length)return[];var s=arguments[0];return Le(s)?s:[s]}function RP(s){return vn(s,b)}function TP(s,a){return a=typeof a=="function"?a:t,vn(s,b,a)}function BP(s){return vn(s,g|b)}function UP(s,a){return a=typeof a=="function"?a:t,vn(s,g|b,a)}function FP(s,a){return a==null||Um(s,a,ir(a))}function jn(s,a){return s===a||s!==s&&a!==a}var LP=jh(xp),MP=jh(function(s,a){return s>=a}),vo=jm(function(){return arguments}())?jm:function(s){return Ut(s)&&ct.call(s,"callee")&&!Pm.call(s,"callee")},Le=W.isArray,kP=xr?tn(xr):Kx;function $r(s){return s!=null&&Jh(s.length)&&!Mi(s)}function $t(s){return Ut(s)&&$r(s)}function $P(s){return s===!0||s===!1||Ut(s)&&Sr(s)==_e}var Is=ex||lg,jP=Mn?tn(Mn):Qx;function HP(s){return Ut(s)&&s.nodeType===1&&!Du(s)}function zP(s){if(s==null)return!0;if($r(s)&&(Le(s)||typeof s=="string"||typeof s.splice=="function"||Is(s)||ka(s)||vo(s)))return!s.length;var a=vr(s);if(a==tt||a==Xe)return!s.size;if(Su(s))return!Dp(s).length;for(var h in s)if(ct.call(s,h))return!1;return!0}function GP(s,a){return _u(s,a)}function qP(s,a,h){h=typeof h=="function"?h:t;var y=h?h(s,a):t;return y===t?_u(s,a,t,h):!!y}function eg(s){if(!Ut(s))return!1;var a=Sr(s);return a==Te||a==Ne||typeof s.message=="string"&&typeof s.name=="string"&&!Du(s)}function VP(s){return typeof s=="number"&&Om(s)}function Mi(s){if(!Rt(s))return!1;var a=Sr(s);return a==Re||a==Be||a==Se||a==Pi}function Ww(s){return typeof s=="number"&&s==Me(s)}function Jh(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=H}function Rt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Ut(s){return s!=null&&typeof s=="object"}var Jw=yn?tn(yn):Jx;function KP(s,a){return s===a||Pp(s,a,Gp(a))}function QP(s,a,h){return h=typeof h=="function"?h:t,Pp(s,a,Gp(a),h)}function WP(s){return Yw(s)&&s!=+s}function JP(s){if(T3(s))throw new Ue(o);return Hm(s)}function YP(s){return s===null}function ZP(s){return s==null}function Yw(s){return typeof s=="number"||Ut(s)&&Sr(s)==Yt}function Du(s){if(!Ut(s)||Sr(s)!=rr)return!1;var a=_h(s);if(a===null)return!0;var h=ct.call(a,"constructor")&&a.constructor;return typeof h=="function"&&h instanceof h&&bh.call(h)==QI}var tg=si?tn(si):Yx;function XP(s){return Ww(s)&&s>=-H&&s<=H}var Zw=du?tn(du):Zx;function Yh(s){return typeof s=="string"||!Le(s)&&Ut(s)&&Sr(s)==ft}function nn(s){return typeof s=="symbol"||Ut(s)&&Sr(s)==bt}var ka=ho?tn(ho):Xx;function eD(s){return s===t}function tD(s){return Ut(s)&&vr(s)==dt}function rD(s){return Ut(s)&&Sr(s)==Dt}var nD=jh(Op),iD=jh(function(s,a){return s<=a});function Xw(s){if(!s)return[];if($r(s))return Yh(s)?kn(s):kr(s);if(gu&&s[gu])return FI(s[gu]());var a=vr(s),h=a==tt?yp:a==Xe?yh:$a;return h(s)}function ki(s){if(!s)return s===0?s:0;if(s=_n(s),s===T||s===-T){var a=s<0?-1:1;return a*Y}return s===s?s:0}function Me(s){var a=ki(s),h=a%1;return a===a?h?a-h:a:0}function eb(s){return s?yo(Me(s),0,ue):0}function _n(s){if(typeof s=="number")return s;if(nn(s))return K;if(Rt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=Rt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=bm(s);var h=qd.test(s);return h||Kd.test(s)?Fe(s.slice(2),h?2:8):Gd.test(s)?K:+s}function tb(s){return ai(s,jr(s))}function sD(s){return s?yo(Me(s),-H,H):s===0?s:0}function it(s){return s==null?"":rn(s)}var oD=Fa(function(s,a){if(Su(a)||$r(a)){ai(a,ir(a),s);return}for(var h in a)ct.call(a,h)&&vu(s,h,a[h])}),rb=Fa(function(s,a){ai(a,jr(a),s)}),Zh=Fa(function(s,a,h,y){ai(a,jr(a),s,y)}),aD=Fa(function(s,a,h,y){ai(a,ir(a),s,y)}),cD=Fi(Ap);function uD(s,a){var h=Ua(s);return a==null?h:Bm(h,a)}var lD=He(function(s,a){s=mt(s);var h=-1,y=a.length,A=y>2?a[2]:t;for(A&&Pr(a[0],a[1],A)&&(y=1);++h<y;)for(var N=a[h],L=jr(N),k=-1,V=L.length;++k<V;){var ie=L[k],se=s[ie];(se===t||jn(se,Ra[ie])&&!ct.call(s,ie))&&(s[ie]=N[ie])}return s}),hD=He(function(s){return s.push(t,bw),nr(nb,t,s)});function fD(s,a){return gm(s,Pe(a,3),oi)}function dD(s,a){return gm(s,Pe(a,3),Ip)}function pD(s,a){return s==null?s:_p(s,Pe(a,3),jr)}function gD(s,a){return s==null?s:km(s,Pe(a,3),jr)}function yD(s,a){return s&&oi(s,Pe(a,3))}function mD(s,a){return s&&Ip(s,Pe(a,3))}function wD(s){return s==null?[]:Th(s,ir(s))}function bD(s){return s==null?[]:Th(s,jr(s))}function rg(s,a,h){var y=s==null?t:mo(s,a);return y===t?h:y}function vD(s,a){return s!=null&&Aw(s,a,zx)}function ng(s,a){return s!=null&&Aw(s,a,Gx)}var ED=pw(function(s,a,h){a!=null&&typeof a.toString!="function"&&(a=vh.call(a)),s[a]=h},sg(Hr)),AD=pw(function(s,a,h){a!=null&&typeof a.toString!="function"&&(a=vh.call(a)),ct.call(s,a)?s[a].push(h):s[a]=[h]},Pe),_D=He(Au);function ir(s){return $r(s)?Rm(s):Dp(s)}function jr(s){return $r(s)?Rm(s,!0):e3(s)}function ID(s,a){var h={};return a=Pe(a,3),oi(s,function(y,A,N){Bi(h,a(y,A,N),y)}),h}function xD(s,a){var h={};return a=Pe(a,3),oi(s,function(y,A,N){Bi(h,A,a(y,A,N))}),h}var SD=Fa(function(s,a,h){Bh(s,a,h)}),nb=Fa(function(s,a,h,y){Bh(s,a,h,y)}),PD=Fi(function(s,a){var h={};if(s==null)return h;var y=!1;a=xt(a,function(N){return N=As(N,s),y||(y=N.length>1),N}),ai(s,Hp(s),h),y&&(h=vn(h,g|m|b,E3));for(var A=a.length;A--;)Bp(h,a[A]);return h});function DD(s,a){return ib(s,Wh(Pe(a)))}var OD=Fi(function(s,a){return s==null?{}:r3(s,a)});function ib(s,a){if(s==null)return{};var h=xt(Hp(s),function(y){return[y]});return a=Pe(a),Wm(s,h,function(y,A){return a(y,A[0])})}function CD(s,a,h){a=As(a,s);var y=-1,A=a.length;for(A||(A=1,s=t);++y<A;){var N=s==null?t:s[ci(a[y])];N===t&&(y=A,N=h),s=Mi(N)?N.call(s):N}return s}function ND(s,a,h){return s==null?s:Iu(s,a,h)}function RD(s,a,h,y){return y=typeof y=="function"?y:t,s==null?s:Iu(s,a,h,y)}var sb=mw(ir),ob=mw(jr);function TD(s,a,h){var y=Le(s),A=y||Is(s)||ka(s);if(a=Pe(a,4),h==null){var N=s&&s.constructor;A?h=y?new N:[]:Rt(s)?h=Mi(N)?Ua(_h(s)):{}:h={}}return(A?mn:oi)(s,function(L,k,V){return a(h,L,k,V)}),h}function BD(s,a){return s==null?!0:Bp(s,a)}function UD(s,a,h){return s==null?s:ew(s,a,Lp(h))}function FD(s,a,h,y){return y=typeof y=="function"?y:t,s==null?s:ew(s,a,Lp(h),y)}function $a(s){return s==null?[]:gp(s,ir(s))}function LD(s){return s==null?[]:gp(s,jr(s))}function MD(s,a,h){return h===t&&(h=a,a=t),h!==t&&(h=_n(h),h=h===h?h:0),a!==t&&(a=_n(a),a=a===a?a:0),yo(_n(s),a,h)}function kD(s,a,h){return a=ki(a),h===t?(h=a,a=0):h=ki(h),s=_n(s),qx(s,a,h)}function $D(s,a,h){if(h&&typeof h!="boolean"&&Pr(s,a,h)&&(a=h=t),h===t&&(typeof a=="boolean"?(h=a,a=t):typeof s=="boolean"&&(h=s,s=t)),s===t&&a===t?(s=0,a=1):(s=ki(s),a===t?(a=s,s=0):a=ki(a)),s>a){var y=s;s=a,a=y}if(h||s%1||a%1){var A=Cm();return br(s+A*(a-s+gt("1e-"+((A+"").length-1))),a)}return Np(s,a)}var jD=La(function(s,a,h){return a=a.toLowerCase(),s+(h?ab(a):a)});function ab(s){return ig(it(s).toLowerCase())}function cb(s){return s=it(s),s&&s.replace(Ci,NI).replace(op,"")}function HD(s,a,h){s=it(s),a=rn(a);var y=s.length;h=h===t?y:yo(Me(h),0,y);var A=h;return h-=a.length,h>=0&&s.slice(h,A)==a}function zD(s){return s=it(s),s&&so.test(s)?s.replace(Kl,RI):s}function GD(s){return s=it(s),s&&Md.test(s)?s.replace(au,"\\$&"):s}var qD=La(function(s,a,h){return s+(h?"-":"")+a.toLowerCase()}),VD=La(function(s,a,h){return s+(h?" ":"")+a.toLowerCase()}),KD=hw("toLowerCase");function QD(s,a,h){s=it(s),a=Me(a);var y=a?Ca(s):0;if(!a||y>=a)return s;var A=(a-y)/2;return $h(Ph(A),h)+s+$h(Sh(A),h)}function WD(s,a,h){s=it(s),a=Me(a);var y=a?Ca(s):0;return a&&y<a?s+$h(a-y,h):s}function JD(s,a,h){s=it(s),a=Me(a);var y=a?Ca(s):0;return a&&y<a?$h(a-y,h)+s:s}function YD(s,a,h){return h||a==null?a=0:a&&(a=+a),ix(it(s).replace(cu,""),a||0)}function ZD(s,a,h){return(h?Pr(s,a,h):a===t)?a=1:a=Me(a),Rp(it(s),a)}function XD(){var s=arguments,a=it(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var eO=La(function(s,a,h){return s+(h?"_":"")+a.toLowerCase()});function tO(s,a,h){return h&&typeof h!="number"&&Pr(s,a,h)&&(a=h=t),h=h===t?ue:h>>>0,h?(s=it(s),s&&(typeof a=="string"||a!=null&&!tg(a))&&(a=rn(a),!a&&Oa(s))?_s(kn(s),0,h):s.split(a,h)):[]}var rO=La(function(s,a,h){return s+(h?" ":"")+ig(a)});function nO(s,a,h){return s=it(s),h=h==null?0:yo(Me(h),0,s.length),a=rn(a),s.slice(h,h+a.length)==a}function iO(s,a,h){var y=O.templateSettings;h&&Pr(s,a,h)&&(a=t),s=it(s),a=Zh({},a,y,ww);var A=Zh({},a.imports,y.imports,ww),N=ir(A),L=gp(A,N),k,V,ie=0,se=a.interpolate||Ea,ce="__p += '",pe=mp((a.escape||Ea).source+"|"+se.source+"|"+(se===va?zd:Ea).source+"|"+(a.evaluate||Ea).source+"|$","g"),Ae="//# sourceURL="+(ct.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ap+"]")+`
`;s.replace(pe,function(Oe,Ke,Je,sn,Dr,on){return Je||(Je=sn),ce+=s.slice(ie,on).replace(Wd,TI),Ke&&(k=!0,ce+=`' +
__e(`+Ke+`) +
'`),Dr&&(V=!0,ce+=`';
`+Dr+`;
__p += '`),Je&&(ce+=`' +
((__t = (`+Je+`)) == null ? '' : __t) +
'`),ie=on+Oe.length,Oe}),ce+=`';
`;var De=ct.call(a,"variable")&&a.variable;if(!De)ce=`with (obj) {
`+ce+`
}
`;else if(jd.test(De))throw new Ue(u);ce=(V?ce.replace(Ud,""):ce).replace(Di,"$1").replace(ql,"$1;"),ce="function("+(De||"obj")+`) {
`+(De?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var ke=lb(function(){return nt(N,Ae+"return "+ce).apply(t,L)});if(ke.source=ce,eg(ke))throw ke;return ke}function sO(s){return it(s).toLowerCase()}function oO(s){return it(s).toUpperCase()}function aO(s,a,h){if(s=it(s),s&&(h||a===t))return bm(s);if(!s||!(a=rn(a)))return s;var y=kn(s),A=kn(a),N=vm(y,A),L=Em(y,A)+1;return _s(y,N,L).join("")}function cO(s,a,h){if(s=it(s),s&&(h||a===t))return s.slice(0,_m(s)+1);if(!s||!(a=rn(a)))return s;var y=kn(s),A=Em(y,kn(a))+1;return _s(y,0,A).join("")}function uO(s,a,h){if(s=it(s),s&&(h||a===t))return s.replace(cu,"");if(!s||!(a=rn(a)))return s;var y=kn(s),A=vm(y,kn(a));return _s(y,A).join("")}function lO(s,a){var h=q,y=Z;if(Rt(a)){var A="separator"in a?a.separator:A;h="length"in a?Me(a.length):h,y="omission"in a?rn(a.omission):y}s=it(s);var N=s.length;if(Oa(s)){var L=kn(s);N=L.length}if(h>=N)return s;var k=h-Ca(y);if(k<1)return y;var V=L?_s(L,0,k).join(""):s.slice(0,k);if(A===t)return V+y;if(L&&(k+=V.length-k),tg(A)){if(s.slice(k).search(A)){var ie,se=V;for(A.global||(A=mp(A.source,it(gn.exec(A))+"g")),A.lastIndex=0;ie=A.exec(se);)var ce=ie.index;V=V.slice(0,ce===t?k:ce)}}else if(s.indexOf(rn(A),k)!=k){var pe=V.lastIndexOf(A);pe>-1&&(V=V.slice(0,pe))}return V+y}function hO(s){return s=it(s),s&&iu.test(s)?s.replace(Vl,$I):s}var fO=La(function(s,a,h){return s+(h?" ":"")+a.toUpperCase()}),ig=hw("toUpperCase");function ub(s,a,h){return s=it(s),a=h?t:a,a===t?UI(s)?zI(s):SI(s):s.match(a)||[]}var lb=He(function(s,a){try{return nr(s,t,a)}catch(h){return eg(h)?h:new Ue(h)}}),dO=Fi(function(s,a){return mn(a,function(h){h=ci(h),Bi(s,h,Zp(s[h],s))}),s});function pO(s){var a=s==null?0:s.length,h=Pe();return s=a?xt(s,function(y){if(typeof y[1]!="function")throw new wn(c);return[h(y[0]),y[1]]}):[],He(function(y){for(var A=-1;++A<a;){var N=s[A];if(nr(N[0],this,y))return nr(N[1],this,y)}})}function gO(s){return $x(vn(s,g))}function sg(s){return function(){return s}}function yO(s,a){return s==null||s!==s?a:s}var mO=dw(),wO=dw(!0);function Hr(s){return s}function og(s){return zm(typeof s=="function"?s:vn(s,g))}function bO(s){return qm(vn(s,g))}function vO(s,a){return Vm(s,vn(a,g))}var EO=He(function(s,a){return function(h){return Au(h,s,a)}}),AO=He(function(s,a){return function(h){return Au(s,h,a)}});function ag(s,a,h){var y=ir(a),A=Th(a,y);h==null&&!(Rt(a)&&(A.length||!y.length))&&(h=a,a=s,s=this,A=Th(a,ir(a)));var N=!(Rt(h)&&"chain"in h)||!!h.chain,L=Mi(s);return mn(A,function(k){var V=a[k];s[k]=V,L&&(s.prototype[k]=function(){var ie=this.__chain__;if(N||ie){var se=s(this.__wrapped__),ce=se.__actions__=kr(this.__actions__);return ce.push({func:V,args:arguments,thisArg:s}),se.__chain__=ie,se}return V.apply(s,ms([this.value()],arguments))})}),s}function _O(){return We._===this&&(We._=WI),this}function cg(){}function IO(s){return s=Me(s),He(function(a){return Km(a,s)})}var xO=kp(xt),SO=kp(pm),PO=kp(lp);function hb(s){return Vp(s)?hp(ci(s)):n3(s)}function DO(s){return function(a){return s==null?t:mo(s,a)}}var OO=gw(),CO=gw(!0);function ug(){return[]}function lg(){return!1}function NO(){return{}}function RO(){return""}function TO(){return!0}function BO(s,a){if(s=Me(s),s<1||s>H)return[];var h=ue,y=br(s,ue);a=Pe(a),s-=ue;for(var A=pp(y,a);++h<s;)a(h);return A}function UO(s){return Le(s)?xt(s,ci):nn(s)?[s]:kr(Nw(it(s)))}function FO(s){var a=++KI;return it(s)+a}var LO=kh(function(s,a){return s+a},0),MO=$p("ceil"),kO=kh(function(s,a){return s/a},1),$O=$p("floor");function jO(s){return s&&s.length?Rh(s,Hr,xp):t}function HO(s,a){return s&&s.length?Rh(s,Pe(a,2),xp):t}function zO(s){return mm(s,Hr)}function GO(s,a){return mm(s,Pe(a,2))}function qO(s){return s&&s.length?Rh(s,Hr,Op):t}function VO(s,a){return s&&s.length?Rh(s,Pe(a,2),Op):t}var KO=kh(function(s,a){return s*a},1),QO=$p("round"),WO=kh(function(s,a){return s-a},0);function JO(s){return s&&s.length?dp(s,Hr):0}function YO(s,a){return s&&s.length?dp(s,Pe(a,2)):0}return O.after=bP,O.ary=Hw,O.assign=oD,O.assignIn=rb,O.assignInWith=Zh,O.assignWith=aD,O.at=cD,O.before=zw,O.bind=Zp,O.bindAll=dO,O.bindKey=Gw,O.castArray=NP,O.chain=kw,O.chunk=$3,O.compact=j3,O.concat=H3,O.cond=pO,O.conforms=gO,O.constant=sg,O.countBy=JS,O.create=uD,O.curry=qw,O.curryRight=Vw,O.debounce=Kw,O.defaults=lD,O.defaultsDeep=hD,O.defer=vP,O.delay=EP,O.difference=z3,O.differenceBy=G3,O.differenceWith=q3,O.drop=V3,O.dropRight=K3,O.dropRightWhile=Q3,O.dropWhile=W3,O.fill=J3,O.filter=ZS,O.flatMap=tP,O.flatMapDeep=rP,O.flatMapDepth=nP,O.flatten=Uw,O.flattenDeep=Y3,O.flattenDepth=Z3,O.flip=AP,O.flow=mO,O.flowRight=wO,O.fromPairs=X3,O.functions=wD,O.functionsIn=bD,O.groupBy=iP,O.initial=tS,O.intersection=rS,O.intersectionBy=nS,O.intersectionWith=iS,O.invert=ED,O.invertBy=AD,O.invokeMap=oP,O.iteratee=og,O.keyBy=aP,O.keys=ir,O.keysIn=jr,O.map=Vh,O.mapKeys=ID,O.mapValues=xD,O.matches=bO,O.matchesProperty=vO,O.memoize=Qh,O.merge=SD,O.mergeWith=nb,O.method=EO,O.methodOf=AO,O.mixin=ag,O.negate=Wh,O.nthArg=IO,O.omit=PD,O.omitBy=DD,O.once=_P,O.orderBy=cP,O.over=xO,O.overArgs=IP,O.overEvery=SO,O.overSome=PO,O.partial=Xp,O.partialRight=Qw,O.partition=uP,O.pick=OD,O.pickBy=ib,O.property=hb,O.propertyOf=DO,O.pull=cS,O.pullAll=Lw,O.pullAllBy=uS,O.pullAllWith=lS,O.pullAt=hS,O.range=OO,O.rangeRight=CO,O.rearg=xP,O.reject=fP,O.remove=fS,O.rest=SP,O.reverse=Jp,O.sampleSize=pP,O.set=ND,O.setWith=RD,O.shuffle=gP,O.slice=dS,O.sortBy=wP,O.sortedUniq=vS,O.sortedUniqBy=ES,O.split=tO,O.spread=PP,O.tail=AS,O.take=_S,O.takeRight=IS,O.takeRightWhile=xS,O.takeWhile=SS,O.tap=jS,O.throttle=DP,O.thru=qh,O.toArray=Xw,O.toPairs=sb,O.toPairsIn=ob,O.toPath=UO,O.toPlainObject=tb,O.transform=TD,O.unary=OP,O.union=PS,O.unionBy=DS,O.unionWith=OS,O.uniq=CS,O.uniqBy=NS,O.uniqWith=RS,O.unset=BD,O.unzip=Yp,O.unzipWith=Mw,O.update=UD,O.updateWith=FD,O.values=$a,O.valuesIn=LD,O.without=TS,O.words=ub,O.wrap=CP,O.xor=BS,O.xorBy=US,O.xorWith=FS,O.zip=LS,O.zipObject=MS,O.zipObjectDeep=kS,O.zipWith=$S,O.entries=sb,O.entriesIn=ob,O.extend=rb,O.extendWith=Zh,ag(O,O),O.add=LO,O.attempt=lb,O.camelCase=jD,O.capitalize=ab,O.ceil=MO,O.clamp=MD,O.clone=RP,O.cloneDeep=BP,O.cloneDeepWith=UP,O.cloneWith=TP,O.conformsTo=FP,O.deburr=cb,O.defaultTo=yO,O.divide=kO,O.endsWith=HD,O.eq=jn,O.escape=zD,O.escapeRegExp=GD,O.every=YS,O.find=XS,O.findIndex=Tw,O.findKey=fD,O.findLast=eP,O.findLastIndex=Bw,O.findLastKey=dD,O.floor=$O,O.forEach=$w,O.forEachRight=jw,O.forIn=pD,O.forInRight=gD,O.forOwn=yD,O.forOwnRight=mD,O.get=rg,O.gt=LP,O.gte=MP,O.has=vD,O.hasIn=ng,O.head=Fw,O.identity=Hr,O.includes=sP,O.indexOf=eS,O.inRange=kD,O.invoke=_D,O.isArguments=vo,O.isArray=Le,O.isArrayBuffer=kP,O.isArrayLike=$r,O.isArrayLikeObject=$t,O.isBoolean=$P,O.isBuffer=Is,O.isDate=jP,O.isElement=HP,O.isEmpty=zP,O.isEqual=GP,O.isEqualWith=qP,O.isError=eg,O.isFinite=VP,O.isFunction=Mi,O.isInteger=Ww,O.isLength=Jh,O.isMap=Jw,O.isMatch=KP,O.isMatchWith=QP,O.isNaN=WP,O.isNative=JP,O.isNil=ZP,O.isNull=YP,O.isNumber=Yw,O.isObject=Rt,O.isObjectLike=Ut,O.isPlainObject=Du,O.isRegExp=tg,O.isSafeInteger=XP,O.isSet=Zw,O.isString=Yh,O.isSymbol=nn,O.isTypedArray=ka,O.isUndefined=eD,O.isWeakMap=tD,O.isWeakSet=rD,O.join=sS,O.kebabCase=qD,O.last=An,O.lastIndexOf=oS,O.lowerCase=VD,O.lowerFirst=KD,O.lt=nD,O.lte=iD,O.max=jO,O.maxBy=HO,O.mean=zO,O.meanBy=GO,O.min=qO,O.minBy=VO,O.stubArray=ug,O.stubFalse=lg,O.stubObject=NO,O.stubString=RO,O.stubTrue=TO,O.multiply=KO,O.nth=aS,O.noConflict=_O,O.noop=cg,O.now=Kh,O.pad=QD,O.padEnd=WD,O.padStart=JD,O.parseInt=YD,O.random=$D,O.reduce=lP,O.reduceRight=hP,O.repeat=ZD,O.replace=XD,O.result=CD,O.round=QO,O.runInContext=G,O.sample=dP,O.size=yP,O.snakeCase=eO,O.some=mP,O.sortedIndex=pS,O.sortedIndexBy=gS,O.sortedIndexOf=yS,O.sortedLastIndex=mS,O.sortedLastIndexBy=wS,O.sortedLastIndexOf=bS,O.startCase=rO,O.startsWith=nO,O.subtract=WO,O.sum=JO,O.sumBy=YO,O.template=iO,O.times=BO,O.toFinite=ki,O.toInteger=Me,O.toLength=eb,O.toLower=sO,O.toNumber=_n,O.toSafeInteger=sD,O.toString=it,O.toUpper=oO,O.trim=aO,O.trimEnd=cO,O.trimStart=uO,O.truncate=lO,O.unescape=hO,O.uniqueId=FO,O.upperCase=fO,O.upperFirst=ig,O.each=$w,O.eachRight=jw,O.first=Fw,ag(O,function(){var s={};return oi(O,function(a,h){ct.call(O.prototype,h)||(s[h]=a)}),s}(),{chain:!1}),O.VERSION=n,mn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){O[s].placeholder=O}),mn(["drop","take"],function(s,a){Qe.prototype[s]=function(h){h=h===t?1:Xt(Me(h),0);var y=this.__filtered__&&!a?new Qe(this):this.clone();return y.__filtered__?y.__takeCount__=br(h,y.__takeCount__):y.__views__.push({size:br(h,ue),type:s+(y.__dir__<0?"Right":"")}),y},Qe.prototype[s+"Right"]=function(h){return this.reverse()[s](h).reverse()}}),mn(["filter","map","takeWhile"],function(s,a){var h=a+1,y=h==re||h==w;Qe.prototype[s]=function(A){var N=this.clone();return N.__iteratees__.push({iteratee:Pe(A,3),type:h}),N.__filtered__=N.__filtered__||y,N}}),mn(["head","last"],function(s,a){var h="take"+(a?"Right":"");Qe.prototype[s]=function(){return this[h](1).value()[0]}}),mn(["initial","tail"],function(s,a){var h="drop"+(a?"":"Right");Qe.prototype[s]=function(){return this.__filtered__?new Qe(this):this[h](1)}}),Qe.prototype.compact=function(){return this.filter(Hr)},Qe.prototype.find=function(s){return this.filter(s).head()},Qe.prototype.findLast=function(s){return this.reverse().find(s)},Qe.prototype.invokeMap=He(function(s,a){return typeof s=="function"?new Qe(this):this.map(function(h){return Au(h,s,a)})}),Qe.prototype.reject=function(s){return this.filter(Wh(Pe(s)))},Qe.prototype.slice=function(s,a){s=Me(s);var h=this;return h.__filtered__&&(s>0||a<0)?new Qe(h):(s<0?h=h.takeRight(-s):s&&(h=h.drop(s)),a!==t&&(a=Me(a),h=a<0?h.dropRight(-a):h.take(a-s)),h)},Qe.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Qe.prototype.toArray=function(){return this.take(ue)},oi(Qe.prototype,function(s,a){var h=/^(?:filter|find|map|reject)|While$/.test(a),y=/^(?:head|last)$/.test(a),A=O[y?"take"+(a=="last"?"Right":""):a],N=y||/^find/.test(a);A&&(O.prototype[a]=function(){var L=this.__wrapped__,k=y?[1]:arguments,V=L instanceof Qe,ie=k[0],se=V||Le(L),ce=function(Ke){var Je=A.apply(O,ms([Ke],k));return y&&pe?Je[0]:Je};se&&h&&typeof ie=="function"&&ie.length!=1&&(V=se=!1);var pe=this.__chain__,Ae=!!this.__actions__.length,De=N&&!pe,ke=V&&!Ae;if(!N&&se){L=ke?L:new Qe(this);var Oe=s.apply(L,k);return Oe.__actions__.push({func:qh,args:[ce],thisArg:t}),new bn(Oe,pe)}return De&&ke?s.apply(this,k):(Oe=this.thru(ce),De?y?Oe.value()[0]:Oe.value():Oe)})}),mn(["pop","push","shift","sort","splice","unshift"],function(s){var a=mh[s],h=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",y=/^(?:pop|shift)$/.test(s);O.prototype[s]=function(){var A=arguments;if(y&&!this.__chain__){var N=this.value();return a.apply(Le(N)?N:[],A)}return this[h](function(L){return a.apply(Le(L)?L:[],A)})}}),oi(Qe.prototype,function(s,a){var h=O[a];if(h){var y=h.name+"";ct.call(Ba,y)||(Ba[y]=[]),Ba[y].push({name:a,func:h})}}),Ba[Mh(t,M).name]=[{name:"wrapper",func:t}],Qe.prototype.clone=hx,Qe.prototype.reverse=fx,Qe.prototype.value=dx,O.prototype.at=HS,O.prototype.chain=zS,O.prototype.commit=GS,O.prototype.next=qS,O.prototype.plant=KS,O.prototype.reverse=QS,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=WS,O.prototype.first=O.prototype.head,gu&&(O.prototype[gu]=VS),O},Na=GI();kt?((kt.exports=Na)._=Na,yt._=Na):We._=Na}).call(Ku)})(fy,fy.exports);var C$=Object.defineProperty,N$=Object.defineProperties,R$=Object.getOwnPropertyDescriptors,HE=Object.getOwnPropertySymbols,T$=Object.prototype.hasOwnProperty,B$=Object.prototype.propertyIsEnumerable,zE=(r,e,t)=>e in r?C$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vf=(r,e)=>{for(var t in e||(e={}))T$.call(e,t)&&zE(r,t,e[t]);if(HE)for(var t of HE(e))B$.call(e,t)&&zE(r,t,e[t]);return r},U$=(r,e)=>N$(r,R$(e));function Fn(r,e,t){let n;const i=dy(r);return e.rpcMap&&(n=e.rpcMap[i]),n||(n=`${O$}?chainId=eip155:${i}&projectId=${t}`),n}function dy(r){return r.includes("eip155")?Number(r.split(":")[1]):Number(r)}function wI(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function F$(r,e){const t=Object.keys(e.namespaces).filter(i=>i.includes(r));if(!t.length)return[];const n=[];return t.forEach(i=>{const o=e.namespaces[i].accounts;n.push(...o)}),n}function L$(r={},e={}){const t=GE(r),n=GE(e);return fy.exports.merge(t,n)}function GE(r){var e,t,n,i;const o={};if(!sc(r))return o;for(const[c,u]of Object.entries(r)){const l=Ky(c)?[c]:u.chains,f=u.methods||[],d=u.events||[],g=u.rpcMap||{},m=Tf(c);o[m]=U$(vf(vf({},o[m]),u),{chains:Vg(l,(e=o[m])==null?void 0:e.chains),methods:Vg(f,(t=o[m])==null?void 0:t.methods),events:Vg(d,(n=o[m])==null?void 0:n.events),rpcMap:vf(vf({},g),(i=o[m])==null?void 0:i.rpcMap)})}return o}function M$(r){return r.includes(":")?r.split(":")[2]:r}function k$(r){const e={};for(const[t,n]of Object.entries(r)){const i=n.methods||[],o=n.events||[],c=n.accounts||[],u=Ky(t)?[t]:n.chains?n.chains:wI(n.accounts);e[t]={chains:u,methods:i,events:o,accounts:c}}return e}const bI={},Vt=r=>bI[r],g0=(r,e)=>{bI[r]=e};class $${constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Fn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Fn(e,this.namespace);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}}class j${constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){const n=dy(e);if(!this.httpProviders[n]){const i=t||Fn(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,i)}this.chainId=n,this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const n=t||Fn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;const i=dy(t);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,n;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const o=parseInt(i,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class H${constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||Fn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Fn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}}class z${constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||Fn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Fn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}}class G${constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const n=t||this.getCardanoRPCUrl(e);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const n=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||this.getCardanoRPCUrl(e);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}}class q${constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||Fn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Fn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}}class V${constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Vt("events"),this.client=Vt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const n=t||Fn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(io.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var n;e[t]=this.createHttpProvider(t,(n=this.namespace.rpcMap)==null?void 0:n[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const n=this.createHttpProvider(e,t);n&&(this.httpProviders[e]=n)}createHttpProvider(e,t){const n=t||Fn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new ma(new ya(n,Vt("disableProviderPing")))}}var K$=Object.defineProperty,Q$=Object.defineProperties,W$=Object.getOwnPropertyDescriptors,qE=Object.getOwnPropertySymbols,J$=Object.prototype.hasOwnProperty,Y$=Object.prototype.propertyIsEnumerable,VE=(r,e,t)=>e in r?K$(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ef=(r,e)=>{for(var t in e||(e={}))J$.call(e,t)&&VE(r,t,e[t]);if(qE)for(var t of qE(e))Y$.call(e,t)&&VE(r,t,e[t]);return r},y0=(r,e)=>Q$(r,W$(e));class um{constructor(e){this.events=new Ly,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Dd(Od({level:(e==null?void 0:e.logger)||$E})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const t=new um(e);return await t.initialize(),t}async request(e,t){const[n,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:Ef({},e),chainId:`${n}:${i}`,topic:this.session.topic})}sendAsync(e,t,n){this.request(e,n).then(i=>t(null,i)).catch(i=>t(i,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:zt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:n,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});n&&(this.uri=n,this.events.emit("display_uri",n)),await i().then(o=>{this.session=o,this.namespaces||(this.namespaces=k$(o.namespaces),this.persist("namespaces",this.namespaces))}).catch(o=>{if(o.message!==yI)throw o;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,t)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Si(t)){for(const n of t)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await y$.init({logger:this.providerOpts.logger||$E,relayUrl:this.providerOpts.relayUrl||S$,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Tf(t)))];g0("client",this.client),g0("events",this.events),g0("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const n=F$(t,this.session),i=wI(n),o=L$(this.namespaces,this.optionalNamespaces),c=y0(Ef({},o[t]),{accounts:n,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new j$({namespace:c});break;case"solana":this.rpcProviders[t]=new H$({namespace:c});break;case"cosmos":this.rpcProviders[t]=new z$({namespace:c});break;case"polkadot":this.rpcProviders[t]=new $$({namespace:c});break;case"cip34":this.rpcProviders[t]=new G$({namespace:c});break;case"elrond":this.rpcProviders[t]=new q$({namespace:c});break;case"multiversx":this.rpcProviders[t]=new V$({namespace:c});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:n}=t;if(n.name==="accountsChanged"){const i=n.data;i&&Si(i)&&this.events.emit("accountsChanged",i.map(M$))}else n.name==="chainChanged"?this.onChainChanged(t.chainId):this.events.emit(n.name,n.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var n;const{namespaces:i}=t,o=(n=this.client)==null?void 0:n.session.get(e);this.session=y0(Ef({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",y0(Ef({},zt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(io.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:n,sessionProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),n&&Object.keys(n).length&&(this.optionalNamespaces=n),this.sessionProperties=i,this.persist("namespaces",t),this.persist("optionalNamespaces",n)}validateChain(e){const[t,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,n];if(t&&!Object.keys(this.namespaces||{}).map(c=>Tf(c)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&n)return[t,n];const i=Tf(Object.keys(this.namespaces)[0]),o=this.rpcProviders[i].getDefaultChain();return[i,o]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var n;if(!this.namespaces)return;const[i,o]=this.validateChain(e);t||this.getProvider(i).setDefaultChain(o),((n=this.namespaces[i])!=null?n:this.namespaces[`${i}:${o}`]).defaultChain=o,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",o)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${jE}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${jE}/${e}`)}}const Z$=um,X$="wc",e7="ethereum_provider",t7=`${X$}@2:${e7}:`,r7="https://rpc.walletconnect.com/v1/",py=["eth_sendTransaction","personal_sign"],n7=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],gy=["chainChanged","accountsChanged"],i7=["message","disconnect","connect"];var s7=Object.defineProperty,o7=Object.defineProperties,a7=Object.getOwnPropertyDescriptors,KE=Object.getOwnPropertySymbols,c7=Object.prototype.hasOwnProperty,u7=Object.prototype.propertyIsEnumerable,QE=(r,e,t)=>e in r?s7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,tl=(r,e)=>{for(var t in e||(e={}))c7.call(e,t)&&QE(r,t,e[t]);if(KE)for(var t of KE(e))u7.call(e,t)&&QE(r,t,e[t]);return r},WE=(r,e)=>o7(r,a7(e));function rd(r){return Number(r[0].split(":")[1])}function m0(r){return`0x${r.toString(16)}`}function l7(r){const{chains:e,optionalChains:t,methods:n,optionalMethods:i,events:o,optionalEvents:c,rpcMap:u}=r;if(!Si(e))throw new Error("Invalid chains");const l={chains:e,methods:n||py,events:o||gy,rpcMap:tl({},e.length?{[rd(e)]:u[rd(e)]}:{})},f=o==null?void 0:o.filter(b=>!gy.includes(b)),d=n==null?void 0:n.filter(b=>!py.includes(b));if(!t&&!c&&!i&&!(f!=null&&f.length)&&!(d!=null&&d.length))return{required:e.length?l:void 0};const g=(f==null?void 0:f.length)&&(d==null?void 0:d.length)||!t,m={chains:[...new Set(g?l.chains.concat(t||[]):t)],methods:[...new Set(l.methods.concat(i!=null&&i.length?i:n7))],events:[...new Set(l.events.concat(c||i7))],rpcMap:u};return{required:e.length?l:void 0,optional:t.length?m:void 0}}class lm{constructor(){this.events=new dn.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=t7,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new lm;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:n}=l7(this.rpc);try{const i=await new Promise(async(c,u)=>{var l;this.rpc.showQrModal&&((l=this.modal)==null||l.subscribeModal(f=>{!f.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),u(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(WE(tl({namespaces:tl({},t&&{[this.namespace]:t})},n&&{optionalNamespaces:{[this.namespace]:n}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(f=>{c(f)}).catch(f=>{u(new Error(f.message))})});if(!i)return;this.setChainIds(this.rpc.chains);const o=q6(i.namespaces,[this.namespace]);this.setAccounts(o),this.events.emit("connect",{chainId:m0(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:n}=t;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",m0(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",WE(tl({},zt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,n;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(n=this.modal)==null||n.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",m0(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,n,i]=e.split(":");return{chainId:`${t}:${n}`,address:i}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,n;const i=(t=e==null?void 0:e.chains)!=null?t:[],o=(n=e==null?void 0:e.optionalChains)!=null?n:[],c=i.concat(o);if(!c.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const u=i.length?(e==null?void 0:e.methods)||py:[],l=i.length?(e==null?void 0:e.events)||gy:[],f=(e==null?void 0:e.optionalMethods)||[],d=(e==null?void 0:e.optionalEvents)||[],g=(e==null?void 0:e.rpcMap)||this.buildRpcMap(c,e.projectId),m=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(b=>this.formatChainId(b)),optionalChains:o.map(b=>this.formatChainId(b)),methods:u,events:l,optionalMethods:f,optionalEvents:d,rpcMap:g,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:m,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const n={};return e.forEach(i=>{n[i]=this.getRpcUrl(i,t)}),n}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?rd(this.rpc.chains):rd(this.rpc.optionalChains),this.signer=await Z$.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:n}=await UT(()=>import("./index-CXCXRWPN.js").then(i=>i.i),[]);t=n}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(tl({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(n){throw this.signer.logger.error(n),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:n,rpcMap:i}=e;t&&Si(t)&&(this.rpc.chains=t.map(o=>this.formatChainId(o)),t.forEach(o=>{this.rpc.rpcMap[o]=(i==null?void 0:i[o])||this.getRpcUrl(o)})),n&&Si(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(o=>this.formatChainId(o)),n.forEach(o=>{this.rpc.rpcMap[o]=(i==null?void 0:i[o])||this.getRpcUrl(o)}))}getRpcUrl(e,t){var n;return((n=this.rpc.rpcMap)==null?void 0:n[e])||`${r7}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t==null?void 0:t.accounts),this.setAccounts(t==null?void 0:t.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}}console.log("✅ JS Loaded");const vI=document.getElementById("connectBtn");console.log("Button loaded:",vI);vI.addEventListener("click",async()=>{console.log("Button clicked");const r=await lm.init({projectId:"84e8498a4e08cafe1acaf08369fd7a56",chains:[1],showQrModal:!0});await r.enable();const n=await(await new J0(r).getSigner()).getAddress();alert("Connected to wallet: "+n)});export{UT as _,xd as g};
